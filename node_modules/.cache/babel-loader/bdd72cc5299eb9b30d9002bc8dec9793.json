{"remainingRequest":"/Users/sylvia/myproject/mysite/ff/node_modules/babel-loader/lib/index.js!/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sylvia/myproject/mysite/ff/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue","mtime":1637689243843},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvc3lsdmlhL215cHJvamVjdC9teXNpdGUvZmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL3N5bHZpYS9teXByb2plY3QvbXlzaXRlL2ZmL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvc3lsdmlhL215cHJvamVjdC9teXNpdGUvZmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgQXJyb3cgZnJvbSAnLi8uL2NvbXBvbmVudHMvQXJyb3cudnVlJzsKaW1wb3J0IEJ0biBmcm9tICcuLy4vY29tcG9uZW50cy9CdG4udnVlJzsKaW1wb3J0IENhbGVuZGFySWNvbiBmcm9tICcuL2NvbXBvbmVudHMvQ2FsZW5kYXJJY29uLnZ1ZSc7CmltcG9ydCBUaW1lSWNvbiBmcm9tICcuLy4vY29tcG9uZW50cy9UaW1lSWNvbi52dWUnOwppbXBvcnQgQ29yZU1vZHVsZSBmcm9tICcuL21vZHVsZXMvY29yZSc7CmltcG9ydCBMb2NhbGVDaGFuZ2UgZnJvbSAnLi8uL2NvbXBvbmVudHMvTG9jYWxlQ2hhbmdlJzsKaW1wb3J0IHsgY2xvbmVEYXRlcywgaXNTYW1lRGF5IH0gZnJvbSAnLi9tb2R1bGVzL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvY2FsZUNoYW5nZTogTG9jYWxlQ2hhbmdlLAogICAgQXJyb3c6IEFycm93LAogICAgQnRuOiBCdG4sCiAgICBDYWxlbmRhckljb246IENhbGVuZGFySWNvbiwKICAgIFRpbWVJY29uOiBUaW1lSWNvbgogIH0sCiAgbW9kZWw6IHsKICAgIHByb3A6ICd2YWx1ZScsCiAgICBldmVudDogJ2lucHV0JwogIH0sCiAgcHJvcHM6IHsKICAgIC8qKgogICAgICogRGVmYXVsdCBpbnB1dCB2YWx1ZQogICAgICogQHR5cGUgTnVtYmVyIFN0cmluZwogICAgICogQGRlZmF1bHQgW10KICAgICAqIEBleGFtcGxlIDEzOTYvMDgvMDEgMjI6NDUgfCAyMDE3LzA3LzA3IDIwOjQ1IHwge3VuaXh9IHwgMjA6NDUKICAgICAqLwogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nLCBEYXRlLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAoKICAgIC8qKgogICAgICogSW5pdGlhbCB2YWx1ZSBvZiBwaWNrZXIgKGlmIHZhbHVlIGlzIGVtcHR5KQogICAgICogQHR5cGUgTnVtYmVyIFN0cmluZwogICAgICogQGRlZmF1bHQgW10KICAgICAqIEBleGFtcGxlIDEzNzAvMDEvMDEgMjI6NDUgfCAyMDE3LzAxLzAxIDIwOjQ1IHwge3VuaXh9IHwgMjA6NDUKICAgICAqIEB2ZXJzaW9uIDEuMC45CiAgICAgKi8KICAgIGluaXRpYWxWYWx1ZTogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEZvcm1hdCBmb3Ige3ZhbHVlfQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAZXhhbXBsZSBqWVlZWS9qTU0vakREIEhIOm1tIHwgWVlZWS9NTS9ERCBISDptbSB8IHggfCB1bml4IHwgSEg6bW0KICAgICAqIEBpZiBlbXB0eSB7aW5wdXRGb3JtYXR9ID0ge2Zvcm1hdH0KICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phbGFhbGkvbW9tZW50LWphbGFhbGkKICAgICAqLwogICAgaW5wdXRGb3JtYXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEZvcm1hdCBvbmx5IHRvIGRpc3BsYXkgdGhlIGRhdGUgaW4gdGhlIGZpZWxkCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBleGFtcGxlIGpZWVlZL2pNTS9qREQgSEg6bW0gfCBZWVlZL01NL0REIEhIOm1tIHwgeCB8IHVuaXggfCBISDptbQogICAgICogQGlmIGVtcHR5IHtkaXNwbGF5Rm9ybWF0fSA9IHtmb3JtYXR9CiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYWxhYWxpL21vbWVudC1qYWxhYWxpCiAgICAgKi8KICAgIGRpc3BsYXlGb3JtYXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEZvcm1hdCBmb3Igb3V0cHV0IHZhbHVlCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBleGFtcGxlIGpZWVlZL2pNTS9qREQgSEg6bW0gfCBZWVlZL01NL0REIEhIOm1tIHwgeCB8IGRhdGUgfCBISDptbQogICAgICogQGlmIGVtcHR5LCBpdCB3aWxsIGJlIGJ1aWx0IGFjY29yZGluZyB0byB0aGUgdHlwZSBvZiBwaWNrZXI6CiAgICAgKgogICAgICogLS0tIHRpbWU6ICAgICBISDptbQogICAgICogLS0tIGRhdGV0aW1lOiBqWVlZWS9qTU0vakREIEhIOm1tCiAgICAgKiAtLS0gZGF0ZTogICAgIGpZWVlZL2pNTS9qREQKICAgICAqIC0tLSB5ZWFyOiAgICAgallZWVkKICAgICAqIC0tLSBtb250aDogICAgak1NCiAgICAgKgogICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vamFsYWFsaS9tb21lbnQtamFsYWFsaQogICAgICovCiAgICBmb3JtYXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIFN0ZXAgdG8gdmlldyBvbiBzdGFydHVwCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0ICJkYXkiCiAgICAgKiBAc3VwcG9ydGVkIGRheSB8IG1vbnRoIHwgeWVhciB8IHRpbWUKICAgICAqIEBleGFtcGxlIHllYXIKICAgICAqIEBkZXNjIHt5ZWFyfSB3aWxsIHNob3cgdGhlICJ5ZWFyIiBwYW5lbCBhdCBmaXJzdAogICAgICovCiAgICB2aWV3OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RheScKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgcGlja2VyIHR5cGUKICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgImRhdGUiCiAgICAgKiBAc3VwcG9ydGVkIGRhdGUgfCBkYXRldGltZSB8IHllYXIgfCBtb250aCB8IHRpbWUKICAgICAqLwogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdkYXRlJwogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBtaW5pbXVtIG9mIHNlbGVjdGFibGUgcGVyaW9kCiAgICAgKiBCYXNlZCBvbiB7aW5wdXRGb3JtYXR9CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBleGFtcGxlIDEzOTYvMDgvMDEgMjI6NDUgfCAyMjo0NQogICAgICovCiAgICBtaW46IHsKICAgICAgdHlwZTogW1N0cmluZ10sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIG1heGltdW0gb2Ygc2VsZWN0YWJsZSBwZXJpb2QKICAgICAqIEJhc2VkIG9uIHtpbnB1dEZvcm1hdH0KICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgTnVsbAogICAgICogQGV4YW1wbGUgMTM5Ni8wOC8wMSAyMjo0NSB8IDIyOjQ1CiAgICAgKi8KICAgIG1heDogewogICAgICB0eXBlOiBbU3RyaW5nXSwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBFZGl0YWJsZSBpbnB1dCBvciBqdXN0IHJlYWRvbmx5CiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCBGYWxzZQogICAgICogQGlmIGZhbHNlLCB0aGUgcGlja2VyIHdpbGwgc2hvd24gb24gaW5wdXQgZm9jdXMKICAgICAqIEBpZiB0cnVlLCB0aGUgcGlja2VyIHdpbGwgc2hvd24gb24gbGFiZWwgY2xpY2sKICAgICAqIEBub3RlIGlmIHVzZSA8Li4uIDplZGl0YWJsZT0idHJ1ZSI+IHdpdGggPC4uLiA6ZWxlbWVudD0iLi4uIj4KICAgICAqICAgICB0aGVuIHlvdSBoYXZlIHRvIGNvbnRyb2wgdGhlIDwuLi4gOnNob3c9InRydWUgb3IgZmFsc2UiPgogICAgICovCiAgICBlZGl0YWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBzcGVjaWZpZWQgaW5wdXQgZWxlbWVudCBJRAogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBVbmRlZmluZWQKICAgICAqIEBkZXNjIFNvbWV0aW1lcyB5b3UgZG9uJ3Qgd2FudCB0byB1c2UgcGlja2VyIGRlZmF1bHQgaW5wdXQsCiAgICAgKiBzbyB5b3UgY2FuIHVzZSBvdXIgb3duIGlucHV0IGVsZW1lbnQgd2l0aCAiaWQiIGF0dHJpYnV0ZQogICAgICogYW5kIHVzZSA8Li4uIGVsZW1lbnQ9InRoZV9pZF9vZl9pbnB1dCI+CiAgICAgKi8KICAgIGVsZW1lbnQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgZm9ybSBpbnB1dCBuYW1lIHdoZW4gbm90IHVzaW5nIHtlbGVtZW50fQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBVbmRlZmluZWQKICAgICAqLwogICAgbmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBmb3JtIGlucHV0IGNsYXNzTmFtZSB3aGVuIG5vdCB1c2luZyB7ZWxlbWVudH0KICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgImZvcm0tY29udHJvbCIKICAgICAqLwogICAgaW5wdXRDbGFzczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdmb3JtLWNvbnRyb2wnCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIGZvcm0gaW5wdXQgcGxhY2Vob2xkZXIgd2hlbiBub3QgdXNpbmcge2VsZW1lbnR9CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqLwogICAgcGxhY2Vob2xkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIGhpZGRlbiBpbnB1dCBlbGVtZW50CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBpZiBlbXB0eSwgdGhlIGhpZGRlbiBpbnB1dCB3aWxsIG5vdCBiZSBjcmVhdGVkCiAgICAgKi8KICAgIGFsdE5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEZvcm1hdCBmb3IgaGlkZGVuIGlucHV0CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBleGFtcGxlIFlZWVktTU0tREQgSEg6bW06c3MgW0dNVF1aWgogICAgICogQGlmIGVtcHR5LCBpdCB3aWxsIGJlIGJ1aWx0IGFjY29yZGluZyB0byB0aGUgdHlwZSBvZiBwaWNrZXI6CiAgICAgKgogICAgICogLS0tIHRpbWU6ICAgICBISDptbTpzcyBbR01UXVpaCiAgICAgKiAtLS0gZGF0ZXRpbWU6IFlZWVktTU0tREQgSEg6bW06c3MgW0dNVF1aWgogICAgICogLS0tIGRhdGU6ICAgICBZWVlZLU1NLURECiAgICAgKiAtLS0geWVhcjogICAgIFlZWVkKICAgICAqIC0tLSBtb250aDogICAgTU0KICAgICAqLwogICAgYWx0Rm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBTaG93IG9yIGhpZGUgdGhlIHBpY2tlcgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgRmFsc2UKICAgICAqLwogICAgc2hvdzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIFByaW1hcnkgY29sb3Igb2YgcGlja2VyCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqLwogICAgY29sb3I6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnIzQxN2RmNCcKICAgIH0sCgogICAgLyoqCiAgICAgKiBBdXRvIHN1Ym1pdCBhbmQgaGlkZSBwaWNrZXIgd2hlbiBkYXRlIHNlbGVjdGVkCiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCBGYWxzZQogICAgICovCiAgICBhdXRvU3VibWl0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogQXV0byBzdWJtaXQgd2hlbiBjbGlja2luZyB0aGUgd3JhcHBlcgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEB2ZXJzaW9uIDEuMC42CiAgICAgKi8KICAgIHdyYXBwZXJTdWJtaXQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBQbGFjZSB0byBhcHBlbmQgcGlja2VyCiAgICAgKiBAdHlwZSBTdHJpbmcgcXVlcnkgc2VsZWN0b3IKICAgICAqIEBkZWZhdWx0IG51bGwKICAgICAqIEBkZXNjIElmIHlvdSB3YW50IHRvIGFwcGVuZCBwaWNrZXIgdG8gYW5vdGhlciBjb250YWluZXIgbGlrZSAnYm9keScsCiAgICAgKiBwYXNzIHRoZSBjb250YWluZXIgYXMgYXBwZW5kLXRvPSJib2R5IiwgIGFwcGVuZC10bz0iI2FwcCIsICBhcHBlbmQtdG89IiNteS1jb250YWluZXIiCiAgICAgKiBAZXhhbXBsZSAnYm9keScsICcubWFpbi1jb250YWluZXInLCAnI2FwcCcgLi4uCiAgICAgKiBAdmVyc2lvbiAxLjEuMQogICAgICovCiAgICBhcHBlbmRUbzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCgogICAgLyoqCiAgICAgKiBEaXNhYmxlIG9yIGVuYWJsZSB0aGUgZGF0ZXBpY2tlcgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEB2ZXJzaW9uIDEuMS40CiAgICAgKi8KICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogRGlzYWJsaW5nCiAgICAgKiBAdHlwZSBBcnJheSwgU3RyaW5nLCBGdW5jdGlvbiwgUmVnRXhwCiAgICAgKiBAZGVmYXVsdCB1bmRlZmluZWQKICAgICAqIEBkZXNjIGRpc2FibGUgc29tZSBkYXRlcwogICAgICogQGV4YW1wbGUgWycxMzk3LzAyLzAyJywgJzEzOTAvMTAvMTAnXSAtICIxMzk3LzA1LzIwIiAtIC8xMzk3XC8wNVwvKC4qKS8gLi4uCiAgICAgKiBAdmVyc2lvbiAxLjEuNAogICAgICovCiAgICBkaXNhYmxlOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgU3RyaW5nLCBGdW5jdGlvbiwgUmVnRXhwXSwKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAoKICAgIC8qKgogICAgICogTGFiZWwKICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQHZlcnNpb24gMS4xLjQKICAgICAqLwogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEhpZ2hsaWdodCBpdGVtcwogICAgICogQHR5cGUgRnVuY3Rpb24KICAgICAqIEBkZXNjIFRoaXMgcHJvcCBhY2NlcHRzIG9ubHkgZnVuY3Rpb24gdGhhdCByZXR1cm4gYW4gb2JqZWN0IG9mIGF0dHJpYnV0ZXMuCiAgICAgKiBAdmVyc2lvbiAxLjEuNQogICAgICovCiAgICBoaWdobGlnaHQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCgogICAgLyoqCiAgICAgKiBDaGFuZ2UgbWludXRlcyBieSBzdGVwCiAgICAgKiBAdHlwZSBOdW1iZXIKICAgICAqIEBkZWZhdWx0IDEKICAgICAqIEB2ZXJzaW9uOiAxLjEuNgogICAgICovCiAgICBqdW1wTWludXRlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKCiAgICAvKioKICAgICAqIFJvdW5kIG1pbnV0ZXMgd2hlbiBqdW1wTWludXRlIGlzIGdyYXRlciB0aGFuIDEKICAgICAqIEBleGFtcGxlIHdoZW4ganVtcE1pbnV0ZSA9IDE1IHRoaW4gd2lsbCByZXN1bHQ6IDEzOjAwLCAxMzoxNSwgMTM6MzAsIDEzOjQ1IC4uLgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEB2ZXJzaW9uOiAxLjEuNgogICAgICovCiAgICByb3VuZE1pbnV0ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIFNob3cgY2xlYXIgYnV0dG9uCiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICogQHZlcnNpb24gMS4xLjYKICAgICAqLwogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogSW5saW5lIG1vZGUKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAdmVyc2lvbiAxLjEuNgogICAgICovCiAgICBpbmxpbmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBMb2NhbGVzIGNvbmZpZyAoImZhIiBmb3IgamFsYWxpIGFuZCAiZW4iIGZvciBncmVnb3JpYW4pCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IGZhCiAgICAgKiBAZXhhbXBsZSBmYSB8IGVuIHwgZmEsZW4gfCBlbixmYQogICAgICogQHN1cHBvcnRlZCBmYSxlbgogICAgICogQHZlcnNpb24gMi4wLjAKICAgICAqLwogICAgbG9jYWxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZhJwogICAgfSwKCiAgICAvKioKICAgICAqIExvY2FsZSBjb25maWd1cmF0aW9uCiAgICAgKiBAdHlwZSBPYmplY3QKICAgICAqIEBkZWZhdWx0IHt9CiAgICAgKiBAdmVyc2lvbiAyLjAuMAogICAgICogQGV4YW1wbGUKICAgICAqIHsKICAgICAqICBmYTogewogICAgICogICAgICBkb3c6IDYsICAgICAgICAgICAgIC0tZmlyc3QgZGF5IG9mIHdlZWsKICAgICAqICAgICAgZGlyOiAncnRsJywgICAgICAgICAtLWxhbmd1YWdlIGRpcmVjdGlvbgogICAgICogICAgICBsYW5nOiB7CiAgICAgKiAgICAgICAgICAgbGFiZWw6ICAgICAi2LTZhdiz24wiLAogICAgICogICAgICAgICAgIHN1Ym1pdDogICAgItiq2KfbjNuM2K8iLAogICAgICogICAgICAgICAgIGNhbmNlbDogICAgItin2YbYtdix2KfZgSIsCiAgICAgKiAgICAgICAgICAgbm93OiAgICAgICAi2KfaqdmG2YjZhiIsCiAgICAgKiAgICAgICAgICAgbmV4dE1vbnRoOiAi2YXYp9mHINio2LnYryIsCiAgICAgKiAgICAgICAgICAgcHJldk1vbnRoOiAi2YXYp9mHINmC2KjZhCIsCiAgICAgKiAgICAgIH0KICAgICAqICB9LAogICAgICogIGVuOiB7IC4uLiB9CiAgICAgKiB9CiAgICAgKi8KICAgIGxvY2FsZUNvbmZpZzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFRpbWV6b25lIGNvbmZpZ3VyYXRpb24KICAgICAqIEB0eXBlIFN0cmluZyB8IEJvb2xlYW4gfCBGdW5jdGlvbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIHRydWUgfCBmYWxzZSB8ICswMzozMCB8ICswNDozMAogICAgICogQHZlcnNpb24gMi4xLjAKICAgICAqLwogICAgdGltZXpvbmU6IHsKICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZywgRnVuY3Rpb25dLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIFNob3cgb3IgaGlkZSBOT1cgYnV0dG9uCiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKiBAdmVyc2lvbiAyLjEuNgogICAgICovCiAgICBzaG93Tm93QnRuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRvIGxvY2FsZSBudW1iZXJzIG9yIG5vdAogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciBjb252ZXJ0LW51bWJlcnMgLz4KICAgICAqIEB2ZXJzaW9uIDIuMy4wCiAgICAgKi8KICAgIGNvbnZlcnROdW1iZXJzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogRGlzcGxheSB0aGUgdGltZSBvbiB0aGUgZnJvbnQgcGFnZQogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciBjb21wYWN0LXRpbWUgLz4KICAgICAqIEB2ZXJzaW9uIDIuNC4wCiAgICAgKi8KICAgIGNvbXBhY3RUaW1lOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogRW5hYmxlIG9yIGRpc2FibGUgcmFuZ2UgbW9kZQogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciByYW5nZSAvPgogICAgICogQHZlcnNpb24gMi41LjAKICAgICAqLwogICAgcmFuZ2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSBtdWx0aXBsZSBtb2RlCiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICogQGV4YW1wbGUgPGRhdGUtcGlja2VyIG11bHRpcGxlIC8+CiAgICAgKiBAdmVyc2lvbiAyLjYuMAogICAgICovCiAgICBtdWx0aXBsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHBvcG92ZXIgbW9kZQogICAgICogQHR5cGUgQm9vbGVhbiB8IFN0cmluZwogICAgICogQGFjY2VwdGVkOgogICAgICogICAgdHJ1ZSB8IGZhbHNlCiAgICAgKiAgICB0b3AtbGVmdCB8IHRvcC1yaWdodCB8IGJvdHRvbS1yaWdodCB8IGJvdHRvbS1sZWZ0CiAgICAgKiAgICBsZWZ0LXRvcCB8IGxlZnQtYm90dG9tIHwgcmlnaHQtdG9wIHwgcmlnaHQtYm90dG9tCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICogQGV4YW1wbGUgPGRhdGUtcGlja2VyIHBvcG92ZXIgLz4KICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciBwb3BvdmVyPSJ0b3AtbGVmdCIgLz4KICAgICAqIEB2ZXJzaW9uIDIuNi4wCiAgICAgKi8KICAgIHBvcG92ZXI6IHsKICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIGRlZmF1bHRMb2NhbGUgPSB0aGlzLmxvY2FsZS5zcGxpdCgnLCcpWzBdOwogICAgdmFyIGNvcmVNb2R1bGUgPSBuZXcgQ29yZU1vZHVsZShkZWZhdWx0TG9jYWxlLCB0aGlzLmxvY2FsZUNvbmZpZyk7CiAgICByZXR1cm4gewogICAgICBjb3JlOiBjb3JlTW9kdWxlLAogICAgICBub3c6IGNvcmVNb2R1bGUubW9tZW50KCksCiAgICAgIGRhdGU6IHt9LAogICAgICBzZWxlY3RlZERhdGVzOiBbXSwKICAgICAgaG92ZXJlZEl0ZW06IG51bGwsCiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICBkaXJlY3Rpb25DbGFzczogJycsCiAgICAgIGRpcmVjdGlvbkNsYXNzRGF0ZTogJycsCiAgICAgIGRpcmVjdGlvbkNsYXNzVGltZTogJycsCiAgICAgIGNsYXNzRmFzdENvdW50ZXI6ICcnLAogICAgICBzdGVwczogWyd5JywgJ20nLCAnZCcsICd0J10sCiAgICAgIHN0ZXA6IDAsCiAgICAgIHNob3J0Q29kZXM6IHsKICAgICAgICB5ZWFyOiAneScsCiAgICAgICAgbW9udGg6ICdtJywKICAgICAgICBkYXk6ICdkJywKICAgICAgICB0aW1lOiAndCcKICAgICAgfSwKICAgICAgdGltZToge30sCiAgICAgIHRpbWVEYXRhOiB7CiAgICAgICAgdHJhbnNpdGlvblNwZWVkOiAzMDAsCiAgICAgICAgdGltZW91dDogZmFsc2UsCiAgICAgICAgbGFzdFVwZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgfSwKICAgICAgbWluRGF0ZTogZmFsc2UsCiAgICAgIG1heERhdGU6IGZhbHNlLAogICAgICBvdXRwdXQ6IFtdLAogICAgICB1cGRhdGVOb3dJbnRlcnZhbDogbnVsbCwKICAgICAgbG9jYWxlczogWydmYSddLAogICAgICBsb2NhbGVEYXRhOiBjb3JlTW9kdWxlLmxvY2FsZSwKICAgICAgd2luZG93V2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgICBwb3BvdmVyUGxhY2U6ICdib3R0b20tcmlnaHQnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZtOiBmdW5jdGlvbiB2bSgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgaWQ6IGZ1bmN0aW9uIGlkKCkgewogICAgICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpOwogICAgfSwKICAgIGN1cnJlbnRTdGVwOiBmdW5jdGlvbiBjdXJyZW50U3RlcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RlcHNbdGhpcy5zdGVwXTsKICAgIH0sCiAgICBzZWxlY3RlZERhdGU6IGZ1bmN0aW9uIHNlbGVjdGVkRGF0ZSgpIHsKICAgICAgdmFyIGRhdGVzID0gdGhpcy5zZWxlY3RlZERhdGVzOwogICAgICByZXR1cm4gZGF0ZXMubGVuZ3RoID8gZGF0ZXNbZGF0ZXMubGVuZ3RoIC0gMV0gOiB0aGlzLmRhdGU7CiAgICB9LAogICAgZm9ybWF0dGVkRGF0ZTogZnVuY3Rpb24gZm9ybWF0dGVkRGF0ZSgpIHsKICAgICAgdmFyIGZvcm1hdCA9ICcnOwogICAgICBpZiAodGhpcy5oYXNTdGVwKCd5JykpIGZvcm1hdCA9ICdqWVlZWSc7CiAgICAgIGlmICh0aGlzLmhhc1N0ZXAoJ20nKSkgZm9ybWF0ICs9ICcgak1NTU0gJzsKCiAgICAgIGlmICh0aGlzLmhhc1N0ZXAoJ2QnKSkgewogICAgICAgIGZvcm1hdCA9IHRoaXMuaXNEYXRhQXJyYXkgPyAnakQgak1NTU0gallZWVknIDogJ2RkZCBqRCBqTU1NTSc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmhhc1N0ZXAoJ3QnKSkgZm9ybWF0ICs9ICcgSEg6bW0gJzsKICAgICAgaWYgKCFmb3JtYXQpIHJldHVybiAnJzsKICAgICAgdmFyIHNlcGFyYXRvciA9IHRoaXMubXVsdGlwbGUgPyAnIHwgJyA6ICcgfiAnOwogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZERhdGVzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnhGb3JtYXQoZm9ybWF0KTsKICAgICAgfSkuam9pbihzZXBhcmF0b3IpOwogICAgfSwKICAgIG1vbnRoOiBmdW5jdGlvbiBtb250aCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5oYXNTdGVwKCdkJykpIHJldHVybiBbXTsKICAgICAgdmFyIG1pbiA9IHRoaXMubWluRGF0ZSA/IHRoaXMubWluRGF0ZS5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpIDogLUluZmluaXR5OwogICAgICB2YXIgbWF4ID0gdGhpcy5tYXhEYXRlID8gdGhpcy5tYXhEYXRlLmNsb25lKCkuZW5kT2YoJ2RheScpIDogSW5maW5pdHk7CiAgICAgIHJldHVybiB0aGlzLmNvcmUuZ2V0V2Vla0FycmF5KHRoaXMuZGF0ZS5jbG9uZSgpKS5tYXAoZnVuY3Rpb24gKHdlZWtJdGVtKSB7CiAgICAgICAgcmV0dXJuIHdlZWtJdGVtLm1hcChmdW5jdGlvbiAoZGF5KSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgZGF0ZTogZGF5LAogICAgICAgICAgICBmb3JtYXR0ZWQ6ICcnLAogICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgICAgYXR0cmlidXRlczoge30KICAgICAgICAgIH07CiAgICAgICAgICBpZiAoIWRheSkgcmV0dXJuIGRhdGE7CgogICAgICAgICAgdmFyIGRheU1vbWVudCA9IF90aGlzLmNvcmUubW9tZW50KGRheSk7CgogICAgICAgICAgZGF0YS5mb3JtYXR0ZWQgPSBkYXlNb21lbnQueERhdGUoKTsKICAgICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBfdGhpcy5zZWxlY3RlZERhdGVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGlzU2FtZURheShpdGVtLCBkYXkpOwogICAgICAgICAgfSk7CiAgICAgICAgICBkYXRhLmRpc2FibGVkID0gX3RoaXMubWluRGF0ZSAmJiBkYXlNb21lbnQuY2xvbmUoKS5zdGFydE9mKCdkYXknKSA8IG1pbiB8fCBfdGhpcy5tYXhEYXRlICYmIGRheU1vbWVudC5jbG9uZSgpLmVuZE9mKCdkYXknKSA+IG1heCB8fCBfdGhpcy5jaGVja0Rpc2FibGUoJ2QnLCBkYXlNb21lbnQpOwoKICAgICAgICAgIGlmIChfdGhpcy5yYW5nZSAmJiAhZGF0YS5kaXNhYmxlZCkgewogICAgICAgICAgICB2YXIgX3RoaXMkc2VsZWN0ZWREYXRlcyA9IF9zbGljZWRUb0FycmF5KF90aGlzLnNlbGVjdGVkRGF0ZXMsIDIpLAogICAgICAgICAgICAgICAgc3RhcnQgPSBfdGhpcyRzZWxlY3RlZERhdGVzWzBdLAogICAgICAgICAgICAgICAgZW5kID0gX3RoaXMkc2VsZWN0ZWREYXRlc1sxXTsKCiAgICAgICAgICAgIGRhdGEuaXNGaXJzdCA9IGRhdGEuc2VsZWN0ZWQgJiYgc3RhcnQgJiYgaXNTYW1lRGF5KHN0YXJ0LCBkYXkpOwogICAgICAgICAgICBkYXRhLmlzTGFzdCA9IGRhdGEuc2VsZWN0ZWQgJiYgZW5kICYmIGlzU2FtZURheShlbmQsIGRheSk7CiAgICAgICAgICAgIGRhdGEuaXNCZXR3ZWVuID0gIWRhdGEuc2VsZWN0ZWQgJiYgc3RhcnQgJiYgZW5kICYmIGRheSA+IHN0YXJ0ICYmIGRheSA8IGVuZDsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRhLmF0dHJpYnV0ZXMgPSBfdGhpcy5nZXRIaWdobGlnaHRzKCdkJywgZGF5TW9tZW50KTsKICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBtb250aERheXM6IGZ1bmN0aW9uIG1vbnRoRGF5cygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMucmFuZ2UgfHwgdGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fCAhdGhpcy5ob3ZlcmVkSXRlbSkgewogICAgICAgIHJldHVybiB0aGlzLm1vbnRoOwogICAgICB9CgogICAgICB2YXIgZGF0ZXMgPSBbdGhpcy5ob3ZlcmVkSXRlbSwgdGhpcy5zZWxlY3RlZERhdGVzWzBdXTsKICAgICAgZGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhIC0gYjsKICAgICAgfSk7CiAgICAgIHZhciBzdGFydCA9IGRhdGVzWzBdLAogICAgICAgICAgZW5kID0gZGF0ZXNbMV07CiAgICAgIHJldHVybiB0aGlzLm1vbnRoLm1hcChmdW5jdGlvbiAod2Vla0l0ZW0pIHsKICAgICAgICByZXR1cm4gd2Vla0l0ZW0ubWFwKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoIWRhdGEuZGF0ZSkgcmV0dXJuIGRhdGE7CgogICAgICAgICAgaWYgKF90aGlzMi5yYW5nZSAmJiAhZGF0YS5kaXNhYmxlZCkgewogICAgICAgICAgICB2YXIgZGF5ID0gZGF0YS5kYXRlOwogICAgICAgICAgICBkYXRhLmlzSG92ZXIgPSAhZGF0YS5zZWxlY3RlZCAmJiBkYXkgPiBzdGFydCAmJiBkYXkgPCBlbmQ7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHllYXJzOiBmdW5jdGlvbiB5ZWFycygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaGFzU3RlcCgneScpIHx8IHRoaXMuY3VycmVudFN0ZXAgIT09ICd5JykgcmV0dXJuIFtdOwogICAgICB2YXIgbW9tZW50ID0gdGhpcy5jb3JlLm1vbWVudDsKICAgICAgdmFyIG1pbiA9IHRoaXMubWluRGF0ZSA/IHRoaXMubWluRGF0ZSA6IG1vbWVudCgnMTMwMCcsICdqWVlZWScpOwogICAgICB2YXIgbWF4ID0gdGhpcy5tYXhEYXRlID8gdGhpcy5tYXhEYXRlIDogbWluLmNsb25lKCkuYWRkKDE1MCwgJ3llYXInKTsKICAgICAgdmFyIGN5ID0gdGhpcy5kYXRlLnhZZWFyKCk7CiAgICAgIHJldHVybiB0aGlzLmNvcmUuZ2V0WWVhcnNMaXN0KG1pbi54WWVhcigpLCBtYXgueFllYXIoKSkucmV2ZXJzZSgpLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciB5ZWFyID0gbW9tZW50KCkueFllYXIoaXRlbSk7CiAgICAgICAgeWVhci5zZWxlY3RlZCA9IGN5ID09PSBpdGVtOwogICAgICAgIHllYXIuZGlzYWJsZWQgPSBfdGhpczMuY2hlY2tEaXNhYmxlKCd5JywgaXRlbSk7CiAgICAgICAgeWVhci5hdHRyaWJ1dGVzID0gX3RoaXMzLmdldEhpZ2hsaWdodHMoJ3knLCBpdGVtKTsKICAgICAgICByZXR1cm4geWVhcjsKICAgICAgfSk7CiAgICB9LAogICAgbW9udGhzOiBmdW5jdGlvbiBtb250aHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaGFzU3RlcCgnbScpKSB7CiAgICAgICAgdmFyIGRhdGUgPSB0aGlzLmRhdGUuY2xvbmUoKS54U3RhcnRPZignbW9udGgnKTsKICAgICAgICB2YXIgbW9udGhzID0gdGhpcy5jb3JlLmdldE1vbnRoc0xpc3QodGhpcy5taW5EYXRlLCB0aGlzLm1heERhdGUsIGRhdGUpOwogICAgICAgIG1vbnRocy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBtLnNlbGVjdGVkID0gX3RoaXM0LmRhdGUueE1vbnRoKCkgPT09IG0ueE1vbnRoKCk7CiAgICAgICAgICBtLmRpc2FibGVkID0gbS5kaXNhYmxlZCB8fCBfdGhpczQuY2hlY2tEaXNhYmxlKCdtJywgbSk7CiAgICAgICAgICBtLmF0dHJpYnV0ZXMgPSBfdGhpczQuZ2V0SGlnaGxpZ2h0cygnbScsIG0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBtb250aHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbXTsKICAgIH0sCiAgICBwcmV2TW9udGhEaXNhYmxlZDogZnVuY3Rpb24gcHJldk1vbnRoRGlzYWJsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmhhc1N0ZXAoJ2QnKSAmJiB0aGlzLm1pbkRhdGUgJiYgdGhpcy5taW5EYXRlLmNsb25lKCkueFN0YXJ0T2YoJ21vbnRoJykgPj0gdGhpcy5kYXRlLmNsb25lKCkueFN0YXJ0T2YoJ21vbnRoJyk7CiAgICB9LAogICAgbmV4dE1vbnRoRGlzYWJsZWQ6IGZ1bmN0aW9uIG5leHRNb250aERpc2FibGVkKCkgewogICAgICByZXR1cm4gdGhpcy5oYXNTdGVwKCdkJykgJiYgdGhpcy5tYXhEYXRlICYmIHRoaXMubWF4RGF0ZS5jbG9uZSgpLnhTdGFydE9mKCdtb250aCcpIDw9IHRoaXMuZGF0ZS5jbG9uZSgpLnhTdGFydE9mKCdtb250aCcpOwogICAgfSwKICAgIGNhbkdvVG9kYXk6IGZ1bmN0aW9uIGNhbkdvVG9kYXkoKSB7CiAgICAgIGlmICghdGhpcy5taW5EYXRlICYmICF0aGlzLm1heERhdGUpIHJldHVybiB0cnVlOwogICAgICB2YXIgbm93ID0gdGhpcy5ub3c7CiAgICAgIHZhciBtaW4gPSB0aGlzLm1pbkRhdGUgJiYgdGhpcy5taW5EYXRlIDw9IG5vdzsKICAgICAgdmFyIG1heCA9IHRoaXMubWF4RGF0ZSAmJiBub3cgPD0gdGhpcy5tYXhEYXRlOwoKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ3RpbWUnKSB7CiAgICAgICAgaWYgKHRoaXMubWluRGF0ZSkgewogICAgICAgICAgbWluID0gbm93LmNsb25lKCkuaG91cih0aGlzLm1pbkRhdGUuaG91cigpKS5taW51dGUodGhpcy5taW5EYXRlLm1pbnV0ZSgpKTsKICAgICAgICAgIG1pbiA9IG1pbiA8PSBub3c7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5tYXhEYXRlKSB7CiAgICAgICAgICBtYXggPSB0aGlzLm5vdy5jbG9uZSgpLmhvdXIodGhpcy5tYXhEYXRlLmhvdXIoKSkubWludXRlKHRoaXMubWF4RGF0ZS5taW51dGUoKSk7CiAgICAgICAgICBtYXggPSBub3cgPD0gbWF4OwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMubWluRGF0ZSAmJiB0aGlzLm1heERhdGUpIHJldHVybiBtaW4gJiYgbWF4OwogICAgICBpZiAodGhpcy5taW5EYXRlKSByZXR1cm4gbWluOwogICAgICBpZiAodGhpcy5tYXhEYXRlKSByZXR1cm4gbWF4OwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgYWx0Rm9ybWF0dGVkOiBmdW5jdGlvbiBhbHRGb3JtYXR0ZWQoKSB7CiAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmFsdEZvcm1hdDsKCiAgICAgIGlmIChmb3JtYXQgPT09ICcnIHx8IGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ3RpbWUnOgogICAgICAgICAgICBmb3JtYXQgPSAnSEg6bW06c3MgW0dNVF1aWic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ1lZWVktTU0tREQgSEg6bW06c3MgW0dNVF1aWic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2RhdGUnOgogICAgICAgICAgICBmb3JtYXQgPSAnWVlZWS1NTS1ERCc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3llYXInOgogICAgICAgICAgICBmb3JtYXQgPSAnWVlZWSc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ21vbnRoJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ01NJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAneWVhci1tb250aCc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdZWVlZLU1NJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5vdXRwdXQubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuZm9ybWF0KGZvcm1hdCk7CiAgICAgIH0pLmpvaW4oJyB+ICcpOwogICAgfSwKICAgIHNlbGZGb3JtYXQ6IGZ1bmN0aW9uIHNlbGZGb3JtYXQoKSB7CiAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmZvcm1hdDsKCiAgICAgIGlmIChbJycsIHVuZGVmaW5lZCwgJ2RhdGUnXS5pbmRleE9mKGZvcm1hdCkgIT09IC0xKSB7CiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ3RpbWUnOgogICAgICAgICAgICBmb3JtYXQgPSAnSEg6bW0nOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdkYXRldGltZSc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdqWVlZWS9qTU0vakREIEhIOm1tJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnZGF0ZSc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdqWVlZWS9qTU0vakREJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAneWVhcic6CiAgICAgICAgICAgIGZvcm1hdCA9ICdqWVlZWSc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ21vbnRoJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ2pNTSc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3llYXItbW9udGgnOgogICAgICAgICAgICBmb3JtYXQgPSAnallZWVkvak1NJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZm9ybWF0OwogICAgfSwKICAgIHNlbGZJbnB1dEZvcm1hdDogZnVuY3Rpb24gc2VsZklucHV0Rm9ybWF0KCkgewogICAgICByZXR1cm4gdGhpcy5pbnB1dEZvcm1hdCA9PT0gJycgfHwgdGhpcy5pbnB1dEZvcm1hdCA9PT0gdW5kZWZpbmVkID8gdGhpcy5zZWxmRm9ybWF0IDogdGhpcy5pbnB1dEZvcm1hdDsKICAgIH0sCiAgICBvdXRwdXRWYWx1ZTogZnVuY3Rpb24gb3V0cHV0VmFsdWUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIG91dHB1dCA9IGNsb25lRGF0ZXModGhpcy5vdXRwdXQpOwogICAgICB2YXIgZm9ybWF0ID0gdGhpcy5zZWxmRm9ybWF0OwogICAgICB2YXIgaXNEYXRlID0gdGhpcy52YWx1ZSBpbnN0YW5jZW9mIERhdGUgfHwgdGhpcy5mb3JtYXQgPT09ICdkYXRlJzsKICAgICAgcmV0dXJuIG91dHB1dC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAvalx3Ly50ZXN0KGZvcm1hdCkgJiYgaXRlbS5sb2NhbGUoJ2ZhJyk7CgogICAgICAgIF90aGlzNS5zZXRUaW1lem9uZShpdGVtLCAnb3V0Jyk7CgogICAgICAgIHJldHVybiBpc0RhdGUgPyBpdGVtLnRvRGF0ZSgpIDogaXRlbS5mb3JtYXQoZm9ybWF0KTsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZkRpc3BsYXlGb3JtYXQ6IGZ1bmN0aW9uIHNlbGZEaXNwbGF5Rm9ybWF0KCkgewogICAgICB2YXIgZm9ybWF0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0IHx8IHRoaXMuc2VsZkZvcm1hdDsKICAgICAgdmFyIGxvY2FsZUZvcm1hdCA9IHRoaXMubG9jYWxlRGF0YS5jb25maWcuZGlzcGxheUZvcm1hdDsKCiAgICAgIGlmIChsb2NhbGVGb3JtYXQpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIGxvY2FsZUZvcm1hdCA9PT0gJ2Z1bmN0aW9uJyA/IGxvY2FsZUZvcm1hdCh0aGlzKSA6IGxvY2FsZUZvcm1hdDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubG9jYWxlRGF0YS5uYW1lICE9PSAnZmEnKSB7CiAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoL2ovZywgJycpOwogICAgICB9CgogICAgICByZXR1cm4gZm9ybWF0OwogICAgfSwKICAgIGRpc3BsYXlWYWx1ZTogZnVuY3Rpb24gZGlzcGxheVZhbHVlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBmb3JtYXQgPSB0aGlzLnNlbGZEaXNwbGF5Rm9ybWF0OwogICAgICByZXR1cm4gdGhpcy5vdXRwdXQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIG91dHB1dCA9IGl0ZW0uY2xvbmUoKTsKICAgICAgICAvalx3Ly50ZXN0KGZvcm1hdCkgJiYgb3V0cHV0LmxvY2FsZSgnZmEnKTsKICAgICAgICByZXR1cm4gX3RoaXM2LmNvbnZlcnRUb0xvY2FsZU51bWJlcihvdXRwdXQuZm9ybWF0KGZvcm1hdCkpOwogICAgICB9KS5qb2luKCcgfiAnKTsKICAgIH0sCiAgICBpc0Rpc2FibGVUaW1lOiBmdW5jdGlvbiBpc0Rpc2FibGVUaW1lKCkgewogICAgICByZXR1cm4gdGhpcy5oYXNTdGVwKCd0JykgJiYgdGhpcy5jaGVja0Rpc2FibGUoJ3QnLCB0aGlzLnRpbWUpOwogICAgfSwKICAgIHRpbWVBdHRyaWJ1dGVzOiBmdW5jdGlvbiB0aW1lQXR0cmlidXRlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzU3RlcCgndCcpID8gdGhpcy5nZXRIaWdobGlnaHRzKCd0JywgdGhpcy50aW1lKSA6IHt9OwogICAgfSwKICAgIGNhblN1Ym1pdDogZnVuY3Rpb24gY2FuU3VibWl0KCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZSkgcmV0dXJuIHRydWU7CiAgICAgIHZhciBjYW4gPSB0cnVlOwogICAgICBpZiAodGhpcy5oYXNTdGVwKCd0JykpIGNhbiA9ICF0aGlzLmlzRGlzYWJsZVRpbWU7CiAgICAgIGlmIChjYW4gJiYgdGhpcy50eXBlICE9PSAndGltZScpIGNhbiA9ICF0aGlzLmNoZWNrRGlzYWJsZSgnZCcsIHRoaXMuZGF0ZSk7CiAgICAgIHJldHVybiBjYW47CiAgICB9LAogICAgd2Vla0RheXM6IGZ1bmN0aW9uIHdlZWtEYXlzKCkgewogICAgICB2YXIgbmFtZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29yZS5tb21lbnQoKS5sb2NhbGVEYXRhKCkud2Vla2RheXNNaW4oKSkpOwogICAgICB2YXIgZG93ID0gdGhpcy5jb3JlLmxvY2FsZS5jb25maWcuZG93OwoKICAgICAgd2hpbGUgKGRvdyA+IDApIHsKICAgICAgICBuYW1lcy5wdXNoKG5hbWVzLnNoaWZ0KCkpOwogICAgICAgIGRvdy0tOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZXM7CiAgICB9LAogICAgbGFuZzogZnVuY3Rpb24gbGFuZygpIHsKICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YS5jb25maWcubGFuZzsKICAgIH0sCiAgICBpc1BvcG92ZXI6IGZ1bmN0aW9uIGlzUG9wb3ZlcigpIHsKICAgICAgcmV0dXJuICh0aGlzLnBvcG92ZXIgPT09ICcnIHx8IHRoaXMucG9wb3ZlcikgJiYgdGhpcy53aW5kb3dXaWR0aCA+IDQ4MDsKICAgIH0sCiAgICBpc0RhdGFBcnJheTogZnVuY3Rpb24gaXNEYXRhQXJyYXkoKSB7CiAgICAgIHJldHVybiB0aGlzLnJhbmdlIHx8IHRoaXMubXVsdGlwbGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdHlwZTogewogICAgICBoYW5kbGVyOiAnc2V0VHlwZScsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIHZpZXc6IHsKICAgICAgaGFuZGxlcjogJ3NldFZpZXcnLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICB2YWx1ZTogewogICAgICBoYW5kbGVyOiAndXBkYXRlRGF0ZXMnLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBtaW46IHsKICAgICAgaGFuZGxlcjogJ3NldE1pbk1heCcsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIG1heDogewogICAgICBoYW5kbGVyOiAnc2V0TWluTWF4JywKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgdGltZXpvbmU6IHsKICAgICAgaGFuZGxlcjogJ3VwZGF0ZURhdGVzJwogICAgfSwKICAgIGlubGluZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgdGhpcy52aXNpYmxlID0gISF2YWw7CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKHZhbCkgdGhpcy52aXNpYmxlID0gZmFsc2U7ZWxzZSBpZiAodGhpcy5pbmxpbmUpIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIHNlbGVjdGVkRGF0ZTogZnVuY3Rpb24gc2VsZWN0ZWREYXRlKHZhbCwgb2xkKSB7CiAgICAgIHRoaXMuc2V0RGlyZWN0aW9uKCdkaXJlY3Rpb25DbGFzcycsIHZhbCwgb2xkKTsKICAgIH0sCiAgICBkYXRlOiBmdW5jdGlvbiBkYXRlKHZhbCwgb2xkKSB7CiAgICAgIHRoaXMuc2V0RGlyZWN0aW9uKCdkaXJlY3Rpb25DbGFzc0RhdGUnLCB2YWwsIG9sZCk7CiAgICAgIGlmICh0aGlzLmlzTG93ZXIodGhpcy5kYXRlKSkgdGhpcy5kYXRlID0gdGhpcy5taW5EYXRlLmNsb25lKCk7CiAgICAgIGlmICh0aGlzLmlzTW9yZSh0aGlzLmRhdGUpKSB0aGlzLmRhdGUgPSB0aGlzLm1heERhdGUuY2xvbmUoKTsKICAgIH0sCiAgICB0aW1lOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsLCBvbGQpIHsKICAgICAgICBpZiAodGhpcy5oYXNTdGVwKCd0JykgJiYgdGhpcy5yb3VuZE1pbnV0ZSkgewogICAgICAgICAgdmFyIHRpbWUgPSB0aGlzLnRpbWUuY2xvbmUoKTsKICAgICAgICAgIHZhciBqbSA9IHRoaXMuanVtcE1pbnV0ZTsKICAgICAgICAgIHZhciBtID0gKGptIC0gdGltZS5taW51dGUoKSAlIGptKSAlIGptOwogICAgICAgICAgdGltZS5hZGQoewogICAgICAgICAgICBtOiBtCiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGltZS52YWx1ZU9mKCkgIT09IHRoaXMudGltZS52YWx1ZU9mKCkpIHsKICAgICAgICAgICAgdGhpcy50aW1lID0gdGltZTsgLy8gQHRvZG86IHRoaXMgbGluZSBzaG91bGQgYXBwbHkgdGltZSB0byBjdXJyZW50IGRhdGUgc2VsZWN0aW9uLAogICAgICAgICAgICAvLyBub3QgYWxsIG9mIHRoZW0KCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQuc2V0KHsKICAgICAgICAgICAgICAgIG06IHRpbWUubWludXRlKCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAob2xkKSB0aGlzLnNldERpcmVjdGlvbignZGlyZWN0aW9uQ2xhc3NUaW1lJywgdmFsLCBvbGQpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICB2aXNpYmxlOiBmdW5jdGlvbiB2aXNpYmxlKHZhbCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh2YWwpIHsKICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdkYXRldGltZScgJiYgdGhpcy52aWV3ID09PSAnZGF5JykgdGhpcy5nb1N0ZXAoJ2QnKTsKICAgICAgICBpZiAodGhpcy52aWV3ICE9PSAnZGF5JykgdGhpcy5nb1N0ZXAodGhpcy5zaG9ydENvZGVzW3RoaXMudmlld10gfHwgJ2QnKTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX3RoaXM3LmFwcGVuZFRvKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX3RoaXM3LmFwcGVuZFRvKTsKICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoX3RoaXM3LiRyZWZzLnBpY2tlcik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVyKSB7CiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJDYW5ub3QgYXBwZW5kIHBpY2tlciB0byBcIiIuY29uY2F0KF90aGlzNy5hcHBlbmRUbywgIlwiISIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hlY2tTY3JvbGwoKTsKICAgICAgICB0aGlzLnNldFBsYWNlbWVudCgpOwogICAgICAgIHRoaXMuJGVtaXQoJ29wZW4nLCB0aGlzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5pbmxpbmUgJiYgIXRoaXMuZGlzYWJsZWQpIHJldHVybiB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJywgdGhpcyk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KHZhbCkgewogICAgICB0aGlzLnZpc2libGUgPSB2YWw7CiAgICB9LAogICAgbG9jYWxlOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB2YXIgbG9jYWxlcyA9IHZhbC50b1N0cmluZygpLnNwbGl0KCcsJyk7CiAgICAgICAgdGhpcy5sb2NhbGVzID0gbG9jYWxlcy5sZW5ndGggPyBsb2NhbGVzIDogWydmYSddOwoKICAgICAgICBpZiAodGhpcy5jb3JlLmxvY2FsZS5uYW1lICE9PSB0aGlzLmxvY2FsZXNbMF0pIHsKICAgICAgICAgIHRoaXMuc2V0TG9jYWxlKHRoaXMubG9jYWxlc1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9jYWxlQ29uZmlnOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihjb25maWcpIHsKICAgICAgICB0aGlzLmNvcmUuc2V0TG9jYWxlc0NvbmZpZyhjb25maWcpOwogICAgICAgIHRoaXMuc2V0TG9jYWxlKHRoaXMubG9jYWxlRGF0YS5uYW1lKTsKICAgICAgfQogICAgfSwKICAgICdsb2NhbGVEYXRhLm5hbWUnOiBmdW5jdGlvbiBsb2NhbGVEYXRhTmFtZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnbG9jYWxlQ2hhbmdlJywgdGhpcy5sb2NhbGVEYXRhKTsKICAgICAgdGhpcy5zZXRNaW5NYXgoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICB0aGlzLnVwZGF0ZU5vd0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICBfdGhpczgubm93ID0gX3RoaXM4LmNvcmUubW9tZW50KCk7CiAgICB9LCAxMDAwKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhZGRFdmVudCA9IGZ1bmN0aW9uIGFkZEV2ZW50KGVsLCB0eXBlLCBoYW5kbGVyKSB7CiAgICAgICAgaWYgKGVsLmF0dGFjaEV2ZW50KSBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgaGFuZGxlcik7ZWxzZSBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpOwogICAgICB9OwoKICAgICAgdmFyIGxpdmUgPSBmdW5jdGlvbiBsaXZlKHNlbGVjdG9yLCBldmVudCwgY2FsbGJhY2ssIGNvbnRleHQpIHsKICAgICAgICBhZGRFdmVudChjb250ZXh0IHx8IGRvY3VtZW50LCBldmVudCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBmb3VuZDsKICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKCiAgICAgICAgICB3aGlsZSAoZWwgJiYgIShmb3VuZCA9IGVsLmlkID09PSBzZWxlY3RvcikpIHsKICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmb3VuZCkgY2FsbGJhY2suY2FsbChlbCwgZSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBpZiAoX3RoaXM5LmVsZW1lbnQgJiYgIV90aGlzOS5lZGl0YWJsZSkgewogICAgICAgIGxpdmUoX3RoaXM5LmVsZW1lbnQsICdjbGljaycsIF90aGlzOS5mb2N1cyk7CiAgICAgIH0KICAgIH0pOwogICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHsKICAgICAgZSA9IGUgfHwgZXZlbnQ7CiAgICAgIHZhciBjb2RlID0gZS5rZXlDb2RlOwogICAgICBpZiAoKGNvZGUgPT09IDkgfHwgY29kZSA9PT0gMjcpICYmIF90aGlzOS52aXNpYmxlKSBfdGhpczkudmlzaWJsZSA9IGZhbHNlOwogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdHJ1ZSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbldpbmRvd0NsaWNrLCB0cnVlKTsKICB9LAogIG9uQmVmb3JlVW5tb3VudDogZnVuY3Rpb24gb25CZWZvcmVVbm1vdW50KCkgewogICAgY29uc29sZS5sb2coJ29uQmVmb3JlVW5tb3VudCcpOwogICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVOb3dJbnRlcnZhbCk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdHJ1ZSk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbldpbmRvd0NsaWNrLCB0cnVlKTsKICAgIHZhciBwaWNrZXIgPSB0aGlzLiRyZWZzLnBpY2tlcjsKCiAgICBpZiAodGhpcy5hcHBlbmRUbyAmJiBwaWNrZXIgJiYgcGlja2VyLiRlbCAmJiBwaWNrZXIuJGVsLnBhcmVudE5vZGUpIHsKICAgICAgcGlja2VyLiRlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBpY2tlci4kZWwpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbmV4dFN0ZXA6IGZ1bmN0aW9uIG5leHRTdGVwKCkgewogICAgICB2YXIgc3RlcCA9IHRoaXMuc3RlcCArIDE7CiAgICAgIGlmICh0aGlzLmNvbXBhY3RUaW1lICYmIHRoaXMudHlwZSA9PT0gJ2RhdGV0aW1lJykgc3RlcCArPSAxOwoKICAgICAgaWYgKHRoaXMuc3RlcHMubGVuZ3RoIDw9IHN0ZXApIHsKICAgICAgICB2YXIgcGFzc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aCA+PSAodGhpcy5yYW5nZSA/IDIgOiAxKTsKCiAgICAgICAgaWYgKCh0aGlzLmF1dG9TdWJtaXQgfHwgdGhpcy5pbmxpbmUpICYmIHBhc3NTZWxlY3RlZCkgewogICAgICAgICAgdGhpcy5zdWJtaXQoIXRoaXMubXVsdGlwbGUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0ZXArKzsKICAgICAgICB0aGlzLmdvU3RlcCh0aGlzLnN0ZXApOwogICAgICB9CiAgICB9LAogICAgZ29TdGVwOiBmdW5jdGlvbiBnb1N0ZXAoaSkgewogICAgICB0aGlzLnN0ZXAgPSB0eXBlb2YgaSA9PT0gJ251bWJlcicgPyBpIDogdGhpcy5zdGVwcy5pbmRleE9mKGkpOwogICAgICB0aGlzLmNoZWNrU2Nyb2xsKCk7CiAgICB9LAogICAgY2hlY2tTY3JvbGw6IGZ1bmN0aW9uIGNoZWNrU2Nyb2xsKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB2YXIgc3RlcCA9IHRoaXMuY3VycmVudFN0ZXA7CgogICAgICBpZiAoc3RlcCA9PT0gJ3knIHx8IHN0ZXAgPT09ICdtJyAmJiB0aGlzLnZpc2libGUpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBfdGhpczEwLiRyZWZzW3sKICAgICAgICAgICAgeTogJ3llYXInLAogICAgICAgICAgICBtOiAnbW9udGgnCiAgICAgICAgICB9W3N0ZXBdXTsKCiAgICAgICAgICBpZiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudnBkLXNlbGVjdGVkJyk7CgogICAgICAgICAgICBpZiAoc2VsZWN0ZWQgJiYgJ3Njcm9sbEludG9WaWV3JyBpbiBzZWxlY3RlZCkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZWxlY3RlZC5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICAgICAgICAgIGJsb2NrOiAnY2VudGVyJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXIpIHsKICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNjcm9sbEludG9WaWV3KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfSwKICAgIGZhc3RVcGRhdGVDb3VudGVyOiBmdW5jdGlvbiBmYXN0VXBkYXRlQ291bnRlcihlKSB7CiAgICAgIGlmICghZSkgdGhpcy50aW1lRGF0YS50cmFuc2l0aW9uU3BlZWQgPSAzMDA7CiAgICAgIHRoaXMuY2xhc3NGYXN0Q291bnRlciA9IGUgPyAnZmFzdC11cGRhdGluZycgOiAnJzsKICAgIH0sCiAgICBuZXh0TW9udGg6IGZ1bmN0aW9uIG5leHRNb250aCgpIHsKICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLmNsb25lKCkueEFkZCgxLCAnbW9udGgnKTsKICAgIH0sCiAgICBwcmV2TW9udGg6IGZ1bmN0aW9uIHByZXZNb250aCgpIHsKICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLmNsb25lKCkueEFkZCgtMSwgJ21vbnRoJyk7CiAgICB9LAogICAgc2VsZWN0RGF5OiBmdW5jdGlvbiBzZWxlY3REYXkoZGF5KSB7CiAgICAgIGlmICghZGF5LmRhdGUgfHwgZGF5LmRpc2FibGVkKSByZXR1cm47CiAgICAgIHZhciBkYXRlID0gdGhpcy5jb3JlLm1vbWVudChkYXkuZGF0ZSk7CiAgICAgIGRhdGUuc2V0KHsKICAgICAgICBob3VyOiB0aGlzLnRpbWUuaG91cigpLAogICAgICAgIG1pbnV0ZTogdGhpcy50aW1lLm1pbnV0ZSgpLAogICAgICAgIHNlY29uZDogMAogICAgICB9KTsKICAgICAgdGhpcy5kYXRlID0gZGF0ZS5jbG9uZSgpOwogICAgICB0aGlzLnRpbWUgPSBkYXRlLmNsb25lKCk7CgogICAgICBpZiAodGhpcy5yYW5nZSkgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoOwoKICAgICAgICBpZiAoIWxlbmd0aCB8fCBsZW5ndGggPiAxKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbZGF0ZS5jbG9uZSgpXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzLnB1c2goZGF0ZS5jbG9uZSgpKTsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBhIC0gYjsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdmFyIGV4aXN0cyA9IHRoaXMuc2VsZWN0ZWREYXRlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBkLnZhbHVlT2YoKSA9PT0gZGF0ZS52YWx1ZU9mKCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChleGlzdHMgPiAtMSkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzLnNwbGljZShleGlzdHMsIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMucHVzaChkYXRlLmNsb25lKCkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbZGF0ZS5jbG9uZSgpXTsKICAgICAgfQoKICAgICAgdGhpcy5uZXh0U3RlcCgpOwogICAgfSwKICAgIHNlbGVjdFllYXI6IGZ1bmN0aW9uIHNlbGVjdFllYXIoeWVhcikgewogICAgICBpZiAoeWVhci5kaXNhYmxlZCkgcmV0dXJuOwogICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGUuY2xvbmUoKS54WWVhcih5ZWFyLnhZZWFyKCkpOwogICAgICB0aGlzLm5leHRTdGVwKCk7CiAgICB9LAogICAgc2VsZWN0TW9udGg6IGZ1bmN0aW9uIHNlbGVjdE1vbnRoKG1vbnRoKSB7CiAgICAgIGlmIChtb250aC5kaXNhYmxlZCkgcmV0dXJuOwogICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGUuY2xvbmUoKS54TW9udGgobW9udGgueE1vbnRoKCkpOwogICAgICB0aGlzLm5leHRTdGVwKCk7CiAgICB9LAogICAgc2V0VGltZTogZnVuY3Rpb24gc2V0VGltZSh2LCBrKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHZhciB0aW1lID0gdGhpcy50aW1lLmNsb25lKCk7CiAgICAgIHRpbWUuYWRkKF9kZWZpbmVQcm9wZXJ0eSh7fSwgaywgdikpOwoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ3RpbWUnKSB7CiAgICAgICAgdmFyIGRhdGUgPSB0aGlzLmRhdGUuY2xvbmUoKTsKICAgICAgICB0aW1lLnNldCh7CiAgICAgICAgICB5ZWFyOiBkYXRlLnllYXIoKSwKICAgICAgICAgIG1vbnRoOiBkYXRlLm1vbnRoKCksCiAgICAgICAgICBkYXRlOiBkYXRlLmRhdGUoKQogICAgICAgIH0pOwogICAgICAgIGRhdGUuc2V0KHsKICAgICAgICAgIGhvdXI6IHRpbWUuaG91cigpLAogICAgICAgICAgbWludXRlOiB0aW1lLm1pbnV0ZSgpCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNMb3dlcih0aW1lKSkgdGltZSA9IHRoaXMubWluRGF0ZS5jbG9uZSgpOwogICAgICBpZiAodGhpcy5pc01vcmUodGltZSkpIHRpbWUgPSB0aGlzLm1heERhdGUuY2xvbmUoKTsKICAgICAgdGhpcy50aW1lID0gdGltZTsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB2YXIgZGVmID0gbm93IC0gdGhpcy50aW1lRGF0YS5sYXN0VXBkYXRlOwogICAgICBpZiAoZGVmID4gMjAgJiYgZGVmIDwgMzAwKSB0aGlzLnRpbWVEYXRhLnRyYW5zaXRpb25TcGVlZCA9IGRlZjsKICAgICAgdGhpcy50aW1lRGF0YS5sYXN0VXBkYXRlID0gbm93OwogICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZURhdGEudGltZW91dCk7CiAgICAgIHRoaXMudGltZURhdGEudGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczExLnRpbWVEYXRhLnRyYW5zaXRpb25TcGVlZCA9IDMwMDsKICAgICAgfSwgMzAwKTsKICAgIH0sCiAgICB3aGVlbFNldFRpbWU6IGZ1bmN0aW9uIHdoZWVsU2V0VGltZShrLCBlKSB7CiAgICAgIHZhciBkZWx0YSA9IGsgPT09ICdtJyA/IHRoaXMuanVtcE1pbnV0ZSA6IDE7CiAgICAgIHRoaXMuc2V0VGltZShlLndoZWVsRGVsdGFZID4gMCA/IGRlbHRhIDogLWRlbHRhLCBrKTsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdmFyIGNsb3NlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB2YXIgc3RlcHMgPSB0aGlzLnN0ZXBzLmxlbmd0aCAtIDE7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWREYXRlczsKICAgICAgaWYgKHRoaXMuY29tcGFjdFRpbWUgJiYgdGhpcy50eXBlID09PSAnZGF0ZXRpbWUnKSBzdGVwcyAtPSAxOwogICAgICBpZiAodGhpcy5zdGVwIDwgc3RlcHMpIHJldHVybiB0aGlzLm5leHRTdGVwKCk7CgogICAgICBpZiAodGhpcy5oYXNTdGVwKCd0JykpIHsKICAgICAgICB2YXIgdCA9IHsKICAgICAgICAgIGhvdXI6IHRoaXMudGltZS5ob3VyKCksCiAgICAgICAgICBtaW51dGU6IHRoaXMudGltZS5taW51dGUoKQogICAgICAgIH07CiAgICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLnNldCh0KS5jbG9uZSgpOwogICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IHNlbGVjdGVkLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGQuc2V0KHQpLmNsb25lKCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChbJ3llYXInLCAnbW9udGgnLCAneWVhci1tb250aCddLmluZGV4T2YodGhpcy50eXBlKSAhPT0gLTEpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBzZWxlY3RlZC5tYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMTIuZGF0ZS5jbG9uZSgpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodGhpcy5yYW5nZSAmJiBzZWxlY3RlZC5sZW5ndGggPiAxKSB7CiAgICAgICAgc2VsZWN0ZWRbMF0ueFN0YXJ0T2YoJ2RheScpOwogICAgICAgIHNlbGVjdGVkWzFdLnhFbmRPZignZGF5Jyk7CiAgICAgIH0KCiAgICAgIHRoaXMub3V0cHV0ID0gY2xvbmVEYXRlcyhzZWxlY3RlZCk7CiAgICAgIGlmIChjbG9zZSkgdGhpcy52aXNpYmxlID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5pc0RhdGFBcnJheSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5vdXRwdXRWYWx1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgY2xvbmVEYXRlcyhzZWxlY3RlZCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5vdXRwdXRWYWx1ZVswXSk7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgc2VsZWN0ZWRbMF0uY2xvbmUoKSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVEYXRlczogZnVuY3Rpb24gdXBkYXRlRGF0ZXMocGF5bG9hZCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pc0RhdGFBcnJheSAmJiAhcGF5bG9hZCkgcGF5bG9hZCA9IFtdOwogICAgICB2YXIgcGF5bG9hZElzQXJyYXkgPSBwYXlsb2FkIGluc3RhbmNlb2YgQXJyYXk7CgogICAgICB2YXIgZ2V0RGF0ZSA9IGZ1bmN0aW9uIGdldERhdGUoaW5wdXQpIHsKICAgICAgICB2YXIgaW5kZXggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgICAgdmFyIGRhdGU7CiAgICAgICAgdmFyIHN0YXJ0VmFsdWUgPSBfdGhpczEzLnZhbHVlIGluc3RhbmNlb2YgQXJyYXkgPyBfdGhpczEzLnZhbHVlW2luZGV4XSA6IF90aGlzMTMudmFsdWU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgaXNPYmplY3QgPSBfdHlwZW9mKGlucHV0KSA9PT0gJ29iamVjdCc7CgogICAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgICBkYXRlID0gX3RoaXMxMy5nZXRNb21lbnQoaW5wdXQpOwogICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCAmJiBpc09iamVjdCAmJiAnY2xvbmUnIGluIGlucHV0KSB7CiAgICAgICAgICAgIGRhdGUgPSBpbnB1dC5jbG9uZSgpOwogICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gbnVsbCB8fCAhaXNPYmplY3QpIHsKICAgICAgICAgICAgZGF0ZSA9IF90aGlzMTMuZ2V0TW9tZW50KGlucHV0IHx8IHN0YXJ0VmFsdWUgfHwgX3RoaXMxMy5pbml0aWFsVmFsdWUpOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGUgPSBkYXRlLmlzVmFsaWQoKSA/IGRhdGUgOiBfdGhpczEzLmNvcmUubW9tZW50KCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgZGF0ZSA9IF90aGlzMTMuY29yZS5tb21lbnQoKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMTMuc2V0VGltZXpvbmUoZGF0ZSwgJ2luJyk7CgogICAgICAgIHJldHVybiBkYXRlOwogICAgICB9OwoKICAgICAgaWYgKHBheWxvYWRJc0FycmF5KSB7CiAgICAgICAgdGhpcy5kYXRlID0gZ2V0RGF0ZShwYXlsb2FkWzBdKTsKICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBwYXlsb2FkLm1hcChnZXREYXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGUgPSBnZXREYXRlKHBheWxvYWQpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuaGFzU3RlcCgndCcpKSB0aGlzLmRhdGUuc2V0KHsKICAgICAgICBob3VyOiAwLAogICAgICAgIG1pbnV0ZTogMCwKICAgICAgICBzZWNvbmQ6IDAKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5pc0xvd2VyKHRoaXMuZGF0ZSkpIHsKICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLm1pbkRhdGUuY2xvbmUoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTW9yZSh0aGlzLmRhdGUpKSB7CiAgICAgICAgdGhpcy5kYXRlID0gdGhpcy5tYXhEYXRlLmNsb25lKCk7CiAgICAgIH0KCiAgICAgIGlmICghcGF5bG9hZElzQXJyYXkpIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFt0aGlzLmRhdGUuY2xvbmUoKV07CiAgICAgIHRoaXMudGltZSA9IHRoaXMuZGF0ZS5jbG9uZSgpOwoKICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnICYmIHRoaXMudmFsdWUgIT09IG51bGwgJiYgdGhpcy52YWx1ZS5sZW5ndGgpIHsKICAgICAgICB0aGlzLm91dHB1dCA9IGNsb25lRGF0ZXModGhpcy5zZWxlY3RlZERhdGVzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm91dHB1dCA9IFtdOyAvLyB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgIH0KICAgIH0sCiAgICBnb1RvZGF5OiBmdW5jdGlvbiBnb1RvZGF5KCkgewogICAgICB2YXIgbm93ID0gdGhpcy5jb3JlLm1vbWVudCgpOwogICAgICBpZiAoIXRoaXMuaGFzU3RlcCgndCcpKSBub3cuc2V0KHsKICAgICAgICBob3VyOiAwLAogICAgICAgIG1pbnV0ZTogMCwKICAgICAgICBzZWNvbmQ6IDAKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0ZSA9IG5vdy5jbG9uZSgpOwogICAgICB0aGlzLnRpbWUgPSBub3cuY2xvbmUoKTsKICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW25vdy5jbG9uZSgpXTsKICAgIH0sCiAgICBzZXRUeXBlOiBmdW5jdGlvbiBzZXRUeXBlKCkgewogICAgICBzd2l0Y2ggKHRoaXMudHlwZSkgewogICAgICAgIGNhc2UgJ2RhdGUnOgogICAgICAgICAgdGhpcy5zdGVwcyA9IFsneScsICdtJywgJ2QnXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCdkJyk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOgogICAgICAgICAgdGhpcy5zdGVwcyA9IFsneScsICdtJywgJ2QnLCAndCddOwogICAgICAgICAgdGhpcy5nb1N0ZXAoJ2QnKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICd5ZWFyJzoKICAgICAgICAgIHRoaXMuc3RlcHMgPSBbJ3knXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCd5Jyk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnbW9udGgnOgogICAgICAgICAgdGhpcy5zdGVwcyA9IFsnbSddOwogICAgICAgICAgdGhpcy5nb1N0ZXAoJ20nKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICd0aW1lJzoKICAgICAgICAgIHRoaXMuc3RlcHMgPSBbJ3QnXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCd0Jyk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAneWVhci1tb250aCc6CiAgICAgICAgICB0aGlzLnN0ZXBzID0gWyd5JywgJ20nXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCd5Jyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHNldFZpZXc6IGZ1bmN0aW9uIHNldFZpZXcoKSB7CiAgICAgIHZhciBzID0gdGhpcy5zaG9ydENvZGVzW3RoaXMudmlld107CiAgICAgIGlmICh0aGlzLmhhc1N0ZXAocykpIHRoaXMuZ29TdGVwKHMpOwogICAgfSwKICAgIHNldERpcmVjdGlvbjogZnVuY3Rpb24gc2V0RGlyZWN0aW9uKHByb3AsIHZhbCwgb2xkKSB7CiAgICAgIHRoaXNbcHJvcF0gPSB2YWwgPiBvbGQgPyAnZGlyZWN0aW9uLW5leHQnIDogJ2RpcmVjdGlvbi1wcmV2JzsKICAgIH0sCiAgICBzZXRNaW5NYXg6IGZ1bmN0aW9uIHNldE1pbk1heCgpIHsKICAgICAgdmFyIG1pbiA9IHRoaXMuZ2V0TW9tZW50KHRoaXMubWluKTsKICAgICAgdmFyIG1heCA9IHRoaXMuZ2V0TW9tZW50KHRoaXMubWF4KTsKICAgICAgdGhpcy5taW5EYXRlID0gdGhpcy5taW4gJiYgbWluLmlzVmFsaWQoKSA/IG1pbiA6IGZhbHNlOwogICAgICB0aGlzLm1heERhdGUgPSB0aGlzLm1heCAmJiBtYXguaXNWYWxpZCgpID8gbWF4IDogZmFsc2U7CiAgICB9LAogICAgZ2V0TW9tZW50OiBmdW5jdGlvbiBnZXRNb21lbnQoZGF0ZSkgewogICAgICB2YXIgZDsKICAgICAgdmFyIG1vbWVudCA9IHRoaXMuY29yZS5tb21lbnQ7CiAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIG1vbWVudChkYXRlKTsKCiAgICAgIGlmICh0aGlzLnNlbGZJbnB1dEZvcm1hdCA9PT0gJ3gnIHx8IHRoaXMuc2VsZklucHV0Rm9ybWF0ID09PSAndW5peCcpIHsKICAgICAgICBkID0gbW9tZW50KGRhdGUudG9TdHJpbmcoKS5sZW5ndGggPT09IDEwID8gZGF0ZSAqIDEwMDAgOiBkYXRlICogMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChkYXRlKSB7CiAgICAgICAgICAgIHZhciBhID0gbW9tZW50KGRhdGUsIHRoaXMuc2VsZklucHV0Rm9ybWF0KTsKICAgICAgICAgICAgdmFyIGIgPSBtb21lbnQoZGF0ZSwgdGhpcy5zZWxmRm9ybWF0KTsKICAgICAgICAgICAgdmFyIG5vdyA9IG1vbWVudCgpOwogICAgICAgICAgICB2YXIgeWVhciA9IG5vdy54WWVhcigpOwoKICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ21vbnRoJykgewogICAgICAgICAgICAgIGEueFllYXIoeWVhcik7CiAgICAgICAgICAgICAgYi54WWVhcih5ZWFyKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICd0aW1lJykgewogICAgICAgICAgICAgIGEgPSBub3cuY2xvbmUoKS5zZXQoewogICAgICAgICAgICAgICAgaDogYS5ob3VyKCksCiAgICAgICAgICAgICAgICBtOiBhLm1pbnV0ZSgpLAogICAgICAgICAgICAgICAgczogMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGIgPSBhLmNsb25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChhLnllYXIoKSAhPT0gYi55ZWFyKCkgJiYgYS55ZWFyKCkgPCAxOTAwKSB7CiAgICAgICAgICAgICAgZCA9IGIuY2xvbmUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkID0gYS5jbG9uZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkID0gbW9tZW50KCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXIpIHsKICAgICAgICAgIGQgPSBtb21lbnQoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBkOwogICAgfSwKICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cyhlKSB7CiAgICAgIGlmICh0aGlzLmVkaXRhYmxlKSB7CiAgICAgICAgaWYgKHRoaXMuJHJlZnMuaW5wdXQpIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGUudGFyZ2V0LmJsdXIoKTsKICAgICAgICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBoYXNTdGVwOiBmdW5jdGlvbiBoYXNTdGVwKHN0ZXApIHsKICAgICAgcmV0dXJuIHRoaXMuc3RlcHMuaW5kZXhPZihzdGVwKSAhPT0gLTE7CiAgICB9LAogICAgc2V0T3V0cHV0OiBmdW5jdGlvbiBzZXRPdXRwdXQoZSkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZWRpdGFibGUpIHJldHVybjsKICAgICAgdmFyIHZhbHVlID0gZS50YXJnZXQudmFsdWUuc3BsaXQoJ34nKTsKICAgICAgdmFyIG91dHB1dCA9IHZhbHVlLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0gPSAiIi5jb25jYXQoaXRlbSkucmVwbGFjZSgvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csICcnKTsKICAgICAgICBpZiAoaXRlbSA9PT0gJycpIHJldHVybiBudWxsOwoKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGRhdGUgPSBfdGhpczE0LmNvcmUubW9tZW50KGl0ZW0sIF90aGlzMTQuc2VsZkRpc3BsYXlGb3JtYXQpOwoKICAgICAgICAgIHJldHVybiBkYXRlLmlzVmFsaWQoKSA/IGRhdGUgOiBudWxsOwogICAgICAgIH0gY2F0Y2ggKGVyKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLm91dHB1dCA9IG91dHB1dC5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZDsKICAgICAgfSk7CiAgICAgIHRoaXMub3V0cHV0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMub3V0cHV0Lmxlbmd0aCkgewogICAgICAgIHRoaXMudXBkYXRlRGF0ZXMoY2xvbmVEYXRlcyh0aGlzLm91dHB1dCkpOwogICAgICAgIHRoaXMuc3VibWl0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5pc0RhdGFBcnJheSA/IFtdIDogbnVsbCk7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5pc0RhdGFBcnJheSA/IFtdIDogbnVsbCk7CiAgICAgIH0KICAgIH0sCiAgICB3cmFwcGVyQ2xpY2s6IGZ1bmN0aW9uIHdyYXBwZXJDbGljaygpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CgogICAgICBpZiAodGhpcy53cmFwcGVyU3VibWl0ICYmIHRoaXMuY2FuU3VibWl0KSB7CiAgICAgICAgdGhpcy5zdWJtaXQoKTsKICAgICAgfQogICAgfSwKICAgIGFwcGx5RGV2Rm46IGZ1bmN0aW9uIGFwcGx5RGV2Rm4oZm4sIGspIHsKICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlOwogICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDIpOwoKICAgICAgdHJ5IHsKICAgICAgICBhcmdzLnB1c2goewogICAgICAgICAgeTogJ3llYXInLAogICAgICAgICAgbTogJ21vbnRoJywKICAgICAgICAgIGQ6ICdkYXknLAogICAgICAgICAgdDogJ3RpbWUnCiAgICAgICAgfVtrXSk7CiAgICAgICAgcmVzdWx0ID0gZm4uYXBwbHkobnVsbCwgYXJncyk7CiAgICAgIH0gY2F0Y2ggKGVyKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgY29uc29sZS5lcnJvcihlcik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgY2hlY2tEaXNhYmxlOiBmdW5jdGlvbiBjaGVja0Rpc2FibGUoaXRlbSwgdmFsdWUpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgdmFyIHRoaXNEaXNhYmxlID0gdGhpcy5kaXNhYmxlOwogICAgICBpZiAoIXRoaXNEaXNhYmxlKSByZXR1cm4gZmFsc2U7CgogICAgICB2YXIgdHlwZSA9IF90eXBlb2YodGhpc0Rpc2FibGUpOwoKICAgICAgdmFyIGNoZWNrU3RyaW5nID0gZnVuY3Rpb24gY2hlY2tTdHJpbmcoZmlsdGVyLCBzdHIsIGRhdGUpIHsKICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgUmVnRXhwKSByZXR1cm4gZmlsdGVyLnRlc3Qoc3RyKTsKICAgICAgICBpZiAoZmlsdGVyID09PSBzdHIpIHJldHVybiB0cnVlOwoKICAgICAgICBpZiAoaXRlbSA9PT0gJ2QnKSB7CiAgICAgICAgICB2YXIgbGVuZ3RoID0gZmlsdGVyLmxlbmd0aDsKICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGxlbmd0aCkgPT09IGZpbHRlciB8fCBkYXRlLmNsb25lKCkubG9jYWxlKCdlbicpLmZvcm1hdCgnZGRkZCcpID09PSBmaWx0ZXI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CgogICAgICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhkYXRlLCBkYXRlRm9ybWF0dGVkKSB7CiAgICAgICAgdmFyIG1hdGNoZXMgPSBmYWxzZTsKCiAgICAgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHJldHVybiBfdGhpczE1LmFwcGx5RGV2Rm4odGhpc0Rpc2FibGUsIGl0ZW0sIGRhdGVGb3JtYXR0ZWQsIGRhdGUuY2xvbmUoKSk7CiAgICAgICAgfSBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpc0Rpc2FibGUpID09PSAnW29iamVjdCBBcnJheV0nKSB7CiAgICAgICAgICB2YXIgaWkgPSB0aGlzRGlzYWJsZS5sZW5ndGg7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpaTsgaSsrKSB7CiAgICAgICAgICAgIG1hdGNoZXMgPSBjaGVja1N0cmluZyh0aGlzRGlzYWJsZVtpXSwgZGF0ZUZvcm1hdHRlZCwgZGF0ZSk7CiAgICAgICAgICAgIGlmIChtYXRjaGVzKSBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gbWF0Y2hlczsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnIHx8IHRoaXNEaXNhYmxlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICByZXR1cm4gY2hlY2tTdHJpbmcodGhpc0Rpc2FibGUsIGRhdGVGb3JtYXR0ZWQsIGRhdGUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9OwoKICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuc2VsZkZvcm1hdDsKCiAgICAgIGlmIChpdGVtID09PSAneScpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMuY29yZS5tb21lbnQodmFsdWUsICdqWVlZWScpOwogICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09ICdkJykgewogICAgICAgIC8vIHJlbW92ZSB0aW1lIGZyb20gZm9ybWF0CiAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoLyhIKEg/KSl8KGgoaD8pKT8oOj8pbShtPykoOj8pKHMocz8pKT8vZywgJycpOwogICAgICB9CgogICAgICByZXR1cm4gY2hlY2sodmFsdWUsIHZhbHVlLmZvcm1hdChmb3JtYXQpKTsKICAgIH0sCiAgICBnZXRIaWdobGlnaHRzOiBmdW5jdGlvbiBnZXRIaWdobGlnaHRzKGl0ZW0sIHZhbHVlKSB7CiAgICAgIHZhciBoaWdobGlnaHQgPSB0aGlzLmhpZ2hsaWdodDsKICAgICAgaWYgKCFoaWdobGlnaHQgfHwgdHlwZW9mIGhpZ2hsaWdodCAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHt9OwogICAgICBpZiAoaXRlbSA9PT0gJ3knKSB2YWx1ZSA9IHRoaXMuY29yZS5tb21lbnQodmFsdWUsICdqWVlZWScpOwogICAgICByZXR1cm4gdGhpcy5hcHBseURldkZuKGhpZ2hsaWdodCwgaXRlbSwgdmFsdWUuZm9ybWF0KHRoaXMuc2VsZkZvcm1hdCksIHZhbHVlLmNsb25lKCkpIHx8IHt9OwogICAgfSwKICAgIGlzTG93ZXI6IGZ1bmN0aW9uIGlzTG93ZXIoZGF0ZSkgewogICAgICByZXR1cm4gdGhpcy5taW5EYXRlICYmIGRhdGUgPCB0aGlzLm1pbkRhdGU7CiAgICB9LAogICAgaXNNb3JlOiBmdW5jdGlvbiBpc01vcmUoZGF0ZSkgewogICAgICByZXR1cm4gdGhpcy5tYXhEYXRlICYmIGRhdGUgPiB0aGlzLm1heERhdGU7CiAgICB9LAogICAgY2xlYXJWYWx1ZTogZnVuY3Rpb24gY2xlYXJWYWx1ZSgpIHsKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjsKICAgICAgdGhpcy5vdXRwdXQgPSBbXTsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmlzRGF0YUFycmF5ID8gW10gOiAnJyk7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMuaXNEYXRhQXJyYXkgPyBbXSA6IG51bGwpOwogICAgfSwKICAgIHNldExvY2FsZTogZnVuY3Rpb24gc2V0TG9jYWxlKGxvY2FsZSkgewogICAgICB0aGlzLmNvcmUuY2hhbmdlTG9jYWxlKGxvY2FsZSwgdGhpcy5sb2NhbGVDb25maWcpOwogICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGUuY2xvbmUoKTsKICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gdGhpcy5zZWxlY3RlZERhdGVzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmNsb25lKCk7CiAgICAgIH0pOyAvLyB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICB9LAogICAgc2V0VGltZXpvbmU6IGZ1bmN0aW9uIHNldFRpbWV6b25lKGRhdGUsIG1vZGUpIHsKICAgICAgdmFyIHR6ID0gdGhpcy50aW1lem9uZTsKCiAgICAgIGlmICh0eikgewogICAgICAgIHZhciByID0gbW9kZSA9PT0gJ2luJyA/IDEgOiAtMTsKICAgICAgICB2YXIgbW9tZW50ID0gdGhpcy5jb3JlLm1vbWVudDsKCiAgICAgICAgaWYgKHR5cGVvZiB0eiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHZhciB0ID0gbW9tZW50KCkudXRjKCkuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzJykgKyB0ejsKICAgICAgICAgIGRhdGUuYWRkKG1vbWVudC5wYXJzZVpvbmUodCkudXRjT2Zmc2V0KCkgKiByLCAnbWludXRlcycpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHR6ID09PSAnYm9vbGVhbicgJiYgdHopIHsKICAgICAgICAgIGRhdGUuc3VidHJhY3QobmV3IERhdGUoZGF0ZSkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIHIsICdtaW51dGVzJyk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdHogPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGRhdGUgPSB0eihkYXRlLCBtb2RlLCB0aGlzKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBkYXRlLmNsb25lKCk7CiAgICB9LAogICAgY29udmVydFRvTG9jYWxlTnVtYmVyOiBmdW5jdGlvbiBjb252ZXJ0VG9Mb2NhbGVOdW1iZXIodmFsdWUpIHsKICAgICAgaWYgKHRoaXMuY29udmVydE51bWJlcnMgJiYgdGhpcy5sb2NhbGUgPT09ICdmYScpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KHZhbHVlKS5yZXBsYWNlKC9cZCsvZywgZnVuY3Rpb24gKGRpZ2l0KSB7CiAgICAgICAgICB2YXIgcmV0ID0gJyc7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRpZ2l0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRpZ2l0LmNoYXJDb2RlQXQoaSkgKyAxNzI4KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAogICAgb25XaW5kb3dSZXNpemU6IGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkgewogICAgICB0aGlzLndpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICB9LAogICAgb25XaW5kb3dDbGljazogZnVuY3Rpb24gb25XaW5kb3dDbGljayhldmVudCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pc1BvcG92ZXIgJiYgdGhpcy4kcmVmcy5waWNrZXIgJiYgdGhpcy4kcmVmcy5pbnB1dEdyb3VwKSB7CiAgICAgICAgdmFyIGlzT25QaWNrZXIgPSB0aGlzLiRyZWZzLnBpY2tlci5jb250YWlucyhldmVudC50YXJnZXQpOwogICAgICAgIHZhciBpc09uSW5wdXQgPSB0aGlzLiRyZWZzLmlucHV0R3JvdXAuY29udGFpbnMoZXZlbnQudGFyZ2V0KTsKICAgICAgICBpZiAoaXNPblBpY2tlcikgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgaWYgKCFpc09uUGlja2VyICYmICFpc09uSW5wdXQpIHsKICAgICAgICAgIC8vIHNldFRpbWVvdXQgYmVjYXVzZToKICAgICAgICAgIC8vIGZpcnN0IHJlYWQgdGhlIGlucHV0IHZhbHVlCiAgICAgICAgICAvLyB0aGVuIHByb2Nlc3MgdGhlIG91dHB1dAogICAgICAgICAgLy8gdGhlbiBjbG9zZSB0aGUgcGlja2VyCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgfSwgdGhpcy5lZGl0YWJsZSA/IDUwMCA6IDApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldFBsYWNlbWVudDogZnVuY3Rpb24gc2V0UGxhY2VtZW50KCkgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaXNQb3BvdmVyKSByZXR1cm47CiAgICAgIHZhciBhbGxvd2VkID0gWyd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLCAnYm90dG9tLXJpZ2h0JywgJ2JvdHRvbS1sZWZ0JywgJ2xlZnQtdG9wJywgJ2xlZnQtYm90dG9tJywgJ3JpZ2h0LXRvcCcsICdyaWdodC1ib3R0b20nXTsKCiAgICAgIGlmIChhbGxvd2VkLmluZGV4T2YodGhpcy5wb3BvdmVyKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gdGhpcy5wb3BvdmVyUGxhY2UgPSB0aGlzLnBvcG92ZXI7CiAgICAgIH0KCiAgICAgIHRoaXMucG9wb3ZlclBsYWNlID0gJ2JvdHRvbS1yaWdodCc7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGxhY2VtZW50ID0gWydib3R0b20nLCAncmlnaHQnXTsKICAgICAgICB2YXIgY29udGFpbmVyID0gX3RoaXMxNy4kcmVmcy5jb250YWluZXI7CiAgICAgICAgdmFyIHJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgdmFyIGxlZnQgPSByZWN0LmxlZnQ7CiAgICAgICAgdmFyIGJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHJlY3QuYm90dG9tOwogICAgICAgIGlmIChib3R0b20gPD0gMCkgcGxhY2VtZW50WzBdID0gJ3RvcCc7CiAgICAgICAgaWYgKGxlZnQgPD0gMCkgcGxhY2VtZW50WzFdID0gJ2xlZnQnOwogICAgICAgIF90aGlzMTcucG9wb3ZlclBsYWNlID0gcGxhY2VtZW50LmpvaW4oJy0nKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgb3B0aW9ucykgewogICAgdmFyIGNvbXBvbmVudCA9IHRoaXM7CiAgICBvcHRpb25zID0gVnVlLnV0aWwuZXh0ZW5kKHsKICAgICAgbmFtZTogJ2RhdGEtcGlja2VyJywKICAgICAgcHJvcHM6IHt9CiAgICB9LCBvcHRpb25zKTsKCiAgICBmb3IgKHZhciBrIGluIG9wdGlvbnMucHJvcHMpIHsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb21wb25lbnQucHJvcHMsIGspKSB7CiAgICAgICAgY29tcG9uZW50LnByb3BzW2tdLmRlZmF1bHQgPSBvcHRpb25zLnByb3BzW2tdOwogICAgICB9CiAgICB9CgogICAgVnVlLmNvbXBvbmVudChvcHRpb25zLm5hbWUsIGNvbXBvbmVudCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <span\n    class=\"vpd-main\"\n    :data-type=\"type\"\n    :data-placement=\"popoverPlace\"\n    :data-locale=\"localeData.name\"\n    :data-locale-dir=\"localeData.config.dir\"\n    :class=\"{ 'vpd-is-popover': isPopover }\"\n  >\n    <span\n      v-if=\"!element\"\n      ref=\"inputGroup\"\n      :class=\"['vpd-input-group', { 'vpd-disabled': disabled }]\"\n    >\n      <label\n        :for=\"id\"\n        class=\"vpd-icon-btn\"\n        :style=\"{ 'background-color': color }\"\n        @click.prevent.stop=\"visible = !visible\"\n      >\n        <slot name=\"label\">\n          <time-icon v-if=\"type === 'time'\" width=\"16px\" height=\"16px\" />\n          <calendar-icon v-else width=\"16px\" height=\"16px\" />\n          <span v-if=\"label\" v-text=\"label\" />\n        </slot>\n      </label>\n      <input\n        :id=\"id\"\n        ref=\"input\"\n        type=\"text\"\n        :name=\"name\"\n        :class=\"[inputClass, { 'vpd-is-editable': editable }]\"\n        :placeholder=\"placeholder\"\n        :value=\"displayValue\"\n        :disabled=\"disabled\"\n        @focus=\"focus\"\n        @blur=\"setOutput\"\n        @keydown.enter=\"setOutput\"\n      />\n      <input\n        v-if=\"altName\"\n        type=\"hidden\"\n        :name=\"altName\"\n        :value=\"altFormatted\"\n      />\n      <i\n        v-if=\"clearable && !disabled && displayValue\"\n        class=\"vpd-clear-btn\"\n        @click=\"clearValue\"\n      >\n        <slot name=\"clear-btn\" v-bind=\"{ vm }\">x</slot>\n      </i>\n    </span>\n\n    <input\n      v-else-if=\"altName\"\n      type=\"hidden\"\n      :name=\"altName\"\n      :value=\"altFormatted\"\n    />\n\n    <transition :name=\"isPopover ? '' : 'vpd-fade-scale'\">\n      <div\n        v-if=\"visible\"\n        ref=\"picker\"\n        :class=\"[\n          'vpd-wrapper',\n          `vpd-dir-${localeData.config.dir}`,\n          {\n            'vpd-is-range': range,\n            'vpd-is-inline': inline,\n            'vpd-is-multiple': multiple,\n            'vpd-compact-time': compactTime,\n            'vpd-no-footer': autoSubmit && !hasStep('t')\n          }\n        ]\"\n        :data-type=\"type\"\n        @click.self=\"wrapperClick\"\n      >\n        <div ref=\"container\" class=\"vpd-container\">\n          <div class=\"vpd-content\">\n            <div class=\"vpd-header\" :style=\"{ 'background-color': color }\">\n              <div\n                v-if=\"['date', 'datetime', 'year-month'].indexOf(type) !== -1\"\n                :class=\"['vpd-year-label', directionClass]\"\n                @click=\"goStep('y')\"\n              >\n                <transition name=\"slideY\">\n                  <span :key=\"selectedDate.xYear()\">\n                    <slot name=\"header-year\" v-bind=\"{ vm, selectedDate }\">\n                      {{ convertToLocaleNumber(selectedDate.xYear()) }}\n                    </slot>\n                  </span>\n                </transition>\n              </div>\n              <div\n                v-if=\"type !== 'year-month'\"\n                :class=\"['vpd-date', directionClass]\"\n              >\n                <transition name=\"slideY\">\n                  <span :key=\"formattedDate\">\n                    <slot name=\"header-date\" v-bind=\"{ vm, formattedDate }\">\n                      {{ convertToLocaleNumber(formattedDate) }}\n                    </slot>\n                  </span>\n                </transition>\n              </div>\n              <slot\n                v-if=\"locales.length > 1\"\n                name=\"locales\"\n                v-bind=\"{ vm, locales, setLocale }\"\n              >\n                <locale-change\n                  :locale-data=\"localeData\"\n                  :core=\"core\"\n                  :locales=\"locales\"\n                  class=\"vpd-locales\"\n                  @change=\"setLocale\"\n                />\n              </slot>\n            </div>\n            <div class=\"vpd-body\">\n              <template v-if=\"hasStep('d')\">\n                <div :class=\"['vpd-controls', directionClassDate]\">\n                  <button\n                    type=\"button\"\n                    class=\"vpd-next\"\n                    :title=\"lang.nextMonth\"\n                    :disabled=\"nextMonthDisabled\"\n                    @click=\"nextMonth\"\n                  >\n                    <arrow\n                      width=\"10\"\n                      fill=\"#000\"\n                      direction=\"right\"\n                      style=\"vertical-align: middle\"\n                    />\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"vpd-prev\"\n                    :title=\"lang.prevMonth\"\n                    :disabled=\"prevMonthDisabled\"\n                    @click=\"prevMonth\"\n                  >\n                    <arrow\n                      width=\"10\"\n                      fill=\"#000\"\n                      direction=\"left\"\n                      style=\"vertical-align: middle\"\n                    />\n                  </button>\n                  <transition name=\"slideX\">\n                    <div\n                      :key=\"date.xMonth()\"\n                      class=\"vpd-month-label\"\n                      @click=\"goStep('m')\"\n                    >\n                      <slot name=\"month-name\" v-bind=\"{ vm, date, color }\">\n                        <span\n                          :style=\"{ 'border-color': color, color }\"\n                          v-text=\"\n                            convertToLocaleNumber(date.xFormat('jMMMM jYYYY'))\n                          \"\n                        />\n                      </slot>\n                    </div>\n                  </transition>\n                </div>\n                <div\n                  class=\"vpd-clearfix\"\n                  :class=\"['vpd-month', directionClassDate]\"\n                >\n                  <div class=\"vpd-clearfix vpd-week\">\n                    <div\n                      v-for=\"(day, i) in weekDays\"\n                      :key=\"`${i}-${day}`\"\n                      class=\"vpd-weekday\"\n                    >\n                      <slot name=\"weekday\" v-bind=\"{ vm, day }\">\n                        {{ day }}\n                      </slot>\n                    </div>\n                  </div>\n                  <div\n                    class=\"vpd-days\"\n                    :style=\"{ height: month.length * 40 + 'px' }\"\n                    @mouseleave=\"hoveredItem = null\"\n                  >\n                    <transition name=\"slideX\" :class=\"directionClassDate\">\n                      <div :key=\"date.xMonth()\">\n                        <div\n                          v-for=\"(m, mi) in monthDays\"\n                          :key=\"mi\"\n                          class=\"vpd-clearfix\"\n                        >\n                          <div\n                            v-for=\"(day, di) in m\"\n                            :key=\"di\"\n                            :class=\"[\n                              'vpd-day',\n                              {\n                                'vpd-selected': day.selected,\n                                'vpd-empty': day.date == null,\n                                'vpd-range-first': day.isFirst,\n                                'vpd-range-last': day.isLast,\n                                'vpd-range-between': day.isBetween,\n                                'vpd-range-hover': hoveredItem && day.isHover\n                              },\n                              day.attributes.class\n                            ]\"\n                            v-bind=\"day.attributes\"\n                            :disabled=\"day.disabled\"\n                            @click=\"selectDay(day)\"\n                            @mouseover=\"hoveredItem = day.date\"\n                          >\n                            <template v-if=\"day.date != null\">\n                              <slot name=\"day-item\" v-bind=\"{ vm, day, color }\">\n                                <span\n                                  class=\"vpd-day-effect\"\n                                  :style=\"{ 'background-color': color }\"\n                                />\n                                <span\n                                  class=\"vpd-day-text\"\n                                  v-text=\"convertToLocaleNumber(day.formatted)\"\n                                />\n                              </slot>\n                            </template>\n                          </div>\n                        </div>\n                      </div>\n                    </transition>\n                  </div>\n                </div>\n              </template>\n\n              <div v-else style=\"height:250px\" />\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('y')\"\n                  v-show=\"currentStep === 'y'\"\n                  ref=\"year\"\n                  :class=\"[\n                    'vpd-addon-list',\n                    { 'vpd-can-close': steps.length > 1 }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div\n                      v-for=\"(year, yi) in years\"\n                      :key=\"yi\"\n                      v-bind=\"year.attributes\"\n                      :class=\"[\n                        'vpd-addon-list-item',\n                        { 'vpd-selected': year.selected },\n                        year.attributes.class\n                      ]\"\n                      :style=\"[\n                        { color: year.selected ? color : '' },\n                        year.attributes.style\n                      ]\"\n                      :disabled=\"year.disabled\"\n                      @click=\"selectYear(year)\"\n                    >\n                      <slot name=\"year-item\" v-bind=\"{ vm, year, color }\">\n                        {{ convertToLocaleNumber(year.xFormat('jYYYY')) }}\n                      </slot>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('m')\"\n                  v-show=\"currentStep === 'm'\"\n                  ref=\"month\"\n                  :class=\"[\n                    'vpd-addon-list vpd-month-list',\n                    { 'vpd-can-close': steps.length > 1 }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div\n                      v-for=\"(monthItem, mi) in months\"\n                      :key=\"mi\"\n                      v-bind=\"monthItem.attributes\"\n                      :class=\"[\n                        'vpd-addon-list-item',\n                        { 'vpd-selected': monthItem.selected },\n                        monthItem.attributes.class\n                      ]\"\n                      :disabled=\"monthItem.disabled\"\n                      :style=\"[\n                        { color: monthItem.selected ? color : '' },\n                        monthItem.attributes.style\n                      ]\"\n                      @click=\"selectMonth(monthItem)\"\n                    >\n                      <slot name=\"month-item\" v-bind=\"{ vm, monthItem, color }\">\n                        {{ monthItem.xFormat('jMMMM') }}\n                      </slot>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('t')\"\n                  v-show=\"currentStep === 't'\"\n                  ref=\"time\"\n                  :class=\"[\n                    'vpd-addon-list vpd-time',\n                    { 'vpd-disabled': isDisableTime }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div :class=\"['vpd-time-h', classFastCounter]\">\n                      <btn\n                        class=\"vpd-up-arrow-btn\"\n                        @update=\"setTime(1, 'h')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"up\" />\n                      </btn>\n                      <div\n                        class=\"vpd-counter\"\n                        :class=\"directionClassTime\"\n                        @mousewheel.stop.prevent=\"wheelSetTime('h', $event)\"\n                      >\n                        <div\n                          v-for=\"(item, i) in time.format('HH').split('')\"\n                          :key=\"`h__${i}`\"\n                          class=\"vpd-counter-item\"\n                          v-bind=\"timeAttributes\"\n                        >\n                          <transition name=\"slideY\">\n                            <span\n                              :key=\"`${item}__${i}_h`\"\n                              :style=\"{\n                                transition:\n                                  'all ' +\n                                  timeData.transitionSpeed +\n                                  'ms ease-in-out'\n                              }\"\n                              v-text=\"convertToLocaleNumber(item)\"\n                            />\n                          </transition>\n                        </div>\n                      </div>\n                      <btn\n                        class=\"vpd-down-arrow-btn\"\n                        @update=\"setTime(-1, 'h')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"down\" />\n                      </btn>\n                    </div>\n                    <div :class=\"['vpd-time-m', classFastCounter]\">\n                      <btn\n                        class=\"vpd-up-arrow-btn\"\n                        @update=\"setTime(jumpMinute, 'm')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"up\" />\n                      </btn>\n                      <div\n                        class=\"vpd-counter\"\n                        :class=\"directionClassTime\"\n                        @mousewheel.stop.prevent=\"wheelSetTime('m', $event)\"\n                      >\n                        <div\n                          v-for=\"(item, i) in time.format('mm').split('')\"\n                          :key=\"`m__${i}`\"\n                          class=\"vpd-counter-item\"\n                          v-bind=\"timeAttributes\"\n                        >\n                          <transition name=\"slideY\">\n                            <span\n                              :key=\"`${item}__${i}_m`\"\n                              :style=\"{\n                                transition:\n                                  'all ' +\n                                  timeData.transitionSpeed +\n                                  'ms ease-in-out'\n                              }\"\n                              v-text=\"convertToLocaleNumber(item)\"\n                            />\n                          </transition>\n                        </div>\n                      </div>\n                      <btn\n                        class=\"vpd-down-arrow-btn\"\n                        @update=\"setTime(-jumpMinute, 'm')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"down\" />\n                      </btn>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <span\n                  v-if=\"steps.length > 1 && currentStep !== 'd' && hasStep('d')\"\n                  class=\"vpd-close-addon\"\n                  @click=\"goStep('d')\"\n                >\n                  <slot name=\"close-btn\" v-bind=\"{ vm }\">x</slot>\n                </span>\n              </transition>\n\n              <br v-if=\"autoSubmit && !hasStep('t')\" />\n\n              <div v-else class=\"vpd-actions\">\n                <slot\n                  name=\"submit-btn\"\n                  v-bind=\"{ vm, canSubmit, color, submit, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :disabled=\"!canSubmit\"\n                    :style=\"{ color }\"\n                    @click=\"submit\"\n                    v-text=\"lang.submit\"\n                  />\n                </slot>\n\n                <slot\n                  v-if=\"!inline\"\n                  name=\"cancel-btn\"\n                  v-bind=\"{ vm, color, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :style=\"{ color }\"\n                    @click=\"visible = false\"\n                    v-text=\"lang.cancel\"\n                  />\n                </slot>\n\n                <slot\n                  v-if=\"showNowBtn && canGoToday\"\n                  name=\"now-btn\"\n                  v-bind=\"{ vm, color, goToday, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :style=\"{ color }\"\n                    @click=\"goToday\"\n                    v-text=\"lang.now\"\n                  />\n                </slot>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </span>\n</template>\n\n<script>\n\nimport Arrow from '././components/Arrow.vue'\nimport Btn from '././components/Btn.vue'\nimport CalendarIcon from './components/CalendarIcon.vue'\nimport TimeIcon from '././components/TimeIcon.vue'\nimport CoreModule from './modules/core'\nimport LocaleChange from '././components/LocaleChange'\nimport { cloneDates, isSameDay } from './modules/utils'\n\nexport default {\n  components: { LocaleChange, Arrow, Btn, CalendarIcon, TimeIcon },\n  model: {\n    prop: 'value',\n    event: 'input'\n  },\n  props: {\n    /**\n     * Default input value\n     * @type Number String\n     * @default []\n     * @example 1396/08/01 22:45 | 2017/07/07 20:45 | {unix} | 20:45\n     */\n    value: { type: [Number, String, Date, Array], default: '' },\n\n    /**\n     * Initial value of picker (if value is empty)\n     * @type Number String\n     * @default []\n     * @example 1370/01/01 22:45 | 2017/01/01 20:45 | {unix} | 20:45\n     * @version 1.0.9\n     */\n    initialValue: { type: [Number, String], default: '' },\n\n    /**\n     * Format for {value}\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | unix | HH:mm\n     * @if empty {inputFormat} = {format}\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    inputFormat: { type: String, default: '' },\n\n    /**\n     * Format only to display the date in the field\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | unix | HH:mm\n     * @if empty {displayFormat} = {format}\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    displayFormat: { type: String, default: '' },\n\n    /**\n     * Format for output value\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | date | HH:mm\n     * @if empty, it will be built according to the type of picker:\n     *\n     * --- time:     HH:mm\n     * --- datetime: jYYYY/jMM/jDD HH:mm\n     * --- date:     jYYYY/jMM/jDD\n     * --- year:     jYYYY\n     * --- month:    jMM\n     *\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    format: { type: String, default: '' },\n\n    /**\n     * Step to view on startup\n     * @type String\n     * @default \"day\"\n     * @supported day | month | year | time\n     * @example year\n     * @desc {year} will show the \"year\" panel at first\n     */\n    view: { type: String, default: 'day' },\n\n    /**\n     * The picker type\n     * @type String\n     * @default \"date\"\n     * @supported date | datetime | year | month | time\n     */\n    type: { type: String, default: 'date' },\n\n    /**\n     * The minimum of selectable period\n     * Based on {inputFormat}\n     * @type String\n     * @default Null\n     * @example 1396/08/01 22:45 | 22:45\n     */\n    min: { type: [String], default: '' },\n\n    /**\n     * The maximum of selectable period\n     * Based on {inputFormat}\n     * @type String\n     * @default Null\n     * @example 1396/08/01 22:45 | 22:45\n     */\n    max: { type: [String], default: '' },\n\n    /**\n     * Editable input or just readonly\n     * @type Boolean\n     * @default False\n     * @if false, the picker will shown on input focus\n     * @if true, the picker will shown on label click\n     * @note if use <... :editable=\"true\"> with <... :element=\"...\">\n     *     then you have to control the <... :show=\"true or false\">\n     */\n    editable: { type: Boolean, default: false },\n\n    /**\n     * The specified input element ID\n     * @type String\n     * @default Undefined\n     * @desc Sometimes you don't want to use picker default input,\n     * so you can use our own input element with \"id\" attribute\n     * and use <... element=\"the_id_of_input\">\n     */\n    element: { type: String, default: undefined },\n\n    /**\n     * The form input name when not using {element}\n     * @type String\n     * @default Undefined\n     */\n    name: { type: String, default: undefined },\n\n    /**\n     * The form input className when not using {element}\n     * @type String\n     * @default \"form-control\"\n     */\n    inputClass: { type: String, default: 'form-control' },\n\n    /**\n     * The form input placeholder when not using {element}\n     * @type String\n     * @default Null\n     */\n    placeholder: { type: String, default: '' },\n\n    /**\n     * The name of hidden input element\n     * @type String\n     * @default Null\n     * @if empty, the hidden input will not be created\n     */\n    altName: { type: String, default: '' },\n\n    /**\n     * Format for hidden input\n     * @type String\n     * @default Null\n     * @example YYYY-MM-DD HH:mm:ss [GMT]ZZ\n     * @if empty, it will be built according to the type of picker:\n     *\n     * --- time:     HH:mm:ss [GMT]ZZ\n     * --- datetime: YYYY-MM-DD HH:mm:ss [GMT]ZZ\n     * --- date:     YYYY-MM-DD\n     * --- year:     YYYY\n     * --- month:    MM\n     */\n    altFormat: { type: String, default: '' },\n\n    /**\n     * Show or hide the picker\n     * @type Boolean\n     * @default False\n     */\n    show: { type: Boolean, default: false },\n\n    /**\n     * Primary color of picker\n     * @type String\n     */\n    color: { type: String, default: '#417df4' },\n\n    /**\n     * Auto submit and hide picker when date selected\n     * @type Boolean\n     * @default False\n     */\n    autoSubmit: { type: Boolean, default: false },\n\n    /**\n     * Auto submit when clicking the wrapper\n     * @type Boolean\n     * @default false\n     * @version 1.0.6\n     */\n    wrapperSubmit: { type: Boolean, default: false },\n\n    /**\n     * Place to append picker\n     * @type String query selector\n     * @default null\n     * @desc If you want to append picker to another container like 'body',\n     * pass the container as append-to=\"body\",  append-to=\"#app\",  append-to=\"#my-container\"\n     * @example 'body', '.main-container', '#app' ...\n     * @version 1.1.1\n     */\n    appendTo: { type: String, default: null },\n\n    /**\n     * Disable or enable the datepicker\n     * @type Boolean\n     * @default false\n     * @version 1.1.4\n     */\n    disabled: { type: Boolean, default: false },\n\n    /**\n     * Disabling\n     * @type Array, String, Function, RegExp\n     * @default undefined\n     * @desc disable some dates\n     * @example ['1397/02/02', '1390/10/10'] - \"1397/05/20\" - /1397\\/05\\/(.*)/ ...\n     * @version 1.1.4\n     */\n    disable: { type: [Array, String, Function, RegExp], default: undefined },\n\n    /**\n     * Label\n     * @type String\n     * @version 1.1.4\n     */\n    label: { type: String, default: '' },\n\n    /**\n     * Highlight items\n     * @type Function\n     * @desc This prop accepts only function that return an object of attributes.\n     * @version 1.1.5\n     */\n    highlight: { type: Function, default: null },\n\n    /**\n     * Change minutes by step\n     * @type Number\n     * @default 1\n     * @version: 1.1.6\n     */\n    jumpMinute: { type: Number, default: 1 },\n\n    /**\n     * Round minutes when jumpMinute is grater than 1\n     * @example when jumpMinute = 15 thin will result: 13:00, 13:15, 13:30, 13:45 ...\n     * @type Boolean\n     * @default false\n     * @version: 1.1.6\n     */\n    roundMinute: { type: Boolean, default: false },\n\n    /**\n     * Show clear button\n     * @type Boolean\n     * @default false\n     * @version 1.1.6\n     */\n    clearable: { type: Boolean, default: false },\n\n    /**\n     * Inline mode\n     * @type Boolean\n     * @default false\n     * @version 1.1.6\n     */\n    inline: { type: Boolean, default: false },\n\n    /**\n     * Locales config (\"fa\" for jalali and \"en\" for gregorian)\n     * @type String\n     * @default fa\n     * @example fa | en | fa,en | en,fa\n     * @supported fa,en\n     * @version 2.0.0\n     */\n    locale: { type: String, default: 'fa' },\n\n    /**\n     * Locale configuration\n     * @type Object\n     * @default {}\n     * @version 2.0.0\n     * @example\n     * {\n     *  fa: {\n     *      dow: 6,             --first day of week\n     *      dir: 'rtl',         --language direction\n     *      lang: {\n     *           label:     \"\",\n     *           submit:    \"\",\n     *           cancel:    \"\",\n     *           now:       \"\",\n     *           nextMonth: \" \",\n     *           prevMonth: \" \",\n     *      }\n     *  },\n     *  en: { ... }\n     * }\n     */\n    localeConfig: { type: Object, default: () => ({}) },\n\n    /**\n     * Timezone configuration\n     * @type String | Boolean | Function\n     * @default false\n     * @example true | false | +03:30 | +04:30\n     * @version 2.1.0\n     */\n    timezone: { type: [Boolean, String, Function], default: false },\n\n    /**\n     * Show or hide NOW button\n     * @type Boolean\n     * @default true\n     * @version 2.1.6\n     */\n    showNowBtn: { type: Boolean, default: true },\n\n    /**\n     * Convert to locale numbers or not\n     * @type Boolean\n     * @default false\n     * @example <date-picker convert-numbers />\n     * @version 2.3.0\n     */\n    convertNumbers: { type: Boolean, default: false },\n\n    /**\n     * Display the time on the front page\n     * @type Boolean\n     * @default false\n     * @example <date-picker compact-time />\n     * @version 2.4.0\n     */\n    compactTime: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable range mode\n     * @type Boolean\n     * @default false\n     * @example <date-picker range />\n     * @version 2.5.0\n     */\n    range: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable multiple mode\n     * @type Boolean\n     * @default false\n     * @example <date-picker multiple />\n     * @version 2.6.0\n     */\n    multiple: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable popover mode\n     * @type Boolean | String\n     * @accepted:\n     *    true | false\n     *    top-left | top-right | bottom-right | bottom-left\n     *    left-top | left-bottom | right-top | right-bottom\n     * @default false\n     * @example <date-picker popover />\n     * @example <date-picker popover=\"top-left\" />\n     * @version 2.6.0\n     */\n    popover: { type: [Boolean, String], default: false }\n  },\n  data() {\n    const defaultLocale = this.locale.split(',')[0]\n    const coreModule = new CoreModule(defaultLocale, this.localeConfig)\n    return {\n      core: coreModule,\n      now: coreModule.moment(),\n      date: {},\n      selectedDates: [],\n      hoveredItem: null,\n      visible: false,\n      directionClass: '',\n      directionClassDate: '',\n      directionClassTime: '',\n      classFastCounter: '',\n      steps: ['y', 'm', 'd', 't'],\n      step: 0,\n      shortCodes: {\n        year: 'y',\n        month: 'm',\n        day: 'd',\n        time: 't'\n      },\n      time: {},\n      timeData: {\n        transitionSpeed: 300,\n        timeout: false,\n        lastUpdate: new Date().getTime()\n      },\n      minDate: false,\n      maxDate: false,\n      output: [],\n      updateNowInterval: null,\n      locales: ['fa'],\n      localeData: coreModule.locale,\n      windowWidth: window.innerWidth,\n      popoverPlace: 'bottom-right'\n    }\n  },\n  computed: {\n    vm() {\n      return this\n    },\n    id() {\n      return (\n        '_' +\n        Math.random()\n          .toString(36)\n          .substr(2, 9)\n      )\n    },\n    currentStep() {\n      return this.steps[this.step]\n    },\n    selectedDate() {\n      const dates = this.selectedDates\n      return dates.length ? dates[dates.length - 1] : this.date\n    },\n    formattedDate() {\n      let format = ''\n\n      if (this.hasStep('y')) format = 'jYYYY'\n      if (this.hasStep('m')) format += ' jMMMM '\n      if (this.hasStep('d')) {\n        format = this.isDataArray ? 'jD jMMMM jYYYY' : 'ddd jD jMMMM'\n      }\n      if (this.hasStep('t')) format += ' HH:mm '\n\n      if (!format) return ''\n\n      const separator = this.multiple ? ' | ' : ' ~ '\n      return this.selectedDates.map(d => d.xFormat(format)).join(separator)\n    },\n    month() {\n      if (!this.hasStep('d')) return []\n      const min = this.minDate ? this.minDate.clone().startOf('day') : -Infinity\n      const max = this.maxDate ? this.maxDate.clone().endOf('day') : Infinity\n      return this.core.getWeekArray(this.date.clone()).map(weekItem => {\n        return weekItem.map(day => {\n          const data = {\n            date: day,\n            formatted: '',\n            selected: false,\n            disabled: false,\n            attributes: {}\n          }\n          if (!day) return data\n          const dayMoment = this.core.moment(day)\n          data.formatted = dayMoment.xDate()\n          data.selected = this.selectedDates.find(item => isSameDay(item, day))\n          data.disabled =\n            (this.minDate && dayMoment.clone().startOf('day') < min) ||\n            (this.maxDate && dayMoment.clone().endOf('day') > max) \n            || this.checkDisable('d', dayMoment)\n          if (this.range && !data.disabled) {\n            const [start, end] = this.selectedDates\n            data.isFirst = data.selected && start && isSameDay(start, day)\n            data.isLast = data.selected && end && isSameDay(end, day)\n            data.isBetween =\n              !data.selected && start && end && day > start && day < end\n          }\n          data.attributes = this.getHighlights('d', dayMoment)\n          return data\n        })\n      })\n    },\n    monthDays() {\n      if (!this.range || this.selectedDates.length !== 1 || !this.hoveredItem) { return this.month }\n      const dates = [this.hoveredItem, this.selectedDates[0]]\n      dates.sort((a, b) => a - b)\n      const [start, end] = dates\n      return this.month.map(weekItem => {\n        return weekItem.map(data => {\n          if (!data.date) return data\n          if (this.range && !data.disabled) {\n            const day = data.date\n            data.isHover = !data.selected && day > start && day < end\n          }\n          return data\n        })\n      })\n    },\n    years() {\n      if (!this.hasStep('y') || this.currentStep !== 'y') return []\n      const moment = this.core.moment\n      const min = this.minDate ? this.minDate : moment('1300', 'jYYYY')\n      const max = this.maxDate ? this.maxDate : min.clone().add(150, 'year')\n      const cy = this.date.xYear()\n      return this.core\n        .getYearsList(min.xYear(), max.xYear())\n        .reverse()\n        .map(item => {\n          const year = moment().xYear(item)\n          year.selected = cy === item\n          year.disabled = this.checkDisable('y', item)\n          year.attributes = this.getHighlights('y', item)\n          return year\n        })\n    },\n    months() {\n      if (this.hasStep('m')) {\n        const date = this.date.clone().xStartOf('month')\n        const months = this.core.getMonthsList(this.minDate, this.maxDate, date)\n        months.forEach(m => {\n          m.selected = this.date.xMonth() === m.xMonth()\n          m.disabled = m.disabled || this.checkDisable('m', m)\n          m.attributes = this.getHighlights('m', m)\n        })\n        return months\n      }\n      return []\n    },\n    prevMonthDisabled() {\n      return (\n        this.hasStep('d') &&\n        this.minDate &&\n        this.minDate.clone().xStartOf('month') >=\n          this.date.clone().xStartOf('month')\n      )\n    },\n    nextMonthDisabled() {\n      return (\n        this.hasStep('d') &&\n        this.maxDate &&\n        this.maxDate.clone().xStartOf('month') <=\n          this.date.clone().xStartOf('month')\n      )\n    },\n    canGoToday() {\n      if (!this.minDate && !this.maxDate) return true\n      const now = this.now\n      let min = this.minDate && this.minDate <= now\n      let max = this.maxDate && now <= this.maxDate\n\n      if (this.type === 'time') {\n        if (this.minDate) {\n          min = now\n            .clone()\n            .hour(this.minDate.hour())\n            .minute(this.minDate.minute())\n          min = min <= now\n        }\n        if (this.maxDate) {\n          max = this.now\n            .clone()\n            .hour(this.maxDate.hour())\n            .minute(this.maxDate.minute())\n          max = now <= max\n        }\n      }\n\n      if (this.minDate && this.maxDate) return min && max\n      if (this.minDate) return min\n      if (this.maxDate) return max\n      return false\n    },\n    altFormatted() {\n      let format = this.altFormat\n      if (format === '' || format === undefined) {\n        switch (this.type) {\n          case 'time':\n            format = 'HH:mm:ss [GMT]ZZ'\n            break\n          case 'datetime':\n            format = 'YYYY-MM-DD HH:mm:ss [GMT]ZZ'\n            break\n          case 'date':\n            format = 'YYYY-MM-DD'\n            break\n          case 'year':\n            format = 'YYYY'\n            break\n          case 'month':\n            format = 'MM'\n            break\n          case 'year-month':\n            format = 'YYYY-MM'\n            break\n        }\n      }\n      return this.output.map(d => d.format(format)).join(' ~ ')\n    },\n    selfFormat() {\n      let format = this.format\n      if (['', undefined, 'date'].indexOf(format) !== -1) {\n        switch (this.type) {\n          case 'time':\n            format = 'HH:mm'\n            break\n          case 'datetime':\n            format = 'jYYYY/jMM/jDD HH:mm'\n            break\n          case 'date':\n            format = 'jYYYY/jMM/jDD'\n            break\n          case 'year':\n            format = 'jYYYY'\n            break\n          case 'month':\n            format = 'jMM'\n            break\n          case 'year-month':\n            format = 'jYYYY/jMM'\n            break\n        }\n      }\n      return format\n    },\n    selfInputFormat() {\n      return this.inputFormat === '' || this.inputFormat === undefined\n        ? this.selfFormat\n        : this.inputFormat\n    },\n    outputValue() {\n      const output = cloneDates(this.output)\n      const format = this.selfFormat\n      const isDate = this.value instanceof Date || this.format === 'date'\n      return output.map(item => {\n        /j\\w/.test(format) && item.locale('fa')\n        this.setTimezone(item, 'out')\n        return isDate ? item.toDate() : item.format(format)\n      })\n    },\n    selfDisplayFormat() {\n      let format = this.displayFormat || this.selfFormat\n      const localeFormat = this.localeData.config.displayFormat\n      if (localeFormat) {\n        return typeof localeFormat === 'function'\n          ? localeFormat(this)\n          : localeFormat\n      }\n      if (this.localeData.name !== 'fa') {\n        format = format.replace(/j/g, '')\n      }\n      return format\n    },\n    displayValue() {\n      const format = this.selfDisplayFormat\n      return this.output\n        .map(item => {\n          const output = item.clone()\n          ;/j\\w/.test(format) && output.locale('fa')\n          return this.convertToLocaleNumber(output.format(format))\n        })\n        .join(' ~ ')\n    },\n    isDisableTime() {\n      return this.hasStep('t') && this.checkDisable('t', this.time)\n    },\n    timeAttributes() {\n      return this.hasStep('t') ? this.getHighlights('t', this.time) : {}\n    },\n    canSubmit() {\n      if (!this.disable) return true\n      let can = true\n      if (this.hasStep('t')) can = !this.isDisableTime\n      if (can && this.type !== 'time') can = !this.checkDisable('d', this.date)\n      return can\n    },\n    weekDays() {\n      const names = JSON.parse(\n        JSON.stringify(\n          this.core\n            .moment()\n            .localeData()\n            .weekdaysMin()\n        )\n      )\n      let dow = this.core.locale.config.dow\n      while (dow > 0) {\n        names.push(names.shift())\n        dow--\n      }\n      return names\n    },\n    lang() {\n      return this.localeData.config.lang\n    },\n    isPopover() {\n      return (this.popover === '' || this.popover) && this.windowWidth > 480\n    },\n    isDataArray() {\n      return this.range || this.multiple\n    }\n  },\n  watch: {\n    type: { handler: 'setType', immediate: true },\n    view: { handler: 'setView', immediate: true },\n    value: { handler: 'updateDates', immediate: true },\n    min: { handler: 'setMinMax', immediate: true },\n    max: { handler: 'setMinMax', immediate: true },\n    timezone: { handler: 'updateDates' },\n    inline: {\n      handler(val) {\n        if (!this.disabled) this.visible = !!val\n      },\n      immediate: true\n    },\n    disabled: {\n      handler(val) {\n        if (val) this.visible = false\n        else if (this.inline) this.visible = true\n      },\n      immediate: true\n    },\n    selectedDate(val, old) {\n      this.setDirection('directionClass', val, old)\n    },\n    date(val, old) {\n      this.setDirection('directionClassDate', val, old)\n      if (this.isLower(this.date)) this.date = this.minDate.clone()\n      if (this.isMore(this.date)) this.date = this.maxDate.clone()\n    },\n    time: {\n      handler(val, old) {\n        if (this.hasStep('t') && this.roundMinute) {\n          const time = this.time.clone()\n          const jm = this.jumpMinute\n          const m = (jm - (time.minute() % jm)) % jm\n          time.add({ m })\n          if (time.valueOf() !== this.time.valueOf()) {\n            this.time = time\n            // @todo: this line should apply time to current date selection,\n            // not all of them\n            this.selectedDates.forEach(d => d.set({ m: time.minute() }))\n          }\n        }\n        if (old) this.setDirection('directionClassTime', val, old)\n      },\n      immediate: true\n    },\n    visible(val) {\n      if (val) {\n        if (this.disabled) return (this.visible = false)\n        if (this.type === 'datetime' && this.view === 'day') this.goStep('d')\n        if (this.view !== 'day') this.goStep(this.shortCodes[this.view] || 'd')\n        this.$nextTick(() => {\n          if (this.appendTo) {\n            try {\n              const container = document.querySelector(this.appendTo)\n              container.appendChild(this.$refs.picker)\n            } catch (er) {\n              // eslint-disable-next-line\n              console.warn(`Cannot append picker to \"${this.appendTo}\"!`)\n            }\n          }\n        })\n        this.checkScroll()\n        this.setPlacement()\n        this.$emit('open', this)\n      } else {\n        if (this.inline && !this.disabled) return (this.visible = true)\n        this.$emit('close', this)\n      }\n    },\n    show(val) {\n      this.visible = val\n    },\n    locale: {\n      immediate: true,\n      handler(val) {\n        const locales = val.toString().split(',')\n        this.locales = locales.length ? locales : ['fa']\n        if (this.core.locale.name !== this.locales[0]) { this.setLocale(this.locales[0]) }\n      }\n    },\n    localeConfig: {\n      deep: true,\n      immediate: true,\n      handler(config) {\n        this.core.setLocalesConfig(config)\n        this.setLocale(this.localeData.name)\n      }\n    },\n    'localeData.name'() {\n      this.$emit('localeChange', this.localeData)\n      this.setMinMax()\n    }\n  },\n  created() {\n    this.updateNowInterval = setInterval(() => {\n      this.now = this.core.moment()\n    }, 1000)\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const addEvent = (el, type, handler) => {\n        if (el.attachEvent) el.attachEvent('on' + type, handler)\n        else el.addEventListener(type, handler)\n      }\n      const live = (selector, event, callback, context) => {\n        addEvent(context || document, event, function(e) {\n          let found\n          let el = e.target || e.srcElement\n          while (el && !(found = el.id === selector)) el = el.parentElement\n          if (found) callback.call(el, e)\n        })\n      }\n      if (this.element && !this.editable) {\n        live(this.element, 'click', this.focus)\n      }\n    })\n    document.body.addEventListener('keydown', e => {\n      e = e || event\n      const code = e.keyCode\n      if ((code === 9 || code === 27) && this.visible) this.visible = false\n    })\n    window.addEventListener('resize', this.onWindowResize, true)\n    window.addEventListener('mousedown', this.onWindowClick, true)\n  },\n  onBeforeUnmount() {\n    console.log('onBeforeUnmount')\n    window.clearInterval(this.updateNowInterval)\n    window.removeEventListener('resize', this.onWindowResize, true)\n    window.removeEventListener('mousedown', this.onWindowClick, true)\n    const picker = this.$refs.picker\n    if (this.appendTo && picker && picker.$el && picker.$el.parentNode) {\n      picker.$el.parentNode.removeChild(picker.$el)\n    }\n  },\n  methods: {\n    nextStep() {\n      let step = this.step + 1\n      if (this.compactTime && this.type === 'datetime') step += 1\n      if (this.steps.length <= step) {\n        const passSelected = this.selectedDates.length >= (this.range ? 2 : 1)\n        if ((this.autoSubmit || this.inline) && passSelected) {\n          this.submit(!this.multiple)\n        }\n      } else {\n        this.step++\n        this.goStep(this.step)\n      }\n    },\n    goStep(i) {\n      this.step = typeof i === 'number' ? i : this.steps.indexOf(i)\n      this.checkScroll()\n    },\n    checkScroll() {\n      const step = this.currentStep\n      if (step === 'y' || (step === 'm' && this.visible)) {\n        setTimeout(() => {\n          const container = this.$refs[{ y: 'year', m: 'month' }[step]]\n          if (container) {\n            const selected = container.querySelector('.vpd-selected')\n            if (selected && 'scrollIntoView' in selected) {\n              try {\n                selected.scrollIntoView({ block: 'center' })\n              } catch (er) {\n                selected.scrollIntoView()\n              }\n            }\n          }\n        }, 100)\n      }\n    },\n    fastUpdateCounter(e) {\n      if (!e) this.timeData.transitionSpeed = 300\n      this.classFastCounter = e ? 'fast-updating' : ''\n    },\n    nextMonth() {\n      this.date = this.date.clone().xAdd(1, 'month')\n    },\n    prevMonth() {\n      this.date = this.date.clone().xAdd(-1, 'month')\n    },\n    selectDay(day) {\n      if (!day.date || day.disabled) return\n      const date = this.core.moment(day.date)\n      date.set({\n        hour: this.time.hour(),\n        minute: this.time.minute(),\n        second: 0\n      })\n      this.date = date.clone()\n      this.time = date.clone()\n      if (this.range) {\n        const length = this.selectedDates.length\n        if (!length || length > 1) {\n          this.selectedDates = [date.clone()]\n        } else {\n          this.selectedDates.push(date.clone())\n          this.selectedDates.sort((a, b) => a - b)\n        }\n      } else if (this.multiple) {\n        const exists = this.selectedDates.findIndex(\n          d => d.valueOf() === date.valueOf()\n        )\n        if (exists > -1) {\n          this.selectedDates.splice(exists, 1)\n        } else {\n          this.selectedDates.push(date.clone())\n        }\n      } else {\n        this.selectedDates = [date.clone()]\n      }\n      this.nextStep()\n    },\n    selectYear(year) {\n      if (year.disabled) return\n      this.date = this.date.clone().xYear(year.xYear())\n      this.nextStep()\n    },\n    selectMonth(month) {\n      if (month.disabled) return\n      this.date = this.date.clone().xMonth(month.xMonth())\n      this.nextStep()\n    },\n    setTime(v, k) {\n      let time = this.time.clone()\n\n      time.add({ [k]: v })\n\n      if (this.type !== 'time') {\n        const date = this.date.clone()\n        time.set({ year: date.year(), month: date.month(), date: date.date() })\n        date.set({ hour: time.hour(), minute: time.minute() })\n        this.date = date\n      }\n\n      if (this.isLower(time)) time = this.minDate.clone()\n      if (this.isMore(time)) time = this.maxDate.clone()\n\n      this.time = time\n\n      const now = new Date().getTime()\n      const def = now - this.timeData.lastUpdate\n      if (def > 20 && def < 300) this.timeData.transitionSpeed = def\n      this.timeData.lastUpdate = now\n\n      window.clearTimeout(this.timeData.timeout)\n      this.timeData.timeout = window.setTimeout(() => {\n        this.timeData.transitionSpeed = 300\n      }, 300)\n    },\n    wheelSetTime(k, e) {\n      const delta = k === 'm' ? this.jumpMinute : 1\n      this.setTime(e.wheelDeltaY > 0 ? delta : -delta, k)\n    },\n    submit(close = true) {\n      let steps = this.steps.length - 1\n      const selected = this.selectedDates\n      if (this.compactTime && this.type === 'datetime') steps -= 1\n      if (this.step < steps) return this.nextStep()\n\n      if (this.hasStep('t')) {\n        const t = { hour: this.time.hour(), minute: this.time.minute() }\n        this.date = this.date.set(t).clone()\n        this.selectedDates = selected.map(d => d.set(t).clone())\n      }\n\n      if (['year', 'month', 'year-month'].indexOf(this.type) !== -1) { this.selectedDates = selected.map(() => this.date.clone()) }\n\n      if (this.range && selected.length > 1) {\n        selected[0].xStartOf('day')\n        selected[1].xEndOf('day')\n      }\n\n      this.output = cloneDates(selected)\n      if (close) this.visible = false\n\n      if (this.isDataArray) {\n        this.$emit('input', this.outputValue)\n        this.$emit('change', cloneDates(selected))\n      } else {\n        this.$emit('input', this.outputValue[0])\n        this.$emit('change', selected[0].clone())\n      }\n    },\n    updateDates(payload) {\n      if (this.isDataArray && !payload) payload = []\n\n      const payloadIsArray = payload instanceof Array\n      const getDate = (input, index = 0) => {\n        let date\n        const startValue =\n          this.value instanceof Array ? this.value[index] : this.value\n        try {\n          const isObject = typeof input === 'object'\n          if (input instanceof Date) {\n            date = this.getMoment(input)\n          } else if (input && isObject && 'clone' in input) {\n            date = input.clone()\n          } else if (input === null || !isObject) {\n            date = this.getMoment(input || startValue || this.initialValue)\n          }\n          date = date.isValid() ? date : this.core.moment()\n        } catch (e) {\n          date = this.core.moment()\n        }\n        this.setTimezone(date, 'in')\n        return date\n      }\n\n      if (payloadIsArray) {\n        this.date = getDate(payload[0])\n        this.selectedDates = payload.map(getDate)\n      } else {\n        this.date = getDate(payload)\n      }\n\n      if (!this.hasStep('t')) this.date.set({ hour: 0, minute: 0, second: 0 })\n\n      if (this.isLower(this.date)) {\n        this.date = this.minDate.clone()\n      } else if (this.isMore(this.date)) {\n        this.date = this.maxDate.clone()\n      }\n\n      if (!payloadIsArray) this.selectedDates = [this.date.clone()]\n      this.time = this.date.clone()\n\n      if (this.value !== '' && this.value !== null && this.value.length) {\n        this.output = cloneDates(this.selectedDates)\n      } else {\n        this.output = []\n        // this.$forceUpdate()\n      }\n    },\n    goToday() {\n      const now = this.core.moment()\n      if (!this.hasStep('t')) now.set({ hour: 0, minute: 0, second: 0 })\n      this.date = now.clone()\n      this.time = now.clone()\n      this.selectedDates = [now.clone()]\n    },\n    setType() {\n      switch (this.type) {\n        case 'date':\n          this.steps = ['y', 'm', 'd']\n          this.goStep('d')\n          break\n        case 'datetime':\n          this.steps = ['y', 'm', 'd', 't']\n          this.goStep('d')\n          break\n        case 'year':\n          this.steps = ['y']\n          this.goStep('y')\n          break\n        case 'month':\n          this.steps = ['m']\n          this.goStep('m')\n          break\n        case 'time':\n          this.steps = ['t']\n          this.goStep('t')\n          break\n        case 'year-month':\n          this.steps = ['y', 'm']\n          this.goStep('y')\n          break\n      }\n    },\n    setView() {\n      const s = this.shortCodes[this.view]\n      if (this.hasStep(s)) this.goStep(s)\n    },\n    setDirection(prop, val, old) {\n      this[prop] = val > old ? 'direction-next' : 'direction-prev'\n    },\n    setMinMax() {\n      const min = this.getMoment(this.min)\n      const max = this.getMoment(this.max)\n      this.minDate = this.min && min.isValid() ? min : false\n      this.maxDate = this.max && max.isValid() ? max : false\n    },\n    getMoment(date) {\n      let d\n      const moment = this.core.moment\n\n      if (date instanceof Date) return moment(date)\n\n      if (this.selfInputFormat === 'x' || this.selfInputFormat === 'unix') {\n        d = moment(date.toString().length === 10 ? date * 1000 : date * 1)\n      } else {\n        try {\n          if (date) {\n            let a = moment(date, this.selfInputFormat)\n            let b = moment(date, this.selfFormat)\n            const now = moment()\n            const year = now.xYear()\n            if (this.type === 'month') {\n              a.xYear(year)\n              b.xYear(year)\n            } else if (this.type === 'time') {\n              a = now.clone().set({\n                h: a.hour(),\n                m: a.minute(),\n                s: 0\n              })\n              b = a.clone()\n            }\n            if (a.year() !== b.year() && a.year() < 1900) {\n              d = b.clone()\n            } else {\n              d = a.clone()\n            }\n          } else {\n            d = moment()\n          }\n        } catch (er) {\n          d = moment()\n        }\n      }\n      return d\n    },\n    focus(e) {\n      if (this.editable) {\n        if (this.$refs.input) this.$refs.input.focus()\n      } else {\n        if (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          e.target.blur()\n          this.visible = !this.visible\n        } else {\n          this.visible = true\n        }\n        return false\n      }\n    },\n    hasStep(step) {\n      return this.steps.indexOf(step) !== -1\n    },\n    setOutput(e) {\n      if (!this.editable) return\n      const value = e.target.value.split('~')\n\n      const output = value.map(item => {\n        item = `${item}`.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n        if (item === '') return null\n        try {\n          const date = this.core.moment(item, this.selfDisplayFormat)\n          return date.isValid() ? date : null\n        } catch (er) {\n          return null\n        }\n      })\n\n      this.output = output.filter(d => d)\n      this.output.sort((a, b) => a - b)\n\n      if (this.output.length) {\n        this.updateDates(cloneDates(this.output))\n        this.submit()\n      } else {\n        // this.$forceUpdate()\n        this.$emit('input', this.isDataArray ? [] : null)\n        this.$emit('change', this.isDataArray ? [] : null)\n      }\n    },\n    wrapperClick() {\n      this.visible = false\n      if (this.wrapperSubmit && this.canSubmit) {\n        this.submit()\n      }\n    },\n    applyDevFn(fn, k) {\n      let result = false\n      const args = Array.prototype.splice.call(arguments, 2)\n      try {\n        args.push({ y: 'year', m: 'month', d: 'day', t: 'time' }[k])\n        result = fn.apply(null, args)\n      } catch (er) {\n        // eslint-disable-next-line\n        console.error(er)\n      }\n      return result\n    },\n    checkDisable(item, value) {\n      const thisDisable = this.disable\n      if (!thisDisable) return false\n      const type = typeof thisDisable\n\n      const checkString = (filter, str, date) => {\n        if (filter instanceof RegExp) return filter.test(str)\n        if (filter === str) return true\n        if (item === 'd') {\n          const length = filter.length\n          return (\n            str.substr(0, length) === filter ||\n            date\n              .clone()\n              .locale('en')\n              .format('dddd') === filter\n          )\n        }\n        return false\n      }\n\n      const check = (date, dateFormatted) => {\n        let matches = false\n        if (type === 'function') {\n          return this.applyDevFn(thisDisable, item, dateFormatted, date.clone())\n        } else if (\n          Object.prototype.toString.call(thisDisable) === '[object Array]'\n        ) {\n          const ii = thisDisable.length\n          for (let i = 0; i < ii; i++) {\n            matches = checkString(thisDisable[i], dateFormatted, date)\n            if (matches) break\n          }\n          return matches\n        } else if (type === 'string' || thisDisable instanceof RegExp) {\n          return checkString(thisDisable, dateFormatted, date)\n        }\n        return false\n      }\n\n      let format = this.selfFormat\n      if (item === 'y') {\n        value = this.core.moment(value, 'jYYYY')\n      } else if (item === 'd') {\n        // remove time from format\n        format = format.replace(/(H(H?))|(h(h?))?(:?)m(m?)(:?)(s(s?))?/g, '')\n      }\n      return check(value, value.format(format))\n    },\n    getHighlights(item, value) {\n      const highlight = this.highlight\n      if (!highlight || typeof highlight !== 'function') return {}\n      if (item === 'y') value = this.core.moment(value, 'jYYYY')\n      return (\n        this.applyDevFn(\n          highlight,\n          item,\n          value.format(this.selfFormat),\n          value.clone()\n        ) || {}\n      )\n    },\n    isLower(date) {\n      return this.minDate && date < this.minDate\n    },\n    isMore(date) {\n      return this.maxDate && date > this.maxDate\n    },\n    clearValue() {\n      if (this.disabled) return\n      this.output = []\n      this.$emit('input', this.isDataArray ? [] : '')\n      this.$emit('change', this.isDataArray ? [] : null)\n    },\n    setLocale(locale) {\n      this.core.changeLocale(locale, this.localeConfig)\n      this.date = this.date.clone()\n      this.selectedDates = this.selectedDates.map(d => d.clone())\n      // this.$forceUpdate()\n    },\n    setTimezone(date, mode) {\n      const tz = this.timezone\n      if (tz) {\n        const r = mode === 'in' ? 1 : -1\n        const moment = this.core.moment\n        if (typeof tz === 'string') {\n          const t =\n            moment()\n              .utc()\n              .format('YYYY-MM-DDTHH:mm:ss') + tz\n          date.add(moment.parseZone(t).utcOffset() * r, 'minutes')\n        } else if (typeof tz === 'boolean' && tz) {\n          date.subtract(new Date(date).getTimezoneOffset() * r, 'minutes')\n        } else if (typeof tz === 'function') {\n          date = tz(date, mode, this)\n        }\n      }\n      return date.clone()\n    },\n    convertToLocaleNumber(value) {\n      if (this.convertNumbers && this.locale === 'fa') {\n        return `${value}`.replace(/\\d+/g, function(digit) {\n          let ret = ''\n          for (let i = 0, len = digit.length; i < len; i++) {\n            ret += String.fromCharCode(digit.charCodeAt(i) + 1728)\n          }\n          return ret\n        })\n      }\n      return value\n    },\n    onWindowResize() {\n      this.windowWidth = window.innerWidth\n    },\n    onWindowClick(event) {\n      if (this.isPopover && this.$refs.picker && this.$refs.inputGroup) {\n        const isOnPicker = this.$refs.picker.contains(event.target)\n        const isOnInput = this.$refs.inputGroup.contains(event.target)\n        if (isOnPicker) event.preventDefault()\n        if (!isOnPicker && !isOnInput) {\n          // setTimeout because:\n          // first read the input value\n          // then process the output\n          // then close the picker\n          setTimeout(() => (this.visible = false), this.editable ? 500 : 0)\n        }\n      }\n    },\n    setPlacement() {\n      if (!this.isPopover) return\n      const allowed = [\n        'top-left',\n        'top-right',\n        'bottom-right',\n        'bottom-left',\n        'left-top',\n        'left-bottom',\n        'right-top',\n        'right-bottom'\n      ]\n      if (allowed.indexOf(this.popover) !== -1) { return (this.popoverPlace = this.popover) }\n\n      this.popoverPlace = 'bottom-right'\n      this.$nextTick(() => {\n        const placement = ['bottom', 'right']\n        const container = this.$refs.container\n        const rect = container.getBoundingClientRect()\n        const left = rect.left\n        const bottom = window.innerHeight - rect.bottom\n        if (bottom <= 0) placement[0] = 'top'\n        if (left <= 0) placement[1] = 'left'\n        this.popoverPlace = placement.join('-')\n      })\n    }\n  },\n  install(Vue, options) {\n    const component = this\n    options = Vue.util.extend(\n      {\n        name: 'data-picker',\n        props: {}\n      },\n      options\n    )\n\n    for (const k in options.props) {\n      if (Object.prototype.hasOwnProperty.call(component.props, k)) {\n        component.props[k].default = options.props[k]\n      }\n    }\n    Vue.component(options.name, component)\n  }\n}\n</script>\n"],"sourceRoot":""}]}