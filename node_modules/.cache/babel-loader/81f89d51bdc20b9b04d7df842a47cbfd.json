{"remainingRequest":"/Users/sylvia/myproject/mysite/ff/node_modules/babel-loader/lib/index.js!/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sylvia/myproject/mysite/ff/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue","mtime":1637689269310},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sylvia/myproject/mysite/ff/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvc3lsdmlhL215cHJvamVjdC9teXNpdGUvZmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL3N5bHZpYS9teXByb2plY3QvbXlzaXRlL2ZmL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvc3lsdmlhL215cHJvamVjdC9teXNpdGUvZmYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgQXJyb3cgZnJvbSAnLi8uL2NvbXBvbmVudHMvQXJyb3cudnVlJzsKaW1wb3J0IEJ0biBmcm9tICcuLy4vY29tcG9uZW50cy9CdG4udnVlJzsKaW1wb3J0IENhbGVuZGFySWNvbiBmcm9tICcuL2NvbXBvbmVudHMvQ2FsZW5kYXJJY29uLnZ1ZSc7CmltcG9ydCBUaW1lSWNvbiBmcm9tICcuLy4vY29tcG9uZW50cy9UaW1lSWNvbi52dWUnOwppbXBvcnQgQ29yZU1vZHVsZSBmcm9tICcuLy4vbW9kdWxlcy9jb3JlJzsKaW1wb3J0IExvY2FsZUNoYW5nZSBmcm9tICcuLy4vY29tcG9uZW50cy9Mb2NhbGVDaGFuZ2UnOwppbXBvcnQgeyBjbG9uZURhdGVzLCBpc1NhbWVEYXkgfSBmcm9tICcuLy4vbW9kdWxlcy91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2NhbGVDaGFuZ2U6IExvY2FsZUNoYW5nZSwKICAgIEFycm93OiBBcnJvdywKICAgIEJ0bjogQnRuLAogICAgQ2FsZW5kYXJJY29uOiBDYWxlbmRhckljb24sCiAgICBUaW1lSWNvbjogVGltZUljb24KICB9LAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgZXZlbnQ6ICdpbnB1dCcKICB9LAogIHByb3BzOiB7CiAgICAvKioKICAgICAqIERlZmF1bHQgaW5wdXQgdmFsdWUKICAgICAqIEB0eXBlIE51bWJlciBTdHJpbmcKICAgICAqIEBkZWZhdWx0IFtdCiAgICAgKiBAZXhhbXBsZSAxMzk2LzA4LzAxIDIyOjQ1IHwgMjAxNy8wNy8wNyAyMDo0NSB8IHt1bml4fSB8IDIwOjQ1CiAgICAgKi8KICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZywgRGF0ZSwgQXJyYXldLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIEluaXRpYWwgdmFsdWUgb2YgcGlja2VyIChpZiB2YWx1ZSBpcyBlbXB0eSkKICAgICAqIEB0eXBlIE51bWJlciBTdHJpbmcKICAgICAqIEBkZWZhdWx0IFtdCiAgICAgKiBAZXhhbXBsZSAxMzcwLzAxLzAxIDIyOjQ1IHwgMjAxNy8wMS8wMSAyMDo0NSB8IHt1bml4fSB8IDIwOjQ1CiAgICAgKiBAdmVyc2lvbiAxLjAuOQogICAgICovCiAgICBpbml0aWFsVmFsdWU6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBGb3JtYXQgZm9yIHt2YWx1ZX0KICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgTnVsbAogICAgICogQGV4YW1wbGUgallZWVkvak1NL2pERCBISDptbSB8IFlZWVkvTU0vREQgSEg6bW0gfCB4IHwgdW5peCB8IEhIOm1tCiAgICAgKiBAaWYgZW1wdHkge2lucHV0Rm9ybWF0fSA9IHtmb3JtYXR9CiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYWxhYWxpL21vbWVudC1qYWxhYWxpCiAgICAgKi8KICAgIGlucHV0Rm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBGb3JtYXQgb25seSB0byBkaXNwbGF5IHRoZSBkYXRlIGluIHRoZSBmaWVsZAogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAZXhhbXBsZSBqWVlZWS9qTU0vakREIEhIOm1tIHwgWVlZWS9NTS9ERCBISDptbSB8IHggfCB1bml4IHwgSEg6bW0KICAgICAqIEBpZiBlbXB0eSB7ZGlzcGxheUZvcm1hdH0gPSB7Zm9ybWF0fQogICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vamFsYWFsaS9tb21lbnQtamFsYWFsaQogICAgICovCiAgICBkaXNwbGF5Rm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBGb3JtYXQgZm9yIG91dHB1dCB2YWx1ZQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAZXhhbXBsZSBqWVlZWS9qTU0vakREIEhIOm1tIHwgWVlZWS9NTS9ERCBISDptbSB8IHggfCBkYXRlIHwgSEg6bW0KICAgICAqIEBpZiBlbXB0eSwgaXQgd2lsbCBiZSBidWlsdCBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2YgcGlja2VyOgogICAgICoKICAgICAqIC0tLSB0aW1lOiAgICAgSEg6bW0KICAgICAqIC0tLSBkYXRldGltZTogallZWVkvak1NL2pERCBISDptbQogICAgICogLS0tIGRhdGU6ICAgICBqWVlZWS9qTU0vakRECiAgICAgKiAtLS0geWVhcjogICAgIGpZWVlZCiAgICAgKiAtLS0gbW9udGg6ICAgIGpNTQogICAgICoKICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phbGFhbGkvbW9tZW50LWphbGFhbGkKICAgICAqLwogICAgZm9ybWF0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBTdGVwIHRvIHZpZXcgb24gc3RhcnR1cAogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCAiZGF5IgogICAgICogQHN1cHBvcnRlZCBkYXkgfCBtb250aCB8IHllYXIgfCB0aW1lCiAgICAgKiBAZXhhbXBsZSB5ZWFyCiAgICAgKiBAZGVzYyB7eWVhcn0gd2lsbCBzaG93IHRoZSAieWVhciIgcGFuZWwgYXQgZmlyc3QKICAgICAqLwogICAgdmlldzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdkYXknCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIHBpY2tlciB0eXBlCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0ICJkYXRlIgogICAgICogQHN1cHBvcnRlZCBkYXRlIHwgZGF0ZXRpbWUgfCB5ZWFyIHwgbW9udGggfCB0aW1lCiAgICAgKi8KICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZGF0ZScKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgbWluaW11bSBvZiBzZWxlY3RhYmxlIHBlcmlvZAogICAgICogQmFzZWQgb24ge2lucHV0Rm9ybWF0fQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAZXhhbXBsZSAxMzk2LzA4LzAxIDIyOjQ1IHwgMjI6NDUKICAgICAqLwogICAgbWluOiB7CiAgICAgIHR5cGU6IFtTdHJpbmddLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG9mIHNlbGVjdGFibGUgcGVyaW9kCiAgICAgKiBCYXNlZCBvbiB7aW5wdXRGb3JtYXR9CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0IE51bGwKICAgICAqIEBleGFtcGxlIDEzOTYvMDgvMDEgMjI6NDUgfCAyMjo0NQogICAgICovCiAgICBtYXg6IHsKICAgICAgdHlwZTogW1N0cmluZ10sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAoKICAgIC8qKgogICAgICogRWRpdGFibGUgaW5wdXQgb3IganVzdCByZWFkb25seQogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgRmFsc2UKICAgICAqIEBpZiBmYWxzZSwgdGhlIHBpY2tlciB3aWxsIHNob3duIG9uIGlucHV0IGZvY3VzCiAgICAgKiBAaWYgdHJ1ZSwgdGhlIHBpY2tlciB3aWxsIHNob3duIG9uIGxhYmVsIGNsaWNrCiAgICAgKiBAbm90ZSBpZiB1c2UgPC4uLiA6ZWRpdGFibGU9InRydWUiPiB3aXRoIDwuLi4gOmVsZW1lbnQ9Ii4uLiI+CiAgICAgKiAgICAgdGhlbiB5b3UgaGF2ZSB0byBjb250cm9sIHRoZSA8Li4uIDpzaG93PSJ0cnVlIG9yIGZhbHNlIj4KICAgICAqLwogICAgZWRpdGFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgc3BlY2lmaWVkIGlucHV0IGVsZW1lbnQgSUQKICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgVW5kZWZpbmVkCiAgICAgKiBAZGVzYyBTb21ldGltZXMgeW91IGRvbid0IHdhbnQgdG8gdXNlIHBpY2tlciBkZWZhdWx0IGlucHV0LAogICAgICogc28geW91IGNhbiB1c2Ugb3VyIG93biBpbnB1dCBlbGVtZW50IHdpdGggImlkIiBhdHRyaWJ1dGUKICAgICAqIGFuZCB1c2UgPC4uLiBlbGVtZW50PSJ0aGVfaWRfb2ZfaW5wdXQiPgogICAgICovCiAgICBlbGVtZW50OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIGZvcm0gaW5wdXQgbmFtZSB3aGVuIG5vdCB1c2luZyB7ZWxlbWVudH0KICAgICAqIEB0eXBlIFN0cmluZwogICAgICogQGRlZmF1bHQgVW5kZWZpbmVkCiAgICAgKi8KICAgIG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgZm9ybSBpbnB1dCBjbGFzc05hbWUgd2hlbiBub3QgdXNpbmcge2VsZW1lbnR9CiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEBkZWZhdWx0ICJmb3JtLWNvbnRyb2wiCiAgICAgKi8KICAgIGlucHV0Q2xhc3M6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZm9ybS1jb250cm9sJwogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSBmb3JtIGlucHV0IHBsYWNlaG9sZGVyIHdoZW4gbm90IHVzaW5nIHtlbGVtZW50fQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKi8KICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiBoaWRkZW4gaW5wdXQgZWxlbWVudAogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAaWYgZW1wdHksIHRoZSBoaWRkZW4gaW5wdXQgd2lsbCBub3QgYmUgY3JlYXRlZAogICAgICovCiAgICBhbHROYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBGb3JtYXQgZm9yIGhpZGRlbiBpbnB1dAogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBOdWxsCiAgICAgKiBAZXhhbXBsZSBZWVlZLU1NLUREIEhIOm1tOnNzIFtHTVRdWloKICAgICAqIEBpZiBlbXB0eSwgaXQgd2lsbCBiZSBidWlsdCBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2YgcGlja2VyOgogICAgICoKICAgICAqIC0tLSB0aW1lOiAgICAgSEg6bW06c3MgW0dNVF1aWgogICAgICogLS0tIGRhdGV0aW1lOiBZWVlZLU1NLUREIEhIOm1tOnNzIFtHTVRdWloKICAgICAqIC0tLSBkYXRlOiAgICAgWVlZWS1NTS1ERAogICAgICogLS0tIHllYXI6ICAgICBZWVlZCiAgICAgKiAtLS0gbW9udGg6ICAgIE1NCiAgICAgKi8KICAgIGFsdEZvcm1hdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAoKICAgIC8qKgogICAgICogU2hvdyBvciBoaWRlIHRoZSBwaWNrZXIKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IEZhbHNlCiAgICAgKi8KICAgIHNob3c6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBQcmltYXJ5IGNvbG9yIG9mIHBpY2tlcgogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKi8KICAgIGNvbG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyM0MTdkZjQnCiAgICB9LAoKICAgIC8qKgogICAgICogQXV0byBzdWJtaXQgYW5kIGhpZGUgcGlja2VyIHdoZW4gZGF0ZSBzZWxlY3RlZAogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgRmFsc2UKICAgICAqLwogICAgYXV0b1N1Ym1pdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIEF1dG8gc3VibWl0IHdoZW4gY2xpY2tpbmcgdGhlIHdyYXBwZXIKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAdmVyc2lvbiAxLjAuNgogICAgICovCiAgICB3cmFwcGVyU3VibWl0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogUGxhY2UgdG8gYXBwZW5kIHBpY2tlcgogICAgICogQHR5cGUgU3RyaW5nIHF1ZXJ5IHNlbGVjdG9yCiAgICAgKiBAZGVmYXVsdCBudWxsCiAgICAgKiBAZGVzYyBJZiB5b3Ugd2FudCB0byBhcHBlbmQgcGlja2VyIHRvIGFub3RoZXIgY29udGFpbmVyIGxpa2UgJ2JvZHknLAogICAgICogcGFzcyB0aGUgY29udGFpbmVyIGFzIGFwcGVuZC10bz0iYm9keSIsICBhcHBlbmQtdG89IiNhcHAiLCAgYXBwZW5kLXRvPSIjbXktY29udGFpbmVyIgogICAgICogQGV4YW1wbGUgJ2JvZHknLCAnLm1haW4tY29udGFpbmVyJywgJyNhcHAnIC4uLgogICAgICogQHZlcnNpb24gMS4xLjEKICAgICAqLwogICAgYXBwZW5kVG86IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAoKICAgIC8qKgogICAgICogRGlzYWJsZSBvciBlbmFibGUgdGhlIGRhdGVwaWNrZXIKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAdmVyc2lvbiAxLjEuNAogICAgICovCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIERpc2FibGluZwogICAgICogQHR5cGUgQXJyYXksIFN0cmluZywgRnVuY3Rpb24sIFJlZ0V4cAogICAgICogQGRlZmF1bHQgdW5kZWZpbmVkCiAgICAgKiBAZGVzYyBkaXNhYmxlIHNvbWUgZGF0ZXMKICAgICAqIEBleGFtcGxlIFsnMTM5Ny8wMi8wMicsICcxMzkwLzEwLzEwJ10gLSAiMTM5Ny8wNS8yMCIgLSAvMTM5N1wvMDVcLyguKikvIC4uLgogICAgICogQHZlcnNpb24gMS4xLjQKICAgICAqLwogICAgZGlzYWJsZTogewogICAgICB0eXBlOiBbQXJyYXksIFN0cmluZywgRnVuY3Rpb24sIFJlZ0V4cF0sCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKCiAgICAvKioKICAgICAqIExhYmVsCiAgICAgKiBAdHlwZSBTdHJpbmcKICAgICAqIEB2ZXJzaW9uIDEuMS40CiAgICAgKi8KICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgLyoqCiAgICAgKiBIaWdobGlnaHQgaXRlbXMKICAgICAqIEB0eXBlIEZ1bmN0aW9uCiAgICAgKiBAZGVzYyBUaGlzIHByb3AgYWNjZXB0cyBvbmx5IGZ1bmN0aW9uIHRoYXQgcmV0dXJuIGFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzLgogICAgICogQHZlcnNpb24gMS4xLjUKICAgICAqLwogICAgaGlnaGxpZ2h0OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAoKICAgIC8qKgogICAgICogQ2hhbmdlIG1pbnV0ZXMgYnkgc3RlcAogICAgICogQHR5cGUgTnVtYmVyCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKiBAdmVyc2lvbjogMS4xLjYKICAgICAqLwogICAganVtcE1pbnV0ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCgogICAgLyoqCiAgICAgKiBSb3VuZCBtaW51dGVzIHdoZW4ganVtcE1pbnV0ZSBpcyBncmF0ZXIgdGhhbiAxCiAgICAgKiBAZXhhbXBsZSB3aGVuIGp1bXBNaW51dGUgPSAxNSB0aGluIHdpbGwgcmVzdWx0OiAxMzowMCwgMTM6MTUsIDEzOjMwLCAxMzo0NSAuLi4KICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAdmVyc2lvbjogMS4xLjYKICAgICAqLwogICAgcm91bmRNaW51dGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBTaG93IGNsZWFyIGJ1dHRvbgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEB2ZXJzaW9uIDEuMS42CiAgICAgKi8KICAgIGNsZWFyYWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIElubGluZSBtb2RlCiAgICAgKiBAdHlwZSBCb29sZWFuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICogQHZlcnNpb24gMS4xLjYKICAgICAqLwogICAgaW5saW5lOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogTG9jYWxlcyBjb25maWcgKCJmYSIgZm9yIGphbGFsaSBhbmQgImVuIiBmb3IgZ3JlZ29yaWFuKQogICAgICogQHR5cGUgU3RyaW5nCiAgICAgKiBAZGVmYXVsdCBmYQogICAgICogQGV4YW1wbGUgZmEgfCBlbiB8IGZhLGVuIHwgZW4sZmEKICAgICAqIEBzdXBwb3J0ZWQgZmEsZW4KICAgICAqIEB2ZXJzaW9uIDIuMC4wCiAgICAgKi8KICAgIGxvY2FsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdmYScKICAgIH0sCgogICAgLyoqCiAgICAgKiBMb2NhbGUgY29uZmlndXJhdGlvbgogICAgICogQHR5cGUgT2JqZWN0CiAgICAgKiBAZGVmYXVsdCB7fQogICAgICogQHZlcnNpb24gMi4wLjAKICAgICAqIEBleGFtcGxlCiAgICAgKiB7CiAgICAgKiAgZmE6IHsKICAgICAqICAgICAgZG93OiA2LCAgICAgICAgICAgICAtLWZpcnN0IGRheSBvZiB3ZWVrCiAgICAgKiAgICAgIGRpcjogJ3J0bCcsICAgICAgICAgLS1sYW5ndWFnZSBkaXJlY3Rpb24KICAgICAqICAgICAgbGFuZzogewogICAgICogICAgICAgICAgIGxhYmVsOiAgICAgIti02YXYs9uMIiwKICAgICAqICAgICAgICAgICBzdWJtaXQ6ICAgICLYqtin24zbjNivIiwKICAgICAqICAgICAgICAgICBjYW5jZWw6ICAgICLYp9mG2LXYsdin2YEiLAogICAgICogICAgICAgICAgIG5vdzogICAgICAgItin2qnZhtmI2YYiLAogICAgICogICAgICAgICAgIG5leHRNb250aDogItmF2KfZhyDYqNi52K8iLAogICAgICogICAgICAgICAgIHByZXZNb250aDogItmF2KfZhyDZgtio2YQiLAogICAgICogICAgICB9CiAgICAgKiAgfSwKICAgICAqICBlbjogeyAuLi4gfQogICAgICogfQogICAgICovCiAgICBsb2NhbGVDb25maWc6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBUaW1lem9uZSBjb25maWd1cmF0aW9uCiAgICAgKiBAdHlwZSBTdHJpbmcgfCBCb29sZWFuIHwgRnVuY3Rpb24KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAZXhhbXBsZSB0cnVlIHwgZmFsc2UgfCArMDM6MzAgfCArMDQ6MzAKICAgICAqIEB2ZXJzaW9uIDIuMS4wCiAgICAgKi8KICAgIHRpbWV6b25lOiB7CiAgICAgIHR5cGU6IFtCb29sZWFuLCBTdHJpbmcsIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBTaG93IG9yIGhpZGUgTk9XIGJ1dHRvbgogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICogQHZlcnNpb24gMi4xLjYKICAgICAqLwogICAgc2hvd05vd0J0bjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAoKICAgIC8qKgogICAgICogQ29udmVydCB0byBsb2NhbGUgbnVtYmVycyBvciBub3QKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAZXhhbXBsZSA8ZGF0ZS1waWNrZXIgY29udmVydC1udW1iZXJzIC8+CiAgICAgKiBAdmVyc2lvbiAyLjMuMAogICAgICovCiAgICBjb252ZXJ0TnVtYmVyczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIERpc3BsYXkgdGhlIHRpbWUgb24gdGhlIGZyb250IHBhZ2UKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAZXhhbXBsZSA8ZGF0ZS1waWNrZXIgY29tcGFjdC10aW1lIC8+CiAgICAgKiBAdmVyc2lvbiAyLjQuMAogICAgICovCiAgICBjb21wYWN0VGltZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICAvKioKICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHJhbmdlIG1vZGUKICAgICAqIEB0eXBlIEJvb2xlYW4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKiBAZXhhbXBsZSA8ZGF0ZS1waWNrZXIgcmFuZ2UgLz4KICAgICAqIEB2ZXJzaW9uIDIuNS4wCiAgICAgKi8KICAgIHJhbmdlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogRW5hYmxlIG9yIGRpc2FibGUgbXVsdGlwbGUgbW9kZQogICAgICogQHR5cGUgQm9vbGVhbgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciBtdWx0aXBsZSAvPgogICAgICogQHZlcnNpb24gMi42LjAKICAgICAqLwogICAgbXVsdGlwbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSBwb3BvdmVyIG1vZGUKICAgICAqIEB0eXBlIEJvb2xlYW4gfCBTdHJpbmcKICAgICAqIEBhY2NlcHRlZDoKICAgICAqICAgIHRydWUgfCBmYWxzZQogICAgICogICAgdG9wLWxlZnQgfCB0b3AtcmlnaHQgfCBib3R0b20tcmlnaHQgfCBib3R0b20tbGVmdAogICAgICogICAgbGVmdC10b3AgfCBsZWZ0LWJvdHRvbSB8IHJpZ2h0LXRvcCB8IHJpZ2h0LWJvdHRvbQogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqIEBleGFtcGxlIDxkYXRlLXBpY2tlciBwb3BvdmVyIC8+CiAgICAgKiBAZXhhbXBsZSA8ZGF0ZS1waWNrZXIgcG9wb3Zlcj0idG9wLWxlZnQiIC8+CiAgICAgKiBAdmVyc2lvbiAyLjYuMAogICAgICovCiAgICBwb3BvdmVyOiB7CiAgICAgIHR5cGU6IFtCb29sZWFuLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBkZWZhdWx0TG9jYWxlID0gdGhpcy5sb2NhbGUuc3BsaXQoJywnKVswXTsKICAgIHZhciBjb3JlTW9kdWxlID0gbmV3IENvcmVNb2R1bGUoZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGVDb25maWcpOwogICAgcmV0dXJuIHsKICAgICAgY29yZTogY29yZU1vZHVsZSwKICAgICAgbm93OiBjb3JlTW9kdWxlLm1vbWVudCgpLAogICAgICBkYXRlOiB7fSwKICAgICAgc2VsZWN0ZWREYXRlczogW10sCiAgICAgIGhvdmVyZWRJdGVtOiBudWxsLAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgZGlyZWN0aW9uQ2xhc3M6ICcnLAogICAgICBkaXJlY3Rpb25DbGFzc0RhdGU6ICcnLAogICAgICBkaXJlY3Rpb25DbGFzc1RpbWU6ICcnLAogICAgICBjbGFzc0Zhc3RDb3VudGVyOiAnJywKICAgICAgc3RlcHM6IFsneScsICdtJywgJ2QnLCAndCddLAogICAgICBzdGVwOiAwLAogICAgICBzaG9ydENvZGVzOiB7CiAgICAgICAgeWVhcjogJ3knLAogICAgICAgIG1vbnRoOiAnbScsCiAgICAgICAgZGF5OiAnZCcsCiAgICAgICAgdGltZTogJ3QnCiAgICAgIH0sCiAgICAgIHRpbWU6IHt9LAogICAgICB0aW1lRGF0YTogewogICAgICAgIHRyYW5zaXRpb25TcGVlZDogMzAwLAogICAgICAgIHRpbWVvdXQ6IGZhbHNlLAogICAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgIH0sCiAgICAgIG1pbkRhdGU6IGZhbHNlLAogICAgICBtYXhEYXRlOiBmYWxzZSwKICAgICAgb3V0cHV0OiBbXSwKICAgICAgdXBkYXRlTm93SW50ZXJ2YWw6IG51bGwsCiAgICAgIGxvY2FsZXM6IFsnZmEnXSwKICAgICAgbG9jYWxlRGF0YTogY29yZU1vZHVsZS5sb2NhbGUsCiAgICAgIHdpbmRvd1dpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgcG9wb3ZlclBsYWNlOiAnYm90dG9tLXJpZ2h0JwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2bTogZnVuY3Rpb24gdm0oKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIGlkOiBmdW5jdGlvbiBpZCgpIHsKICAgICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTsKICAgIH0sCiAgICBjdXJyZW50U3RlcDogZnVuY3Rpb24gY3VycmVudFN0ZXAoKSB7CiAgICAgIHJldHVybiB0aGlzLnN0ZXBzW3RoaXMuc3RlcF07CiAgICB9LAogICAgc2VsZWN0ZWREYXRlOiBmdW5jdGlvbiBzZWxlY3RlZERhdGUoKSB7CiAgICAgIHZhciBkYXRlcyA9IHRoaXMuc2VsZWN0ZWREYXRlczsKICAgICAgcmV0dXJuIGRhdGVzLmxlbmd0aCA/IGRhdGVzW2RhdGVzLmxlbmd0aCAtIDFdIDogdGhpcy5kYXRlOwogICAgfSwKICAgIGZvcm1hdHRlZERhdGU6IGZ1bmN0aW9uIGZvcm1hdHRlZERhdGUoKSB7CiAgICAgIHZhciBmb3JtYXQgPSAnJzsKICAgICAgaWYgKHRoaXMuaGFzU3RlcCgneScpKSBmb3JtYXQgPSAnallZWVknOwogICAgICBpZiAodGhpcy5oYXNTdGVwKCdtJykpIGZvcm1hdCArPSAnIGpNTU1NICc7CgogICAgICBpZiAodGhpcy5oYXNTdGVwKCdkJykpIHsKICAgICAgICBmb3JtYXQgPSB0aGlzLmlzRGF0YUFycmF5ID8gJ2pEIGpNTU1NIGpZWVlZJyA6ICdkZGQgakQgak1NTU0nOwogICAgICB9CgogICAgICBpZiAodGhpcy5oYXNTdGVwKCd0JykpIGZvcm1hdCArPSAnIEhIOm1tICc7CiAgICAgIGlmICghZm9ybWF0KSByZXR1cm4gJyc7CiAgICAgIHZhciBzZXBhcmF0b3IgPSB0aGlzLm11bHRpcGxlID8gJyB8ICcgOiAnIH4gJzsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC54Rm9ybWF0KGZvcm1hdCk7CiAgICAgIH0pLmpvaW4oc2VwYXJhdG9yKTsKICAgIH0sCiAgICBtb250aDogZnVuY3Rpb24gbW9udGgoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaGFzU3RlcCgnZCcpKSByZXR1cm4gW107CiAgICAgIHZhciBtaW4gPSB0aGlzLm1pbkRhdGUgPyB0aGlzLm1pbkRhdGUuY2xvbmUoKS5zdGFydE9mKCdkYXknKSA6IC1JbmZpbml0eTsKICAgICAgdmFyIG1heCA9IHRoaXMubWF4RGF0ZSA/IHRoaXMubWF4RGF0ZS5jbG9uZSgpLmVuZE9mKCdkYXknKSA6IEluZmluaXR5OwogICAgICByZXR1cm4gdGhpcy5jb3JlLmdldFdlZWtBcnJheSh0aGlzLmRhdGUuY2xvbmUoKSkubWFwKGZ1bmN0aW9uICh3ZWVrSXRlbSkgewogICAgICAgIHJldHVybiB3ZWVrSXRlbS5tYXAoZnVuY3Rpb24gKGRheSkgewogICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIGRhdGU6IGRheSwKICAgICAgICAgICAgZm9ybWF0dGVkOiAnJywKICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLAogICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKCFkYXkpIHJldHVybiBkYXRhOwoKICAgICAgICAgIHZhciBkYXlNb21lbnQgPSBfdGhpcy5jb3JlLm1vbWVudChkYXkpOwoKICAgICAgICAgIGRhdGEuZm9ybWF0dGVkID0gZGF5TW9tZW50LnhEYXRlKCk7CiAgICAgICAgICBkYXRhLnNlbGVjdGVkID0gX3RoaXMuc2VsZWN0ZWREYXRlcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpc1NhbWVEYXkoaXRlbSwgZGF5KTsKICAgICAgICAgIH0pOwogICAgICAgICAgZGF0YS5kaXNhYmxlZCA9IF90aGlzLm1pbkRhdGUgJiYgZGF5TW9tZW50LmNsb25lKCkuc3RhcnRPZignZGF5JykgPCBtaW4gfHwgX3RoaXMubWF4RGF0ZSAmJiBkYXlNb21lbnQuY2xvbmUoKS5lbmRPZignZGF5JykgPiBtYXggfHwgX3RoaXMuY2hlY2tEaXNhYmxlKCdkJywgZGF5TW9tZW50KTsKCiAgICAgICAgICBpZiAoX3RoaXMucmFuZ2UgJiYgIWRhdGEuZGlzYWJsZWQpIHsKICAgICAgICAgICAgdmFyIF90aGlzJHNlbGVjdGVkRGF0ZXMgPSBfc2xpY2VkVG9BcnJheShfdGhpcy5zZWxlY3RlZERhdGVzLCAyKSwKICAgICAgICAgICAgICAgIHN0YXJ0ID0gX3RoaXMkc2VsZWN0ZWREYXRlc1swXSwKICAgICAgICAgICAgICAgIGVuZCA9IF90aGlzJHNlbGVjdGVkRGF0ZXNbMV07CgogICAgICAgICAgICBkYXRhLmlzRmlyc3QgPSBkYXRhLnNlbGVjdGVkICYmIHN0YXJ0ICYmIGlzU2FtZURheShzdGFydCwgZGF5KTsKICAgICAgICAgICAgZGF0YS5pc0xhc3QgPSBkYXRhLnNlbGVjdGVkICYmIGVuZCAmJiBpc1NhbWVEYXkoZW5kLCBkYXkpOwogICAgICAgICAgICBkYXRhLmlzQmV0d2VlbiA9ICFkYXRhLnNlbGVjdGVkICYmIHN0YXJ0ICYmIGVuZCAmJiBkYXkgPiBzdGFydCAmJiBkYXkgPCBlbmQ7CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YS5hdHRyaWJ1dGVzID0gX3RoaXMuZ2V0SGlnaGxpZ2h0cygnZCcsIGRheU1vbWVudCk7CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbW9udGhEYXlzOiBmdW5jdGlvbiBtb250aERheXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnJhbmdlIHx8IHRoaXMuc2VsZWN0ZWREYXRlcy5sZW5ndGggIT09IDEgfHwgIXRoaXMuaG92ZXJlZEl0ZW0pIHsKICAgICAgICByZXR1cm4gdGhpcy5tb250aDsKICAgICAgfQoKICAgICAgdmFyIGRhdGVzID0gW3RoaXMuaG92ZXJlZEl0ZW0sIHRoaXMuc2VsZWN0ZWREYXRlc1swXV07CiAgICAgIGRhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgIH0pOwogICAgICB2YXIgc3RhcnQgPSBkYXRlc1swXSwKICAgICAgICAgIGVuZCA9IGRhdGVzWzFdOwogICAgICByZXR1cm4gdGhpcy5tb250aC5tYXAoZnVuY3Rpb24gKHdlZWtJdGVtKSB7CiAgICAgICAgcmV0dXJuIHdlZWtJdGVtLm1hcChmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKCFkYXRhLmRhdGUpIHJldHVybiBkYXRhOwoKICAgICAgICAgIGlmIChfdGhpczIucmFuZ2UgJiYgIWRhdGEuZGlzYWJsZWQpIHsKICAgICAgICAgICAgdmFyIGRheSA9IGRhdGEuZGF0ZTsKICAgICAgICAgICAgZGF0YS5pc0hvdmVyID0gIWRhdGEuc2VsZWN0ZWQgJiYgZGF5ID4gc3RhcnQgJiYgZGF5IDwgZW5kOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICB5ZWFyczogZnVuY3Rpb24geWVhcnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmhhc1N0ZXAoJ3knKSB8fCB0aGlzLmN1cnJlbnRTdGVwICE9PSAneScpIHJldHVybiBbXTsKICAgICAgdmFyIG1vbWVudCA9IHRoaXMuY29yZS5tb21lbnQ7CiAgICAgIHZhciBtaW4gPSB0aGlzLm1pbkRhdGUgPyB0aGlzLm1pbkRhdGUgOiBtb21lbnQoJzEzMDAnLCAnallZWVknKTsKICAgICAgdmFyIG1heCA9IHRoaXMubWF4RGF0ZSA/IHRoaXMubWF4RGF0ZSA6IG1pbi5jbG9uZSgpLmFkZCgxNTAsICd5ZWFyJyk7CiAgICAgIHZhciBjeSA9IHRoaXMuZGF0ZS54WWVhcigpOwogICAgICByZXR1cm4gdGhpcy5jb3JlLmdldFllYXJzTGlzdChtaW4ueFllYXIoKSwgbWF4LnhZZWFyKCkpLnJldmVyc2UoKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgeWVhciA9IG1vbWVudCgpLnhZZWFyKGl0ZW0pOwogICAgICAgIHllYXIuc2VsZWN0ZWQgPSBjeSA9PT0gaXRlbTsKICAgICAgICB5ZWFyLmRpc2FibGVkID0gX3RoaXMzLmNoZWNrRGlzYWJsZSgneScsIGl0ZW0pOwogICAgICAgIHllYXIuYXR0cmlidXRlcyA9IF90aGlzMy5nZXRIaWdobGlnaHRzKCd5JywgaXRlbSk7CiAgICAgICAgcmV0dXJuIHllYXI7CiAgICAgIH0pOwogICAgfSwKICAgIG1vbnRoczogZnVuY3Rpb24gbW9udGhzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmhhc1N0ZXAoJ20nKSkgewogICAgICAgIHZhciBkYXRlID0gdGhpcy5kYXRlLmNsb25lKCkueFN0YXJ0T2YoJ21vbnRoJyk7CiAgICAgICAgdmFyIG1vbnRocyA9IHRoaXMuY29yZS5nZXRNb250aHNMaXN0KHRoaXMubWluRGF0ZSwgdGhpcy5tYXhEYXRlLCBkYXRlKTsKICAgICAgICBtb250aHMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgbS5zZWxlY3RlZCA9IF90aGlzNC5kYXRlLnhNb250aCgpID09PSBtLnhNb250aCgpOwogICAgICAgICAgbS5kaXNhYmxlZCA9IG0uZGlzYWJsZWQgfHwgX3RoaXM0LmNoZWNrRGlzYWJsZSgnbScsIG0pOwogICAgICAgICAgbS5hdHRyaWJ1dGVzID0gX3RoaXM0LmdldEhpZ2hsaWdodHMoJ20nLCBtKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbW9udGhzOwogICAgICB9CgogICAgICByZXR1cm4gW107CiAgICB9LAogICAgcHJldk1vbnRoRGlzYWJsZWQ6IGZ1bmN0aW9uIHByZXZNb250aERpc2FibGVkKCkgewogICAgICByZXR1cm4gdGhpcy5oYXNTdGVwKCdkJykgJiYgdGhpcy5taW5EYXRlICYmIHRoaXMubWluRGF0ZS5jbG9uZSgpLnhTdGFydE9mKCdtb250aCcpID49IHRoaXMuZGF0ZS5jbG9uZSgpLnhTdGFydE9mKCdtb250aCcpOwogICAgfSwKICAgIG5leHRNb250aERpc2FibGVkOiBmdW5jdGlvbiBuZXh0TW9udGhEaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzU3RlcCgnZCcpICYmIHRoaXMubWF4RGF0ZSAmJiB0aGlzLm1heERhdGUuY2xvbmUoKS54U3RhcnRPZignbW9udGgnKSA8PSB0aGlzLmRhdGUuY2xvbmUoKS54U3RhcnRPZignbW9udGgnKTsKICAgIH0sCiAgICBjYW5Hb1RvZGF5OiBmdW5jdGlvbiBjYW5Hb1RvZGF5KCkgewogICAgICBpZiAoIXRoaXMubWluRGF0ZSAmJiAhdGhpcy5tYXhEYXRlKSByZXR1cm4gdHJ1ZTsKICAgICAgdmFyIG5vdyA9IHRoaXMubm93OwogICAgICB2YXIgbWluID0gdGhpcy5taW5EYXRlICYmIHRoaXMubWluRGF0ZSA8PSBub3c7CiAgICAgIHZhciBtYXggPSB0aGlzLm1heERhdGUgJiYgbm93IDw9IHRoaXMubWF4RGF0ZTsKCiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICd0aW1lJykgewogICAgICAgIGlmICh0aGlzLm1pbkRhdGUpIHsKICAgICAgICAgIG1pbiA9IG5vdy5jbG9uZSgpLmhvdXIodGhpcy5taW5EYXRlLmhvdXIoKSkubWludXRlKHRoaXMubWluRGF0ZS5taW51dGUoKSk7CiAgICAgICAgICBtaW4gPSBtaW4gPD0gbm93OwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMubWF4RGF0ZSkgewogICAgICAgICAgbWF4ID0gdGhpcy5ub3cuY2xvbmUoKS5ob3VyKHRoaXMubWF4RGF0ZS5ob3VyKCkpLm1pbnV0ZSh0aGlzLm1heERhdGUubWludXRlKCkpOwogICAgICAgICAgbWF4ID0gbm93IDw9IG1heDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgdGhpcy5tYXhEYXRlKSByZXR1cm4gbWluICYmIG1heDsKICAgICAgaWYgKHRoaXMubWluRGF0ZSkgcmV0dXJuIG1pbjsKICAgICAgaWYgKHRoaXMubWF4RGF0ZSkgcmV0dXJuIG1heDsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGFsdEZvcm1hdHRlZDogZnVuY3Rpb24gYWx0Rm9ybWF0dGVkKCkgewogICAgICB2YXIgZm9ybWF0ID0gdGhpcy5hbHRGb3JtYXQ7CgogICAgICBpZiAoZm9ybWF0ID09PSAnJyB8fCBmb3JtYXQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgICBjYXNlICd0aW1lJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ0hIOm1tOnNzIFtHTVRdWlonOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdkYXRldGltZSc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdZWVlZLU1NLUREIEhIOm1tOnNzIFtHTVRdWlonOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdkYXRlJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ1lZWVktTU0tREQnOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICd5ZWFyJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ1lZWVknOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdtb250aCc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdNTSc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3llYXItbW9udGgnOgogICAgICAgICAgICBmb3JtYXQgPSAnWVlZWS1NTSc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMub3V0cHV0Lm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmZvcm1hdChmb3JtYXQpOwogICAgICB9KS5qb2luKCcgfiAnKTsKICAgIH0sCiAgICBzZWxmRm9ybWF0OiBmdW5jdGlvbiBzZWxmRm9ybWF0KCkgewogICAgICB2YXIgZm9ybWF0ID0gdGhpcy5mb3JtYXQ7CgogICAgICBpZiAoWycnLCB1bmRlZmluZWQsICdkYXRlJ10uaW5kZXhPZihmb3JtYXQpICE9PSAtMSkgewogICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgICBjYXNlICd0aW1lJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ0hIOm1tJzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOgogICAgICAgICAgICBmb3JtYXQgPSAnallZWVkvak1NL2pERCBISDptbSc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2RhdGUnOgogICAgICAgICAgICBmb3JtYXQgPSAnallZWVkvak1NL2pERCc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3llYXInOgogICAgICAgICAgICBmb3JtYXQgPSAnallZWVknOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdtb250aCc6CiAgICAgICAgICAgIGZvcm1hdCA9ICdqTU0nOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICd5ZWFyLW1vbnRoJzoKICAgICAgICAgICAgZm9ybWF0ID0gJ2pZWVlZL2pNTSc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGZvcm1hdDsKICAgIH0sCiAgICBzZWxmSW5wdXRGb3JtYXQ6IGZ1bmN0aW9uIHNlbGZJbnB1dEZvcm1hdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5wdXRGb3JtYXQgPT09ICcnIHx8IHRoaXMuaW5wdXRGb3JtYXQgPT09IHVuZGVmaW5lZCA/IHRoaXMuc2VsZkZvcm1hdCA6IHRoaXMuaW5wdXRGb3JtYXQ7CiAgICB9LAogICAgb3V0cHV0VmFsdWU6IGZ1bmN0aW9uIG91dHB1dFZhbHVlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBvdXRwdXQgPSBjbG9uZURhdGVzKHRoaXMub3V0cHV0KTsKICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuc2VsZkZvcm1hdDsKICAgICAgdmFyIGlzRGF0ZSA9IHRoaXMudmFsdWUgaW5zdGFuY2VvZiBEYXRlIHx8IHRoaXMuZm9ybWF0ID09PSAnZGF0ZSc7CiAgICAgIHJldHVybiBvdXRwdXQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgL2pcdy8udGVzdChmb3JtYXQpICYmIGl0ZW0ubG9jYWxlKCdmYScpOwoKICAgICAgICBfdGhpczUuc2V0VGltZXpvbmUoaXRlbSwgJ291dCcpOwoKICAgICAgICByZXR1cm4gaXNEYXRlID8gaXRlbS50b0RhdGUoKSA6IGl0ZW0uZm9ybWF0KGZvcm1hdCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGZEaXNwbGF5Rm9ybWF0OiBmdW5jdGlvbiBzZWxmRGlzcGxheUZvcm1hdCgpIHsKICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuZGlzcGxheUZvcm1hdCB8fCB0aGlzLnNlbGZGb3JtYXQ7CiAgICAgIHZhciBsb2NhbGVGb3JtYXQgPSB0aGlzLmxvY2FsZURhdGEuY29uZmlnLmRpc3BsYXlGb3JtYXQ7CgogICAgICBpZiAobG9jYWxlRm9ybWF0KSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBsb2NhbGVGb3JtYXQgPT09ICdmdW5jdGlvbicgPyBsb2NhbGVGb3JtYXQodGhpcykgOiBsb2NhbGVGb3JtYXQ7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxvY2FsZURhdGEubmFtZSAhPT0gJ2ZhJykgewogICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKC9qL2csICcnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZvcm1hdDsKICAgIH0sCiAgICBkaXNwbGF5VmFsdWU6IGZ1bmN0aW9uIGRpc3BsYXlWYWx1ZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgZm9ybWF0ID0gdGhpcy5zZWxmRGlzcGxheUZvcm1hdDsKICAgICAgcmV0dXJuIHRoaXMub3V0cHV0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciBvdXRwdXQgPSBpdGVtLmNsb25lKCk7CiAgICAgICAgL2pcdy8udGVzdChmb3JtYXQpICYmIG91dHB1dC5sb2NhbGUoJ2ZhJyk7CiAgICAgICAgcmV0dXJuIF90aGlzNi5jb252ZXJ0VG9Mb2NhbGVOdW1iZXIob3V0cHV0LmZvcm1hdChmb3JtYXQpKTsKICAgICAgfSkuam9pbignIH4gJyk7CiAgICB9LAogICAgaXNEaXNhYmxlVGltZTogZnVuY3Rpb24gaXNEaXNhYmxlVGltZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzU3RlcCgndCcpICYmIHRoaXMuY2hlY2tEaXNhYmxlKCd0JywgdGhpcy50aW1lKTsKICAgIH0sCiAgICB0aW1lQXR0cmlidXRlczogZnVuY3Rpb24gdGltZUF0dHJpYnV0ZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmhhc1N0ZXAoJ3QnKSA/IHRoaXMuZ2V0SGlnaGxpZ2h0cygndCcsIHRoaXMudGltZSkgOiB7fTsKICAgIH0sCiAgICBjYW5TdWJtaXQ6IGZ1bmN0aW9uIGNhblN1Ym1pdCgpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGUpIHJldHVybiB0cnVlOwogICAgICB2YXIgY2FuID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuaGFzU3RlcCgndCcpKSBjYW4gPSAhdGhpcy5pc0Rpc2FibGVUaW1lOwogICAgICBpZiAoY2FuICYmIHRoaXMudHlwZSAhPT0gJ3RpbWUnKSBjYW4gPSAhdGhpcy5jaGVja0Rpc2FibGUoJ2QnLCB0aGlzLmRhdGUpOwogICAgICByZXR1cm4gY2FuOwogICAgfSwKICAgIHdlZWtEYXlzOiBmdW5jdGlvbiB3ZWVrRGF5cygpIHsKICAgICAgdmFyIG5hbWVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvcmUubW9tZW50KCkubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKCkpKTsKICAgICAgdmFyIGRvdyA9IHRoaXMuY29yZS5sb2NhbGUuY29uZmlnLmRvdzsKCiAgICAgIHdoaWxlIChkb3cgPiAwKSB7CiAgICAgICAgbmFtZXMucHVzaChuYW1lcy5zaGlmdCgpKTsKICAgICAgICBkb3ctLTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5hbWVzOwogICAgfSwKICAgIGxhbmc6IGZ1bmN0aW9uIGxhbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEuY29uZmlnLmxhbmc7CiAgICB9LAogICAgaXNQb3BvdmVyOiBmdW5jdGlvbiBpc1BvcG92ZXIoKSB7CiAgICAgIHJldHVybiAodGhpcy5wb3BvdmVyID09PSAnJyB8fCB0aGlzLnBvcG92ZXIpICYmIHRoaXMud2luZG93V2lkdGggPiA0ODA7CiAgICB9LAogICAgaXNEYXRhQXJyYXk6IGZ1bmN0aW9uIGlzRGF0YUFycmF5KCkgewogICAgICByZXR1cm4gdGhpcy5yYW5nZSB8fCB0aGlzLm11bHRpcGxlOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHR5cGU6IHsKICAgICAgaGFuZGxlcjogJ3NldFR5cGUnLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICB2aWV3OiB7CiAgICAgIGhhbmRsZXI6ICdzZXRWaWV3JywKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcjogJ3VwZGF0ZURhdGVzJywKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgbWluOiB7CiAgICAgIGhhbmRsZXI6ICdzZXRNaW5NYXgnLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBtYXg6IHsKICAgICAgaGFuZGxlcjogJ3NldE1pbk1heCcsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIHRpbWV6b25lOiB7CiAgICAgIGhhbmRsZXI6ICd1cGRhdGVEYXRlcycKICAgIH0sCiAgICBpbmxpbmU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHRoaXMudmlzaWJsZSA9ICEhdmFsOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwpIHRoaXMudmlzaWJsZSA9IGZhbHNlO2Vsc2UgaWYgKHRoaXMuaW5saW5lKSB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBzZWxlY3RlZERhdGU6IGZ1bmN0aW9uIHNlbGVjdGVkRGF0ZSh2YWwsIG9sZCkgewogICAgICB0aGlzLnNldERpcmVjdGlvbignZGlyZWN0aW9uQ2xhc3MnLCB2YWwsIG9sZCk7CiAgICB9LAogICAgZGF0ZTogZnVuY3Rpb24gZGF0ZSh2YWwsIG9sZCkgewogICAgICB0aGlzLnNldERpcmVjdGlvbignZGlyZWN0aW9uQ2xhc3NEYXRlJywgdmFsLCBvbGQpOwogICAgICBpZiAodGhpcy5pc0xvd2VyKHRoaXMuZGF0ZSkpIHRoaXMuZGF0ZSA9IHRoaXMubWluRGF0ZS5jbG9uZSgpOwogICAgICBpZiAodGhpcy5pc01vcmUodGhpcy5kYXRlKSkgdGhpcy5kYXRlID0gdGhpcy5tYXhEYXRlLmNsb25lKCk7CiAgICB9LAogICAgdGltZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCwgb2xkKSB7CiAgICAgICAgaWYgKHRoaXMuaGFzU3RlcCgndCcpICYmIHRoaXMucm91bmRNaW51dGUpIHsKICAgICAgICAgIHZhciB0aW1lID0gdGhpcy50aW1lLmNsb25lKCk7CiAgICAgICAgICB2YXIgam0gPSB0aGlzLmp1bXBNaW51dGU7CiAgICAgICAgICB2YXIgbSA9IChqbSAtIHRpbWUubWludXRlKCkgJSBqbSkgJSBqbTsKICAgICAgICAgIHRpbWUuYWRkKHsKICAgICAgICAgICAgbTogbQogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKHRpbWUudmFsdWVPZigpICE9PSB0aGlzLnRpbWUudmFsdWVPZigpKSB7CiAgICAgICAgICAgIHRoaXMudGltZSA9IHRpbWU7IC8vIEB0b2RvOiB0aGlzIGxpbmUgc2hvdWxkIGFwcGx5IHRpbWUgdG8gY3VycmVudCBkYXRlIHNlbGVjdGlvbiwKICAgICAgICAgICAgLy8gbm90IGFsbCBvZiB0aGVtCgogICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkLnNldCh7CiAgICAgICAgICAgICAgICBtOiB0aW1lLm1pbnV0ZSgpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKG9sZCkgdGhpcy5zZXREaXJlY3Rpb24oJ2RpcmVjdGlvbkNsYXNzVGltZScsIHZhbCwgb2xkKTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgdmlzaWJsZTogZnVuY3Rpb24gdmlzaWJsZSh2YWwpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAodmFsKSB7CiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybiB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgICAgICBpZiAodGhpcy50eXBlID09PSAnZGF0ZXRpbWUnICYmIHRoaXMudmlldyA9PT0gJ2RheScpIHRoaXMuZ29TdGVwKCdkJyk7CiAgICAgICAgaWYgKHRoaXMudmlldyAhPT0gJ2RheScpIHRoaXMuZ29TdGVwKHRoaXMuc2hvcnRDb2Rlc1t0aGlzLnZpZXddIHx8ICdkJyk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzNy5hcHBlbmRUbykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF90aGlzNy5hcHBlbmRUbyk7CiAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKF90aGlzNy4kcmVmcy5waWNrZXIpOwogICAgICAgICAgICB9IGNhdGNoIChlcikgewogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQ2Fubm90IGFwcGVuZCBwaWNrZXIgdG8gXCIiLmNvbmNhdChfdGhpczcuYXBwZW5kVG8sICJcIiEiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoZWNrU2Nyb2xsKCk7CiAgICAgICAgdGhpcy5zZXRQbGFjZW1lbnQoKTsKICAgICAgICB0aGlzLiRlbWl0KCdvcGVuJywgdGhpcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuaW5saW5lICYmICF0aGlzLmRpc2FibGVkKSByZXR1cm4gdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZScsIHRoaXMpOwogICAgICB9CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdyh2YWwpIHsKICAgICAgdGhpcy52aXNpYmxlID0gdmFsOwogICAgfSwKICAgIGxvY2FsZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdmFyIGxvY2FsZXMgPSB2YWwudG9TdHJpbmcoKS5zcGxpdCgnLCcpOwogICAgICAgIHRoaXMubG9jYWxlcyA9IGxvY2FsZXMubGVuZ3RoID8gbG9jYWxlcyA6IFsnZmEnXTsKCiAgICAgICAgaWYgKHRoaXMuY29yZS5sb2NhbGUubmFtZSAhPT0gdGhpcy5sb2NhbGVzWzBdKSB7CiAgICAgICAgICB0aGlzLnNldExvY2FsZSh0aGlzLmxvY2FsZXNbMF0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGxvY2FsZUNvbmZpZzogewogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoY29uZmlnKSB7CiAgICAgICAgdGhpcy5jb3JlLnNldExvY2FsZXNDb25maWcoY29uZmlnKTsKICAgICAgICB0aGlzLnNldExvY2FsZSh0aGlzLmxvY2FsZURhdGEubmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICAnbG9jYWxlRGF0YS5uYW1lJzogZnVuY3Rpb24gbG9jYWxlRGF0YU5hbWUoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2xvY2FsZUNoYW5nZScsIHRoaXMubG9jYWxlRGF0YSk7CiAgICAgIHRoaXMuc2V0TWluTWF4KCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgdGhpcy51cGRhdGVOb3dJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXM4Lm5vdyA9IF90aGlzOC5jb3JlLm1vbWVudCgpOwogICAgfSwgMTAwMCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICB2YXIgYWRkRXZlbnQgPSBmdW5jdGlvbiBhZGRFdmVudChlbCwgdHlwZSwgaGFuZGxlcikgewogICAgICAgIGlmIChlbC5hdHRhY2hFdmVudCkgZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGhhbmRsZXIpO2Vsc2UgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTsKICAgICAgfTsKCiAgICAgIHZhciBsaXZlID0gZnVuY3Rpb24gbGl2ZShzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrLCBjb250ZXh0KSB7CiAgICAgICAgYWRkRXZlbnQoY29udGV4dCB8fCBkb2N1bWVudCwgZXZlbnQsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgZm91bmQ7CiAgICAgICAgICB2YXIgZWwgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CgogICAgICAgICAgd2hpbGUgKGVsICYmICEoZm91bmQgPSBlbC5pZCA9PT0gc2VsZWN0b3IpKSB7CiAgICAgICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZm91bmQpIGNhbGxiYWNrLmNhbGwoZWwsIGUpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgaWYgKF90aGlzOS5lbGVtZW50ICYmICFfdGhpczkuZWRpdGFibGUpIHsKICAgICAgICBsaXZlKF90aGlzOS5lbGVtZW50LCAnY2xpY2snLCBfdGhpczkuZm9jdXMpOwogICAgICB9CiAgICB9KTsKICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUgPSBlIHx8IGV2ZW50OwogICAgICB2YXIgY29kZSA9IGUua2V5Q29kZTsKICAgICAgaWYgKChjb2RlID09PSA5IHx8IGNvZGUgPT09IDI3KSAmJiBfdGhpczkudmlzaWJsZSkgX3RoaXM5LnZpc2libGUgPSBmYWxzZTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemUsIHRydWUpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25XaW5kb3dDbGljaywgdHJ1ZSk7CiAgfSwKICBvbkJlZm9yZVVubW91bnQ6IGZ1bmN0aW9uIG9uQmVmb3JlVW5tb3VudCgpIHsKICAgIGNvbnNvbGUubG9nKCdvbkJlZm9yZVVubW91bnQnKTsKICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudXBkYXRlTm93SW50ZXJ2YWwpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemUsIHRydWUpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25XaW5kb3dDbGljaywgdHJ1ZSk7CiAgICB2YXIgcGlja2VyID0gdGhpcy4kcmVmcy5waWNrZXI7CgogICAgaWYgKHRoaXMuYXBwZW5kVG8gJiYgcGlja2VyICYmIHBpY2tlci4kZWwgJiYgcGlja2VyLiRlbC5wYXJlbnROb2RlKSB7CiAgICAgIHBpY2tlci4kZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwaWNrZXIuJGVsKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG5leHRTdGVwOiBmdW5jdGlvbiBuZXh0U3RlcCgpIHsKICAgICAgdmFyIHN0ZXAgPSB0aGlzLnN0ZXAgKyAxOwogICAgICBpZiAodGhpcy5jb21wYWN0VGltZSAmJiB0aGlzLnR5cGUgPT09ICdkYXRldGltZScpIHN0ZXAgKz0gMTsKCiAgICAgIGlmICh0aGlzLnN0ZXBzLmxlbmd0aCA8PSBzdGVwKSB7CiAgICAgICAgdmFyIHBhc3NTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWREYXRlcy5sZW5ndGggPj0gKHRoaXMucmFuZ2UgPyAyIDogMSk7CgogICAgICAgIGlmICgodGhpcy5hdXRvU3VibWl0IHx8IHRoaXMuaW5saW5lKSAmJiBwYXNzU2VsZWN0ZWQpIHsKICAgICAgICAgIHRoaXMuc3VibWl0KCF0aGlzLm11bHRpcGxlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zdGVwKys7CiAgICAgICAgdGhpcy5nb1N0ZXAodGhpcy5zdGVwKTsKICAgICAgfQogICAgfSwKICAgIGdvU3RlcDogZnVuY3Rpb24gZ29TdGVwKGkpIHsKICAgICAgdGhpcy5zdGVwID0gdHlwZW9mIGkgPT09ICdudW1iZXInID8gaSA6IHRoaXMuc3RlcHMuaW5kZXhPZihpKTsKICAgICAgdGhpcy5jaGVja1Njcm9sbCgpOwogICAgfSwKICAgIGNoZWNrU2Nyb2xsOiBmdW5jdGlvbiBjaGVja1Njcm9sbCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIHN0ZXAgPSB0aGlzLmN1cnJlbnRTdGVwOwoKICAgICAgaWYgKHN0ZXAgPT09ICd5JyB8fCBzdGVwID09PSAnbScgJiYgdGhpcy52aXNpYmxlKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgY29udGFpbmVyID0gX3RoaXMxMC4kcmVmc1t7CiAgICAgICAgICAgIHk6ICd5ZWFyJywKICAgICAgICAgICAgbTogJ21vbnRoJwogICAgICAgICAgfVtzdGVwXV07CgogICAgICAgICAgaWYgKGNvbnRhaW5lcikgewogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnZwZC1zZWxlY3RlZCcpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdGVkICYmICdzY3JvbGxJbnRvVmlldycgaW4gc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZWN0ZWQuc2Nyb2xsSW50b1ZpZXcoewogICAgICAgICAgICAgICAgICBibG9jazogJ2NlbnRlcicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVyKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RlZC5zY3JvbGxJbnRvVmlldygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0KICAgIH0sCiAgICBmYXN0VXBkYXRlQ291bnRlcjogZnVuY3Rpb24gZmFzdFVwZGF0ZUNvdW50ZXIoZSkgewogICAgICBpZiAoIWUpIHRoaXMudGltZURhdGEudHJhbnNpdGlvblNwZWVkID0gMzAwOwogICAgICB0aGlzLmNsYXNzRmFzdENvdW50ZXIgPSBlID8gJ2Zhc3QtdXBkYXRpbmcnIDogJyc7CiAgICB9LAogICAgbmV4dE1vbnRoOiBmdW5jdGlvbiBuZXh0TW9udGgoKSB7CiAgICAgIHRoaXMuZGF0ZSA9IHRoaXMuZGF0ZS5jbG9uZSgpLnhBZGQoMSwgJ21vbnRoJyk7CiAgICB9LAogICAgcHJldk1vbnRoOiBmdW5jdGlvbiBwcmV2TW9udGgoKSB7CiAgICAgIHRoaXMuZGF0ZSA9IHRoaXMuZGF0ZS5jbG9uZSgpLnhBZGQoLTEsICdtb250aCcpOwogICAgfSwKICAgIHNlbGVjdERheTogZnVuY3Rpb24gc2VsZWN0RGF5KGRheSkgewogICAgICBpZiAoIWRheS5kYXRlIHx8IGRheS5kaXNhYmxlZCkgcmV0dXJuOwogICAgICB2YXIgZGF0ZSA9IHRoaXMuY29yZS5tb21lbnQoZGF5LmRhdGUpOwogICAgICBkYXRlLnNldCh7CiAgICAgICAgaG91cjogdGhpcy50aW1lLmhvdXIoKSwKICAgICAgICBtaW51dGU6IHRoaXMudGltZS5taW51dGUoKSwKICAgICAgICBzZWNvbmQ6IDAKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0ZSA9IGRhdGUuY2xvbmUoKTsKICAgICAgdGhpcy50aW1lID0gZGF0ZS5jbG9uZSgpOwoKICAgICAgaWYgKHRoaXMucmFuZ2UpIHsKICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aDsKCiAgICAgICAgaWYgKCFsZW5ndGggfHwgbGVuZ3RoID4gMSkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW2RhdGUuY2xvbmUoKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5wdXNoKGRhdGUuY2xvbmUoKSk7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgIHZhciBleGlzdHMgPSB0aGlzLnNlbGVjdGVkRGF0ZXMuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gZC52YWx1ZU9mKCkgPT09IGRhdGUudmFsdWVPZigpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoZXhpc3RzID4gLTEpIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5zcGxpY2UoZXhpc3RzLCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzLnB1c2goZGF0ZS5jbG9uZSgpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW2RhdGUuY2xvbmUoKV07CiAgICAgIH0KCiAgICAgIHRoaXMubmV4dFN0ZXAoKTsKICAgIH0sCiAgICBzZWxlY3RZZWFyOiBmdW5jdGlvbiBzZWxlY3RZZWFyKHllYXIpIHsKICAgICAgaWYgKHllYXIuZGlzYWJsZWQpIHJldHVybjsKICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLmNsb25lKCkueFllYXIoeWVhci54WWVhcigpKTsKICAgICAgdGhpcy5uZXh0U3RlcCgpOwogICAgfSwKICAgIHNlbGVjdE1vbnRoOiBmdW5jdGlvbiBzZWxlY3RNb250aChtb250aCkgewogICAgICBpZiAobW9udGguZGlzYWJsZWQpIHJldHVybjsKICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLmNsb25lKCkueE1vbnRoKG1vbnRoLnhNb250aCgpKTsKICAgICAgdGhpcy5uZXh0U3RlcCgpOwogICAgfSwKICAgIHNldFRpbWU6IGZ1bmN0aW9uIHNldFRpbWUodiwgaykgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB2YXIgdGltZSA9IHRoaXMudGltZS5jbG9uZSgpOwogICAgICB0aW1lLmFkZChfZGVmaW5lUHJvcGVydHkoe30sIGssIHYpKTsKCiAgICAgIGlmICh0aGlzLnR5cGUgIT09ICd0aW1lJykgewogICAgICAgIHZhciBkYXRlID0gdGhpcy5kYXRlLmNsb25lKCk7CiAgICAgICAgdGltZS5zZXQoewogICAgICAgICAgeWVhcjogZGF0ZS55ZWFyKCksCiAgICAgICAgICBtb250aDogZGF0ZS5tb250aCgpLAogICAgICAgICAgZGF0ZTogZGF0ZS5kYXRlKCkKICAgICAgICB9KTsKICAgICAgICBkYXRlLnNldCh7CiAgICAgICAgICBob3VyOiB0aW1lLmhvdXIoKSwKICAgICAgICAgIG1pbnV0ZTogdGltZS5taW51dGUoKQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzTG93ZXIodGltZSkpIHRpbWUgPSB0aGlzLm1pbkRhdGUuY2xvbmUoKTsKICAgICAgaWYgKHRoaXMuaXNNb3JlKHRpbWUpKSB0aW1lID0gdGhpcy5tYXhEYXRlLmNsb25lKCk7CiAgICAgIHRoaXMudGltZSA9IHRpbWU7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdmFyIGRlZiA9IG5vdyAtIHRoaXMudGltZURhdGEubGFzdFVwZGF0ZTsKICAgICAgaWYgKGRlZiA+IDIwICYmIGRlZiA8IDMwMCkgdGhpcy50aW1lRGF0YS50cmFuc2l0aW9uU3BlZWQgPSBkZWY7CiAgICAgIHRoaXMudGltZURhdGEubGFzdFVwZGF0ZSA9IG5vdzsKICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVEYXRhLnRpbWVvdXQpOwogICAgICB0aGlzLnRpbWVEYXRhLnRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMS50aW1lRGF0YS50cmFuc2l0aW9uU3BlZWQgPSAzMDA7CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgd2hlZWxTZXRUaW1lOiBmdW5jdGlvbiB3aGVlbFNldFRpbWUoaywgZSkgewogICAgICB2YXIgZGVsdGEgPSBrID09PSAnbScgPyB0aGlzLmp1bXBNaW51dGUgOiAxOwogICAgICB0aGlzLnNldFRpbWUoZS53aGVlbERlbHRhWSA+IDAgPyBkZWx0YSA6IC1kZWx0YSwgayk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHZhciBjbG9zZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKICAgICAgdmFyIHN0ZXBzID0gdGhpcy5zdGVwcy5sZW5ndGggLSAxOwogICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRGF0ZXM7CiAgICAgIGlmICh0aGlzLmNvbXBhY3RUaW1lICYmIHRoaXMudHlwZSA9PT0gJ2RhdGV0aW1lJykgc3RlcHMgLT0gMTsKICAgICAgaWYgKHRoaXMuc3RlcCA8IHN0ZXBzKSByZXR1cm4gdGhpcy5uZXh0U3RlcCgpOwoKICAgICAgaWYgKHRoaXMuaGFzU3RlcCgndCcpKSB7CiAgICAgICAgdmFyIHQgPSB7CiAgICAgICAgICBob3VyOiB0aGlzLnRpbWUuaG91cigpLAogICAgICAgICAgbWludXRlOiB0aGlzLnRpbWUubWludXRlKCkKICAgICAgICB9OwogICAgICAgIHRoaXMuZGF0ZSA9IHRoaXMuZGF0ZS5zZXQodCkuY2xvbmUoKTsKICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBzZWxlY3RlZC5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBkLnNldCh0KS5jbG9uZSgpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoWyd5ZWFyJywgJ21vbnRoJywgJ3llYXItbW9udGgnXS5pbmRleE9mKHRoaXMudHlwZSkgIT09IC0xKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gc2VsZWN0ZWQubWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczEyLmRhdGUuY2xvbmUoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmFuZ2UgJiYgc2VsZWN0ZWQubGVuZ3RoID4gMSkgewogICAgICAgIHNlbGVjdGVkWzBdLnhTdGFydE9mKCdkYXknKTsKICAgICAgICBzZWxlY3RlZFsxXS54RW5kT2YoJ2RheScpOwogICAgICB9CgogICAgICB0aGlzLm91dHB1dCA9IGNsb25lRGF0ZXMoc2VsZWN0ZWQpOwogICAgICBpZiAoY2xvc2UpIHRoaXMudmlzaWJsZSA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuaXNEYXRhQXJyYXkpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMub3V0cHV0VmFsdWUpOwogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIGNsb25lRGF0ZXMoc2VsZWN0ZWQpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMub3V0cHV0VmFsdWVbMF0pOwogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHNlbGVjdGVkWzBdLmNsb25lKCkpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlRGF0ZXM6IGZ1bmN0aW9uIHVwZGF0ZURhdGVzKHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaXNEYXRhQXJyYXkgJiYgIXBheWxvYWQpIHBheWxvYWQgPSBbXTsKICAgICAgdmFyIHBheWxvYWRJc0FycmF5ID0gcGF5bG9hZCBpbnN0YW5jZW9mIEFycmF5OwoKICAgICAgdmFyIGdldERhdGUgPSBmdW5jdGlvbiBnZXREYXRlKGlucHV0KSB7CiAgICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICAgIHZhciBkYXRlOwogICAgICAgIHZhciBzdGFydFZhbHVlID0gX3RoaXMxMy52YWx1ZSBpbnN0YW5jZW9mIEFycmF5ID8gX3RoaXMxMy52YWx1ZVtpbmRleF0gOiBfdGhpczEzLnZhbHVlOwoKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGlzT2JqZWN0ID0gX3R5cGVvZihpbnB1dCkgPT09ICdvYmplY3QnOwoKICAgICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIERhdGUpIHsKICAgICAgICAgICAgZGF0ZSA9IF90aGlzMTMuZ2V0TW9tZW50KGlucHV0KTsKICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgJiYgaXNPYmplY3QgJiYgJ2Nsb25lJyBpbiBpbnB1dCkgewogICAgICAgICAgICBkYXRlID0gaW5wdXQuY2xvbmUoKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IG51bGwgfHwgIWlzT2JqZWN0KSB7CiAgICAgICAgICAgIGRhdGUgPSBfdGhpczEzLmdldE1vbWVudChpbnB1dCB8fCBzdGFydFZhbHVlIHx8IF90aGlzMTMuaW5pdGlhbFZhbHVlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRlID0gZGF0ZS5pc1ZhbGlkKCkgPyBkYXRlIDogX3RoaXMxMy5jb3JlLm1vbWVudCgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGRhdGUgPSBfdGhpczEzLmNvcmUubW9tZW50KCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczEzLnNldFRpbWV6b25lKGRhdGUsICdpbicpOwoKICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgfTsKCiAgICAgIGlmIChwYXlsb2FkSXNBcnJheSkgewogICAgICAgIHRoaXMuZGF0ZSA9IGdldERhdGUocGF5bG9hZFswXSk7CiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gcGF5bG9hZC5tYXAoZ2V0RGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kYXRlID0gZ2V0RGF0ZShwYXlsb2FkKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmhhc1N0ZXAoJ3QnKSkgdGhpcy5kYXRlLnNldCh7CiAgICAgICAgaG91cjogMCwKICAgICAgICBtaW51dGU6IDAsCiAgICAgICAgc2Vjb25kOiAwCiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaXNMb3dlcih0aGlzLmRhdGUpKSB7CiAgICAgICAgdGhpcy5kYXRlID0gdGhpcy5taW5EYXRlLmNsb25lKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01vcmUodGhpcy5kYXRlKSkgewogICAgICAgIHRoaXMuZGF0ZSA9IHRoaXMubWF4RGF0ZS5jbG9uZSgpOwogICAgICB9CgogICAgICBpZiAoIXBheWxvYWRJc0FycmF5KSB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbdGhpcy5kYXRlLmNsb25lKCldOwogICAgICB0aGlzLnRpbWUgPSB0aGlzLmRhdGUuY2xvbmUoKTsKCiAgICAgIGlmICh0aGlzLnZhbHVlICE9PSAnJyAmJiB0aGlzLnZhbHVlICE9PSBudWxsICYmIHRoaXMudmFsdWUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5vdXRwdXQgPSBjbG9uZURhdGVzKHRoaXMuc2VsZWN0ZWREYXRlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vdXRwdXQgPSBbXTsgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICB9CiAgICB9LAogICAgZ29Ub2RheTogZnVuY3Rpb24gZ29Ub2RheSgpIHsKICAgICAgdmFyIG5vdyA9IHRoaXMuY29yZS5tb21lbnQoKTsKICAgICAgaWYgKCF0aGlzLmhhc1N0ZXAoJ3QnKSkgbm93LnNldCh7CiAgICAgICAgaG91cjogMCwKICAgICAgICBtaW51dGU6IDAsCiAgICAgICAgc2Vjb25kOiAwCiAgICAgIH0pOwogICAgICB0aGlzLmRhdGUgPSBub3cuY2xvbmUoKTsKICAgICAgdGhpcy50aW1lID0gbm93LmNsb25lKCk7CiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFtub3cuY2xvbmUoKV07CiAgICB9LAogICAgc2V0VHlwZTogZnVuY3Rpb24gc2V0VHlwZSgpIHsKICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICBjYXNlICdkYXRlJzoKICAgICAgICAgIHRoaXMuc3RlcHMgPSBbJ3knLCAnbScsICdkJ107CiAgICAgICAgICB0aGlzLmdvU3RlcCgnZCcpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2RhdGV0aW1lJzoKICAgICAgICAgIHRoaXMuc3RlcHMgPSBbJ3knLCAnbScsICdkJywgJ3QnXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCdkJyk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAneWVhcic6CiAgICAgICAgICB0aGlzLnN0ZXBzID0gWyd5J107CiAgICAgICAgICB0aGlzLmdvU3RlcCgneScpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ21vbnRoJzoKICAgICAgICAgIHRoaXMuc3RlcHMgPSBbJ20nXTsKICAgICAgICAgIHRoaXMuZ29TdGVwKCdtJyk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAndGltZSc6CiAgICAgICAgICB0aGlzLnN0ZXBzID0gWyd0J107CiAgICAgICAgICB0aGlzLmdvU3RlcCgndCcpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3llYXItbW9udGgnOgogICAgICAgICAgdGhpcy5zdGVwcyA9IFsneScsICdtJ107CiAgICAgICAgICB0aGlzLmdvU3RlcCgneScpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBzZXRWaWV3OiBmdW5jdGlvbiBzZXRWaWV3KCkgewogICAgICB2YXIgcyA9IHRoaXMuc2hvcnRDb2Rlc1t0aGlzLnZpZXddOwogICAgICBpZiAodGhpcy5oYXNTdGVwKHMpKSB0aGlzLmdvU3RlcChzKTsKICAgIH0sCiAgICBzZXREaXJlY3Rpb246IGZ1bmN0aW9uIHNldERpcmVjdGlvbihwcm9wLCB2YWwsIG9sZCkgewogICAgICB0aGlzW3Byb3BdID0gdmFsID4gb2xkID8gJ2RpcmVjdGlvbi1uZXh0JyA6ICdkaXJlY3Rpb24tcHJldic7CiAgICB9LAogICAgc2V0TWluTWF4OiBmdW5jdGlvbiBzZXRNaW5NYXgoKSB7CiAgICAgIHZhciBtaW4gPSB0aGlzLmdldE1vbWVudCh0aGlzLm1pbik7CiAgICAgIHZhciBtYXggPSB0aGlzLmdldE1vbWVudCh0aGlzLm1heCk7CiAgICAgIHRoaXMubWluRGF0ZSA9IHRoaXMubWluICYmIG1pbi5pc1ZhbGlkKCkgPyBtaW4gOiBmYWxzZTsKICAgICAgdGhpcy5tYXhEYXRlID0gdGhpcy5tYXggJiYgbWF4LmlzVmFsaWQoKSA/IG1heCA6IGZhbHNlOwogICAgfSwKICAgIGdldE1vbWVudDogZnVuY3Rpb24gZ2V0TW9tZW50KGRhdGUpIHsKICAgICAgdmFyIGQ7CiAgICAgIHZhciBtb21lbnQgPSB0aGlzLmNvcmUubW9tZW50OwogICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBtb21lbnQoZGF0ZSk7CgogICAgICBpZiAodGhpcy5zZWxmSW5wdXRGb3JtYXQgPT09ICd4JyB8fCB0aGlzLnNlbGZJbnB1dEZvcm1hdCA9PT0gJ3VuaXgnKSB7CiAgICAgICAgZCA9IG1vbWVudChkYXRlLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxMCA/IGRhdGUgKiAxMDAwIDogZGF0ZSAqIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoZGF0ZSkgewogICAgICAgICAgICB2YXIgYSA9IG1vbWVudChkYXRlLCB0aGlzLnNlbGZJbnB1dEZvcm1hdCk7CiAgICAgICAgICAgIHZhciBiID0gbW9tZW50KGRhdGUsIHRoaXMuc2VsZkZvcm1hdCk7CiAgICAgICAgICAgIHZhciBub3cgPSBtb21lbnQoKTsKICAgICAgICAgICAgdmFyIHllYXIgPSBub3cueFllYXIoKTsKCiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdtb250aCcpIHsKICAgICAgICAgICAgICBhLnhZZWFyKHllYXIpOwogICAgICAgICAgICAgIGIueFllYXIoeWVhcik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAndGltZScpIHsKICAgICAgICAgICAgICBhID0gbm93LmNsb25lKCkuc2V0KHsKICAgICAgICAgICAgICAgIGg6IGEuaG91cigpLAogICAgICAgICAgICAgICAgbTogYS5taW51dGUoKSwKICAgICAgICAgICAgICAgIHM6IDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBiID0gYS5jbG9uZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYS55ZWFyKCkgIT09IGIueWVhcigpICYmIGEueWVhcigpIDwgMTkwMCkgewogICAgICAgICAgICAgIGQgPSBiLmNsb25lKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZCA9IGEuY2xvbmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZCA9IG1vbWVudCgpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVyKSB7CiAgICAgICAgICBkID0gbW9tZW50KCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZDsKICAgIH0sCiAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoZSkgewogICAgICBpZiAodGhpcy5lZGl0YWJsZSkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmlucHV0KSB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICBlLnRhcmdldC5ibHVyKCk7CiAgICAgICAgICB0aGlzLnZpc2libGUgPSAhdGhpcy52aXNpYmxlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaGFzU3RlcDogZnVuY3Rpb24gaGFzU3RlcChzdGVwKSB7CiAgICAgIHJldHVybiB0aGlzLnN0ZXBzLmluZGV4T2Yoc3RlcCkgIT09IC0xOwogICAgfSwKICAgIHNldE91dHB1dDogZnVuY3Rpb24gc2V0T3V0cHV0KGUpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmVkaXRhYmxlKSByZXR1cm47CiAgICAgIHZhciB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCd+Jyk7CiAgICAgIHZhciBvdXRwdXQgPSB2YWx1ZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtID0gIiIuY29uY2F0KGl0ZW0pLnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCAnJyk7CiAgICAgICAgaWYgKGl0ZW0gPT09ICcnKSByZXR1cm4gbnVsbDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBkYXRlID0gX3RoaXMxNC5jb3JlLm1vbWVudChpdGVtLCBfdGhpczE0LnNlbGZEaXNwbGF5Rm9ybWF0KTsKCiAgICAgICAgICByZXR1cm4gZGF0ZS5pc1ZhbGlkKCkgPyBkYXRlIDogbnVsbDsKICAgICAgICB9IGNhdGNoIChlcikgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0pOwogICAgICB0aGlzLm91dHB1dC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLm91dHB1dC5sZW5ndGgpIHsKICAgICAgICB0aGlzLnVwZGF0ZURhdGVzKGNsb25lRGF0ZXModGhpcy5vdXRwdXQpKTsKICAgICAgICB0aGlzLnN1Ym1pdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuaXNEYXRhQXJyYXkgPyBbXSA6IG51bGwpOwogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMuaXNEYXRhQXJyYXkgPyBbXSA6IG51bGwpOwogICAgICB9CiAgICB9LAogICAgd3JhcHBlckNsaWNrOiBmdW5jdGlvbiB3cmFwcGVyQ2xpY2soKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMud3JhcHBlclN1Ym1pdCAmJiB0aGlzLmNhblN1Ym1pdCkgewogICAgICAgIHRoaXMuc3VibWl0KCk7CiAgICAgIH0KICAgIH0sCiAgICBhcHBseURldkZuOiBmdW5jdGlvbiBhcHBseURldkZuKGZuLCBrKSB7CiAgICAgIHZhciByZXN1bHQgPSBmYWxzZTsKICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsKCiAgICAgIHRyeSB7CiAgICAgICAgYXJncy5wdXNoKHsKICAgICAgICAgIHk6ICd5ZWFyJywKICAgICAgICAgIG06ICdtb250aCcsCiAgICAgICAgICBkOiAnZGF5JywKICAgICAgICAgIHQ6ICd0aW1lJwogICAgICAgIH1ba10pOwogICAgICAgIHJlc3VsdCA9IGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICB9IGNhdGNoIChlcikgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXIpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGNoZWNrRGlzYWJsZTogZnVuY3Rpb24gY2hlY2tEaXNhYmxlKGl0ZW0sIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIHZhciB0aGlzRGlzYWJsZSA9IHRoaXMuZGlzYWJsZTsKICAgICAgaWYgKCF0aGlzRGlzYWJsZSkgcmV0dXJuIGZhbHNlOwoKICAgICAgdmFyIHR5cGUgPSBfdHlwZW9mKHRoaXNEaXNhYmxlKTsKCiAgICAgIHZhciBjaGVja1N0cmluZyA9IGZ1bmN0aW9uIGNoZWNrU3RyaW5nKGZpbHRlciwgc3RyLCBkYXRlKSB7CiAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIGZpbHRlci50ZXN0KHN0cik7CiAgICAgICAgaWYgKGZpbHRlciA9PT0gc3RyKSByZXR1cm4gdHJ1ZTsKCiAgICAgICAgaWYgKGl0ZW0gPT09ICdkJykgewogICAgICAgICAgdmFyIGxlbmd0aCA9IGZpbHRlci5sZW5ndGg7CiAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBsZW5ndGgpID09PSBmaWx0ZXIgfHwgZGF0ZS5jbG9uZSgpLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2RkZGQnKSA9PT0gZmlsdGVyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9OwoKICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soZGF0ZSwgZGF0ZUZvcm1hdHRlZCkgewogICAgICAgIHZhciBtYXRjaGVzID0gZmFsc2U7CgogICAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMxNS5hcHBseURldkZuKHRoaXNEaXNhYmxlLCBpdGVtLCBkYXRlRm9ybWF0dGVkLCBkYXRlLmNsb25lKCkpOwogICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXNEaXNhYmxlKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgICAgICAgdmFyIGlpID0gdGhpc0Rpc2FibGUubGVuZ3RoOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWk7IGkrKykgewogICAgICAgICAgICBtYXRjaGVzID0gY2hlY2tTdHJpbmcodGhpc0Rpc2FibGVbaV0sIGRhdGVGb3JtYXR0ZWQsIGRhdGUpOwogICAgICAgICAgICBpZiAobWF0Y2hlcykgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG1hdGNoZXM7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJyB8fCB0aGlzRGlzYWJsZSBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICAgICAgcmV0dXJuIGNoZWNrU3RyaW5nKHRoaXNEaXNhYmxlLCBkYXRlRm9ybWF0dGVkLCBkYXRlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKCiAgICAgIHZhciBmb3JtYXQgPSB0aGlzLnNlbGZGb3JtYXQ7CgogICAgICBpZiAoaXRlbSA9PT0gJ3knKSB7CiAgICAgICAgdmFsdWUgPSB0aGlzLmNvcmUubW9tZW50KHZhbHVlLCAnallZWVknKTsKICAgICAgfSBlbHNlIGlmIChpdGVtID09PSAnZCcpIHsKICAgICAgICAvLyByZW1vdmUgdGltZSBmcm9tIGZvcm1hdAogICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKC8oSChIPykpfChoKGg/KSk/KDo/KW0obT8pKDo/KShzKHM/KSk/L2csICcnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNoZWNrKHZhbHVlLCB2YWx1ZS5mb3JtYXQoZm9ybWF0KSk7CiAgICB9LAogICAgZ2V0SGlnaGxpZ2h0czogZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0cyhpdGVtLCB2YWx1ZSkgewogICAgICB2YXIgaGlnaGxpZ2h0ID0gdGhpcy5oaWdobGlnaHQ7CiAgICAgIGlmICghaGlnaGxpZ2h0IHx8IHR5cGVvZiBoaWdobGlnaHQgIT09ICdmdW5jdGlvbicpIHJldHVybiB7fTsKICAgICAgaWYgKGl0ZW0gPT09ICd5JykgdmFsdWUgPSB0aGlzLmNvcmUubW9tZW50KHZhbHVlLCAnallZWVknKTsKICAgICAgcmV0dXJuIHRoaXMuYXBwbHlEZXZGbihoaWdobGlnaHQsIGl0ZW0sIHZhbHVlLmZvcm1hdCh0aGlzLnNlbGZGb3JtYXQpLCB2YWx1ZS5jbG9uZSgpKSB8fCB7fTsKICAgIH0sCiAgICBpc0xvd2VyOiBmdW5jdGlvbiBpc0xvd2VyKGRhdGUpIHsKICAgICAgcmV0dXJuIHRoaXMubWluRGF0ZSAmJiBkYXRlIDwgdGhpcy5taW5EYXRlOwogICAgfSwKICAgIGlzTW9yZTogZnVuY3Rpb24gaXNNb3JlKGRhdGUpIHsKICAgICAgcmV0dXJuIHRoaXMubWF4RGF0ZSAmJiBkYXRlID4gdGhpcy5tYXhEYXRlOwogICAgfSwKICAgIGNsZWFyVmFsdWU6IGZ1bmN0aW9uIGNsZWFyVmFsdWUoKSB7CiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47CiAgICAgIHRoaXMub3V0cHV0ID0gW107CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5pc0RhdGFBcnJheSA/IFtdIDogJycpOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmlzRGF0YUFycmF5ID8gW10gOiBudWxsKTsKICAgIH0sCiAgICBzZXRMb2NhbGU6IGZ1bmN0aW9uIHNldExvY2FsZShsb2NhbGUpIHsKICAgICAgdGhpcy5jb3JlLmNoYW5nZUxvY2FsZShsb2NhbGUsIHRoaXMubG9jYWxlQ29uZmlnKTsKICAgICAgdGhpcy5kYXRlID0gdGhpcy5kYXRlLmNsb25lKCk7CiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IHRoaXMuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5jbG9uZSgpOwogICAgICB9KTsgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgfSwKICAgIHNldFRpbWV6b25lOiBmdW5jdGlvbiBzZXRUaW1lem9uZShkYXRlLCBtb2RlKSB7CiAgICAgIHZhciB0eiA9IHRoaXMudGltZXpvbmU7CgogICAgICBpZiAodHopIHsKICAgICAgICB2YXIgciA9IG1vZGUgPT09ICdpbicgPyAxIDogLTE7CiAgICAgICAgdmFyIG1vbWVudCA9IHRoaXMuY29yZS5tb21lbnQ7CgogICAgICAgIGlmICh0eXBlb2YgdHogPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICB2YXIgdCA9IG1vbWVudCgpLnV0YygpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcycpICsgdHo7CiAgICAgICAgICBkYXRlLmFkZChtb21lbnQucGFyc2Vab25lKHQpLnV0Y09mZnNldCgpICogciwgJ21pbnV0ZXMnKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0eiA9PT0gJ2Jvb2xlYW4nICYmIHR6KSB7CiAgICAgICAgICBkYXRlLnN1YnRyYWN0KG5ldyBEYXRlKGRhdGUpLmdldFRpbWV6b25lT2Zmc2V0KCkgKiByLCAnbWludXRlcycpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHR6ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBkYXRlID0gdHooZGF0ZSwgbW9kZSwgdGhpcyk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZGF0ZS5jbG9uZSgpOwogICAgfSwKICAgIGNvbnZlcnRUb0xvY2FsZU51bWJlcjogZnVuY3Rpb24gY29udmVydFRvTG9jYWxlTnVtYmVyKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmNvbnZlcnROdW1iZXJzICYmIHRoaXMubG9jYWxlID09PSAnZmEnKSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh2YWx1ZSkucmVwbGFjZSgvXGQrL2csIGZ1bmN0aW9uIChkaWdpdCkgewogICAgICAgICAgdmFyIHJldCA9ICcnOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkaWdpdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShkaWdpdC5jaGFyQ29kZUF0KGkpICsgMTcyOCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSwKICAgIG9uV2luZG93UmVzaXplOiBmdW5jdGlvbiBvbldpbmRvd1Jlc2l6ZSgpIHsKICAgICAgdGhpcy53aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgfSwKICAgIG9uV2luZG93Q2xpY2s6IGZ1bmN0aW9uIG9uV2luZG93Q2xpY2soZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaXNQb3BvdmVyICYmIHRoaXMuJHJlZnMucGlja2VyICYmIHRoaXMuJHJlZnMuaW5wdXRHcm91cCkgewogICAgICAgIHZhciBpc09uUGlja2VyID0gdGhpcy4kcmVmcy5waWNrZXIuY29udGFpbnMoZXZlbnQudGFyZ2V0KTsKICAgICAgICB2YXIgaXNPbklucHV0ID0gdGhpcy4kcmVmcy5pbnB1dEdyb3VwLmNvbnRhaW5zKGV2ZW50LnRhcmdldCk7CiAgICAgICAgaWYgKGlzT25QaWNrZXIpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgIGlmICghaXNPblBpY2tlciAmJiAhaXNPbklucHV0KSB7CiAgICAgICAgICAvLyBzZXRUaW1lb3V0IGJlY2F1c2U6CiAgICAgICAgICAvLyBmaXJzdCByZWFkIHRoZSBpbnB1dCB2YWx1ZQogICAgICAgICAgLy8gdGhlbiBwcm9jZXNzIHRoZSBvdXRwdXQKICAgICAgICAgIC8vIHRoZW4gY2xvc2UgdGhlIHBpY2tlcgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczE2LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0sIHRoaXMuZWRpdGFibGUgPyA1MDAgOiAwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXRQbGFjZW1lbnQ6IGZ1bmN0aW9uIHNldFBsYWNlbWVudCgpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmlzUG9wb3ZlcikgcmV0dXJuOwogICAgICB2YXIgYWxsb3dlZCA9IFsndG9wLWxlZnQnLCAndG9wLXJpZ2h0JywgJ2JvdHRvbS1yaWdodCcsICdib3R0b20tbGVmdCcsICdsZWZ0LXRvcCcsICdsZWZ0LWJvdHRvbScsICdyaWdodC10b3AnLCAncmlnaHQtYm90dG9tJ107CgogICAgICBpZiAoYWxsb3dlZC5pbmRleE9mKHRoaXMucG9wb3ZlcikgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucG9wb3ZlclBsYWNlID0gdGhpcy5wb3BvdmVyOwogICAgICB9CgogICAgICB0aGlzLnBvcG92ZXJQbGFjZSA9ICdib3R0b20tcmlnaHQnOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBsYWNlbWVudCA9IFsnYm90dG9tJywgJ3JpZ2h0J107CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzMTcuJHJlZnMuY29udGFpbmVyOwogICAgICAgIHZhciByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHZhciBsZWZ0ID0gcmVjdC5sZWZ0OwogICAgICAgIHZhciBib3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSByZWN0LmJvdHRvbTsKICAgICAgICBpZiAoYm90dG9tIDw9IDApIHBsYWNlbWVudFswXSA9ICd0b3AnOwogICAgICAgIGlmIChsZWZ0IDw9IDApIHBsYWNlbWVudFsxXSA9ICdsZWZ0JzsKICAgICAgICBfdGhpczE3LnBvcG92ZXJQbGFjZSA9IHBsYWNlbWVudC5qb2luKCctJyk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUsIG9wdGlvbnMpIHsKICAgIHZhciBjb21wb25lbnQgPSB0aGlzOwogICAgb3B0aW9ucyA9IFZ1ZS51dGlsLmV4dGVuZCh7CiAgICAgIG5hbWU6ICdkYXRhLXBpY2tlcicsCiAgICAgIHByb3BzOiB7fQogICAgfSwgb3B0aW9ucyk7CgogICAgZm9yICh2YXIgayBpbiBvcHRpb25zLnByb3BzKSB7CiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY29tcG9uZW50LnByb3BzLCBrKSkgewogICAgICAgIGNvbXBvbmVudC5wcm9wc1trXS5kZWZhdWx0ID0gb3B0aW9ucy5wcm9wc1trXTsKICAgICAgfQogICAgfQoKICAgIFZ1ZS5jb21wb25lbnQob3B0aW9ucy5uYW1lLCBjb21wb25lbnQpOwogIH0KfTs="},{"version":3,"sources":["/Users/sylvia/myproject/mysite/ff/src/components/VuePersianDatetimePicker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <span\n    class=\"vpd-main\"\n    :data-type=\"type\"\n    :data-placement=\"popoverPlace\"\n    :data-locale=\"localeData.name\"\n    :data-locale-dir=\"localeData.config.dir\"\n    :class=\"{ 'vpd-is-popover': isPopover }\"\n  >\n    <span\n      v-if=\"!element\"\n      ref=\"inputGroup\"\n      :class=\"['vpd-input-group', { 'vpd-disabled': disabled }]\"\n    >\n      <label\n        :for=\"id\"\n        class=\"vpd-icon-btn\"\n        :style=\"{ 'background-color': color }\"\n        @click.prevent.stop=\"visible = !visible\"\n      >\n        <slot name=\"label\">\n          <time-icon v-if=\"type === 'time'\" width=\"16px\" height=\"16px\" />\n          <calendar-icon v-else width=\"16px\" height=\"16px\" />\n          <span v-if=\"label\" v-text=\"label\" />\n        </slot>\n      </label>\n      <input\n        :id=\"id\"\n        ref=\"input\"\n        type=\"text\"\n        :name=\"name\"\n        :class=\"[inputClass, { 'vpd-is-editable': editable }]\"\n        :placeholder=\"placeholder\"\n        :value=\"displayValue\"\n        :disabled=\"disabled\"\n        @focus=\"focus\"\n        @blur=\"setOutput\"\n        @keydown.enter=\"setOutput\"\n      />\n      <input\n        v-if=\"altName\"\n        type=\"hidden\"\n        :name=\"altName\"\n        :value=\"altFormatted\"\n      />\n      <i\n        v-if=\"clearable && !disabled && displayValue\"\n        class=\"vpd-clear-btn\"\n        @click=\"clearValue\"\n      >\n        <slot name=\"clear-btn\" v-bind=\"{ vm }\">x</slot>\n      </i>\n    </span>\n\n    <input\n      v-else-if=\"altName\"\n      type=\"hidden\"\n      :name=\"altName\"\n      :value=\"altFormatted\"\n    />\n\n    <transition :name=\"isPopover ? '' : 'vpd-fade-scale'\">\n      <div\n        v-if=\"visible\"\n        ref=\"picker\"\n        :class=\"[\n          'vpd-wrapper',\n          `vpd-dir-${localeData.config.dir}`,\n          {\n            'vpd-is-range': range,\n            'vpd-is-inline': inline,\n            'vpd-is-multiple': multiple,\n            'vpd-compact-time': compactTime,\n            'vpd-no-footer': autoSubmit && !hasStep('t')\n          }\n        ]\"\n        :data-type=\"type\"\n        @click.self=\"wrapperClick\"\n      >\n        <div ref=\"container\" class=\"vpd-container\">\n          <div class=\"vpd-content\">\n            <div class=\"vpd-header\" :style=\"{ 'background-color': color }\">\n              <div\n                v-if=\"['date', 'datetime', 'year-month'].indexOf(type) !== -1\"\n                :class=\"['vpd-year-label', directionClass]\"\n                @click=\"goStep('y')\"\n              >\n                <transition name=\"slideY\">\n                  <span :key=\"selectedDate.xYear()\">\n                    <slot name=\"header-year\" v-bind=\"{ vm, selectedDate }\">\n                      {{ convertToLocaleNumber(selectedDate.xYear()) }}\n                    </slot>\n                  </span>\n                </transition>\n              </div>\n              <div\n                v-if=\"type !== 'year-month'\"\n                :class=\"['vpd-date', directionClass]\"\n              >\n                <transition name=\"slideY\">\n                  <span :key=\"formattedDate\">\n                    <slot name=\"header-date\" v-bind=\"{ vm, formattedDate }\">\n                      {{ convertToLocaleNumber(formattedDate) }}\n                    </slot>\n                  </span>\n                </transition>\n              </div>\n              <slot\n                v-if=\"locales.length > 1\"\n                name=\"locales\"\n                v-bind=\"{ vm, locales, setLocale }\"\n              >\n                <locale-change\n                  :locale-data=\"localeData\"\n                  :core=\"core\"\n                  :locales=\"locales\"\n                  class=\"vpd-locales\"\n                  @change=\"setLocale\"\n                />\n              </slot>\n            </div>\n            <div class=\"vpd-body\">\n              <template v-if=\"hasStep('d')\">\n                <div :class=\"['vpd-controls', directionClassDate]\">\n                  <button\n                    type=\"button\"\n                    class=\"vpd-next\"\n                    :title=\"lang.nextMonth\"\n                    :disabled=\"nextMonthDisabled\"\n                    @click=\"nextMonth\"\n                  >\n                    <arrow\n                      width=\"10\"\n                      fill=\"#000\"\n                      direction=\"right\"\n                      style=\"vertical-align: middle\"\n                    />\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"vpd-prev\"\n                    :title=\"lang.prevMonth\"\n                    :disabled=\"prevMonthDisabled\"\n                    @click=\"prevMonth\"\n                  >\n                    <arrow\n                      width=\"10\"\n                      fill=\"#000\"\n                      direction=\"left\"\n                      style=\"vertical-align: middle\"\n                    />\n                  </button>\n                  <transition name=\"slideX\">\n                    <div\n                      :key=\"date.xMonth()\"\n                      class=\"vpd-month-label\"\n                      @click=\"goStep('m')\"\n                    >\n                      <slot name=\"month-name\" v-bind=\"{ vm, date, color }\">\n                        <span\n                          :style=\"{ 'border-color': color, color }\"\n                          v-text=\"\n                            convertToLocaleNumber(date.xFormat('jMMMM jYYYY'))\n                          \"\n                        />\n                      </slot>\n                    </div>\n                  </transition>\n                </div>\n                <div\n                  class=\"vpd-clearfix\"\n                  :class=\"['vpd-month', directionClassDate]\"\n                >\n                  <div class=\"vpd-clearfix vpd-week\">\n                    <div\n                      v-for=\"(day, i) in weekDays\"\n                      :key=\"`${i}-${day}`\"\n                      class=\"vpd-weekday\"\n                    >\n                      <slot name=\"weekday\" v-bind=\"{ vm, day }\">\n                        {{ day }}\n                      </slot>\n                    </div>\n                  </div>\n                  <div\n                    class=\"vpd-days\"\n                    :style=\"{ height: month.length * 40 + 'px' }\"\n                    @mouseleave=\"hoveredItem = null\"\n                  >\n                    <transition name=\"slideX\" :class=\"directionClassDate\">\n                      <div :key=\"date.xMonth()\">\n                        <div\n                          v-for=\"(m, mi) in monthDays\"\n                          :key=\"mi\"\n                          class=\"vpd-clearfix\"\n                        >\n                          <div\n                            v-for=\"(day, di) in m\"\n                            :key=\"di\"\n                            :class=\"[\n                              'vpd-day',\n                              {\n                                'vpd-selected': day.selected,\n                                'vpd-empty': day.date == null,\n                                'vpd-range-first': day.isFirst,\n                                'vpd-range-last': day.isLast,\n                                'vpd-range-between': day.isBetween,\n                                'vpd-range-hover': hoveredItem && day.isHover\n                              },\n                              day.attributes.class\n                            ]\"\n                            v-bind=\"day.attributes\"\n                            :disabled=\"day.disabled\"\n                            @click=\"selectDay(day)\"\n                            @mouseover=\"hoveredItem = day.date\"\n                          >\n                            <template v-if=\"day.date != null\">\n                              <slot name=\"day-item\" v-bind=\"{ vm, day, color }\">\n                                <span\n                                  class=\"vpd-day-effect\"\n                                  :style=\"{ 'background-color': color }\"\n                                />\n                                <span\n                                  class=\"vpd-day-text\"\n                                  v-text=\"convertToLocaleNumber(day.formatted)\"\n                                />\n                              </slot>\n                            </template>\n                          </div>\n                        </div>\n                      </div>\n                    </transition>\n                  </div>\n                </div>\n              </template>\n\n              <div v-else style=\"height:250px\" />\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('y')\"\n                  v-show=\"currentStep === 'y'\"\n                  ref=\"year\"\n                  :class=\"[\n                    'vpd-addon-list',\n                    { 'vpd-can-close': steps.length > 1 }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div\n                      v-for=\"(year, yi) in years\"\n                      :key=\"yi\"\n                      v-bind=\"year.attributes\"\n                      :class=\"[\n                        'vpd-addon-list-item',\n                        { 'vpd-selected': year.selected },\n                        year.attributes.class\n                      ]\"\n                      :style=\"[\n                        { color: year.selected ? color : '' },\n                        year.attributes.style\n                      ]\"\n                      :disabled=\"year.disabled\"\n                      @click=\"selectYear(year)\"\n                    >\n                      <slot name=\"year-item\" v-bind=\"{ vm, year, color }\">\n                        {{ convertToLocaleNumber(year.xFormat('jYYYY')) }}\n                      </slot>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('m')\"\n                  v-show=\"currentStep === 'm'\"\n                  ref=\"month\"\n                  :class=\"[\n                    'vpd-addon-list vpd-month-list',\n                    { 'vpd-can-close': steps.length > 1 }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div\n                      v-for=\"(monthItem, mi) in months\"\n                      :key=\"mi\"\n                      v-bind=\"monthItem.attributes\"\n                      :class=\"[\n                        'vpd-addon-list-item',\n                        { 'vpd-selected': monthItem.selected },\n                        monthItem.attributes.class\n                      ]\"\n                      :disabled=\"monthItem.disabled\"\n                      :style=\"[\n                        { color: monthItem.selected ? color : '' },\n                        monthItem.attributes.style\n                      ]\"\n                      @click=\"selectMonth(monthItem)\"\n                    >\n                      <slot name=\"month-item\" v-bind=\"{ vm, monthItem, color }\">\n                        {{ monthItem.xFormat('jMMMM') }}\n                      </slot>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <div\n                  v-if=\"hasStep('t')\"\n                  v-show=\"currentStep === 't'\"\n                  ref=\"time\"\n                  :class=\"[\n                    'vpd-addon-list vpd-time',\n                    { 'vpd-disabled': isDisableTime }\n                  ]\"\n                >\n                  <div class=\"vpd-addon-list-content\">\n                    <div :class=\"['vpd-time-h', classFastCounter]\">\n                      <btn\n                        class=\"vpd-up-arrow-btn\"\n                        @update=\"setTime(1, 'h')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"up\" />\n                      </btn>\n                      <div\n                        class=\"vpd-counter\"\n                        :class=\"directionClassTime\"\n                        @mousewheel.stop.prevent=\"wheelSetTime('h', $event)\"\n                      >\n                        <div\n                          v-for=\"(item, i) in time.format('HH').split('')\"\n                          :key=\"`h__${i}`\"\n                          class=\"vpd-counter-item\"\n                          v-bind=\"timeAttributes\"\n                        >\n                          <transition name=\"slideY\">\n                            <span\n                              :key=\"`${item}__${i}_h`\"\n                              :style=\"{\n                                transition:\n                                  'all ' +\n                                  timeData.transitionSpeed +\n                                  'ms ease-in-out'\n                              }\"\n                              v-text=\"convertToLocaleNumber(item)\"\n                            />\n                          </transition>\n                        </div>\n                      </div>\n                      <btn\n                        class=\"vpd-down-arrow-btn\"\n                        @update=\"setTime(-1, 'h')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"down\" />\n                      </btn>\n                    </div>\n                    <div :class=\"['vpd-time-m', classFastCounter]\">\n                      <btn\n                        class=\"vpd-up-arrow-btn\"\n                        @update=\"setTime(jumpMinute, 'm')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"up\" />\n                      </btn>\n                      <div\n                        class=\"vpd-counter\"\n                        :class=\"directionClassTime\"\n                        @mousewheel.stop.prevent=\"wheelSetTime('m', $event)\"\n                      >\n                        <div\n                          v-for=\"(item, i) in time.format('mm').split('')\"\n                          :key=\"`m__${i}`\"\n                          class=\"vpd-counter-item\"\n                          v-bind=\"timeAttributes\"\n                        >\n                          <transition name=\"slideY\">\n                            <span\n                              :key=\"`${item}__${i}_m`\"\n                              :style=\"{\n                                transition:\n                                  'all ' +\n                                  timeData.transitionSpeed +\n                                  'ms ease-in-out'\n                              }\"\n                              v-text=\"convertToLocaleNumber(item)\"\n                            />\n                          </transition>\n                        </div>\n                      </div>\n                      <btn\n                        class=\"vpd-down-arrow-btn\"\n                        @update=\"setTime(-jumpMinute, 'm')\"\n                        @fastUpdate=\"fastUpdateCounter\"\n                      >\n                        <arrow width=\"20\" direction=\"down\" />\n                      </btn>\n                    </div>\n                  </div>\n                </div>\n              </transition>\n\n              <transition name=\"fade\">\n                <span\n                  v-if=\"steps.length > 1 && currentStep !== 'd' && hasStep('d')\"\n                  class=\"vpd-close-addon\"\n                  @click=\"goStep('d')\"\n                >\n                  <slot name=\"close-btn\" v-bind=\"{ vm }\">x</slot>\n                </span>\n              </transition>\n\n              <br v-if=\"autoSubmit && !hasStep('t')\" />\n\n              <div v-else class=\"vpd-actions\">\n                <slot\n                  name=\"submit-btn\"\n                  v-bind=\"{ vm, canSubmit, color, submit, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :disabled=\"!canSubmit\"\n                    :style=\"{ color }\"\n                    @click=\"submit\"\n                    v-text=\"lang.submit\"\n                  />\n                </slot>\n\n                <slot\n                  v-if=\"!inline\"\n                  name=\"cancel-btn\"\n                  v-bind=\"{ vm, color, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :style=\"{ color }\"\n                    @click=\"visible = false\"\n                    v-text=\"lang.cancel\"\n                  />\n                </slot>\n\n                <slot\n                  v-if=\"showNowBtn && canGoToday\"\n                  name=\"now-btn\"\n                  v-bind=\"{ vm, color, goToday, lang }\"\n                >\n                  <button\n                    type=\"button\"\n                    :style=\"{ color }\"\n                    @click=\"goToday\"\n                    v-text=\"lang.now\"\n                  />\n                </slot>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </span>\n</template>\n\n<script>\n\nimport Arrow from '././components/Arrow.vue'\nimport Btn from '././components/Btn.vue'\nimport CalendarIcon from './components/CalendarIcon.vue'\nimport TimeIcon from '././components/TimeIcon.vue'\nimport CoreModule from '././modules/core'\nimport LocaleChange from '././components/LocaleChange'\nimport { cloneDates, isSameDay } from '././modules/utils'\n\nexport default {\n  components: { LocaleChange, Arrow, Btn, CalendarIcon, TimeIcon },\n  model: {\n    prop: 'value',\n    event: 'input'\n  },\n  props: {\n    /**\n     * Default input value\n     * @type Number String\n     * @default []\n     * @example 1396/08/01 22:45 | 2017/07/07 20:45 | {unix} | 20:45\n     */\n    value: { type: [Number, String, Date, Array], default: '' },\n\n    /**\n     * Initial value of picker (if value is empty)\n     * @type Number String\n     * @default []\n     * @example 1370/01/01 22:45 | 2017/01/01 20:45 | {unix} | 20:45\n     * @version 1.0.9\n     */\n    initialValue: { type: [Number, String], default: '' },\n\n    /**\n     * Format for {value}\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | unix | HH:mm\n     * @if empty {inputFormat} = {format}\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    inputFormat: { type: String, default: '' },\n\n    /**\n     * Format only to display the date in the field\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | unix | HH:mm\n     * @if empty {displayFormat} = {format}\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    displayFormat: { type: String, default: '' },\n\n    /**\n     * Format for output value\n     * @type String\n     * @default Null\n     * @example jYYYY/jMM/jDD HH:mm | YYYY/MM/DD HH:mm | x | date | HH:mm\n     * @if empty, it will be built according to the type of picker:\n     *\n     * --- time:     HH:mm\n     * --- datetime: jYYYY/jMM/jDD HH:mm\n     * --- date:     jYYYY/jMM/jDD\n     * --- year:     jYYYY\n     * --- month:    jMM\n     *\n     * @see https://github.com/jalaali/moment-jalaali\n     */\n    format: { type: String, default: '' },\n\n    /**\n     * Step to view on startup\n     * @type String\n     * @default \"day\"\n     * @supported day | month | year | time\n     * @example year\n     * @desc {year} will show the \"year\" panel at first\n     */\n    view: { type: String, default: 'day' },\n\n    /**\n     * The picker type\n     * @type String\n     * @default \"date\"\n     * @supported date | datetime | year | month | time\n     */\n    type: { type: String, default: 'date' },\n\n    /**\n     * The minimum of selectable period\n     * Based on {inputFormat}\n     * @type String\n     * @default Null\n     * @example 1396/08/01 22:45 | 22:45\n     */\n    min: { type: [String], default: '' },\n\n    /**\n     * The maximum of selectable period\n     * Based on {inputFormat}\n     * @type String\n     * @default Null\n     * @example 1396/08/01 22:45 | 22:45\n     */\n    max: { type: [String], default: '' },\n\n    /**\n     * Editable input or just readonly\n     * @type Boolean\n     * @default False\n     * @if false, the picker will shown on input focus\n     * @if true, the picker will shown on label click\n     * @note if use <... :editable=\"true\"> with <... :element=\"...\">\n     *     then you have to control the <... :show=\"true or false\">\n     */\n    editable: { type: Boolean, default: false },\n\n    /**\n     * The specified input element ID\n     * @type String\n     * @default Undefined\n     * @desc Sometimes you don't want to use picker default input,\n     * so you can use our own input element with \"id\" attribute\n     * and use <... element=\"the_id_of_input\">\n     */\n    element: { type: String, default: undefined },\n\n    /**\n     * The form input name when not using {element}\n     * @type String\n     * @default Undefined\n     */\n    name: { type: String, default: undefined },\n\n    /**\n     * The form input className when not using {element}\n     * @type String\n     * @default \"form-control\"\n     */\n    inputClass: { type: String, default: 'form-control' },\n\n    /**\n     * The form input placeholder when not using {element}\n     * @type String\n     * @default Null\n     */\n    placeholder: { type: String, default: '' },\n\n    /**\n     * The name of hidden input element\n     * @type String\n     * @default Null\n     * @if empty, the hidden input will not be created\n     */\n    altName: { type: String, default: '' },\n\n    /**\n     * Format for hidden input\n     * @type String\n     * @default Null\n     * @example YYYY-MM-DD HH:mm:ss [GMT]ZZ\n     * @if empty, it will be built according to the type of picker:\n     *\n     * --- time:     HH:mm:ss [GMT]ZZ\n     * --- datetime: YYYY-MM-DD HH:mm:ss [GMT]ZZ\n     * --- date:     YYYY-MM-DD\n     * --- year:     YYYY\n     * --- month:    MM\n     */\n    altFormat: { type: String, default: '' },\n\n    /**\n     * Show or hide the picker\n     * @type Boolean\n     * @default False\n     */\n    show: { type: Boolean, default: false },\n\n    /**\n     * Primary color of picker\n     * @type String\n     */\n    color: { type: String, default: '#417df4' },\n\n    /**\n     * Auto submit and hide picker when date selected\n     * @type Boolean\n     * @default False\n     */\n    autoSubmit: { type: Boolean, default: false },\n\n    /**\n     * Auto submit when clicking the wrapper\n     * @type Boolean\n     * @default false\n     * @version 1.0.6\n     */\n    wrapperSubmit: { type: Boolean, default: false },\n\n    /**\n     * Place to append picker\n     * @type String query selector\n     * @default null\n     * @desc If you want to append picker to another container like 'body',\n     * pass the container as append-to=\"body\",  append-to=\"#app\",  append-to=\"#my-container\"\n     * @example 'body', '.main-container', '#app' ...\n     * @version 1.1.1\n     */\n    appendTo: { type: String, default: null },\n\n    /**\n     * Disable or enable the datepicker\n     * @type Boolean\n     * @default false\n     * @version 1.1.4\n     */\n    disabled: { type: Boolean, default: false },\n\n    /**\n     * Disabling\n     * @type Array, String, Function, RegExp\n     * @default undefined\n     * @desc disable some dates\n     * @example ['1397/02/02', '1390/10/10'] - \"1397/05/20\" - /1397\\/05\\/(.*)/ ...\n     * @version 1.1.4\n     */\n    disable: { type: [Array, String, Function, RegExp], default: undefined },\n\n    /**\n     * Label\n     * @type String\n     * @version 1.1.4\n     */\n    label: { type: String, default: '' },\n\n    /**\n     * Highlight items\n     * @type Function\n     * @desc This prop accepts only function that return an object of attributes.\n     * @version 1.1.5\n     */\n    highlight: { type: Function, default: null },\n\n    /**\n     * Change minutes by step\n     * @type Number\n     * @default 1\n     * @version: 1.1.6\n     */\n    jumpMinute: { type: Number, default: 1 },\n\n    /**\n     * Round minutes when jumpMinute is grater than 1\n     * @example when jumpMinute = 15 thin will result: 13:00, 13:15, 13:30, 13:45 ...\n     * @type Boolean\n     * @default false\n     * @version: 1.1.6\n     */\n    roundMinute: { type: Boolean, default: false },\n\n    /**\n     * Show clear button\n     * @type Boolean\n     * @default false\n     * @version 1.1.6\n     */\n    clearable: { type: Boolean, default: false },\n\n    /**\n     * Inline mode\n     * @type Boolean\n     * @default false\n     * @version 1.1.6\n     */\n    inline: { type: Boolean, default: false },\n\n    /**\n     * Locales config (\"fa\" for jalali and \"en\" for gregorian)\n     * @type String\n     * @default fa\n     * @example fa | en | fa,en | en,fa\n     * @supported fa,en\n     * @version 2.0.0\n     */\n    locale: { type: String, default: 'fa' },\n\n    /**\n     * Locale configuration\n     * @type Object\n     * @default {}\n     * @version 2.0.0\n     * @example\n     * {\n     *  fa: {\n     *      dow: 6,             --first day of week\n     *      dir: 'rtl',         --language direction\n     *      lang: {\n     *           label:     \"\",\n     *           submit:    \"\",\n     *           cancel:    \"\",\n     *           now:       \"\",\n     *           nextMonth: \" \",\n     *           prevMonth: \" \",\n     *      }\n     *  },\n     *  en: { ... }\n     * }\n     */\n    localeConfig: { type: Object, default: () => ({}) },\n\n    /**\n     * Timezone configuration\n     * @type String | Boolean | Function\n     * @default false\n     * @example true | false | +03:30 | +04:30\n     * @version 2.1.0\n     */\n    timezone: { type: [Boolean, String, Function], default: false },\n\n    /**\n     * Show or hide NOW button\n     * @type Boolean\n     * @default true\n     * @version 2.1.6\n     */\n    showNowBtn: { type: Boolean, default: true },\n\n    /**\n     * Convert to locale numbers or not\n     * @type Boolean\n     * @default false\n     * @example <date-picker convert-numbers />\n     * @version 2.3.0\n     */\n    convertNumbers: { type: Boolean, default: false },\n\n    /**\n     * Display the time on the front page\n     * @type Boolean\n     * @default false\n     * @example <date-picker compact-time />\n     * @version 2.4.0\n     */\n    compactTime: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable range mode\n     * @type Boolean\n     * @default false\n     * @example <date-picker range />\n     * @version 2.5.0\n     */\n    range: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable multiple mode\n     * @type Boolean\n     * @default false\n     * @example <date-picker multiple />\n     * @version 2.6.0\n     */\n    multiple: { type: Boolean, default: false },\n\n    /**\n     * Enable or disable popover mode\n     * @type Boolean | String\n     * @accepted:\n     *    true | false\n     *    top-left | top-right | bottom-right | bottom-left\n     *    left-top | left-bottom | right-top | right-bottom\n     * @default false\n     * @example <date-picker popover />\n     * @example <date-picker popover=\"top-left\" />\n     * @version 2.6.0\n     */\n    popover: { type: [Boolean, String], default: false }\n  },\n  data() {\n    const defaultLocale = this.locale.split(',')[0]\n    const coreModule = new CoreModule(defaultLocale, this.localeConfig)\n    return {\n      core: coreModule,\n      now: coreModule.moment(),\n      date: {},\n      selectedDates: [],\n      hoveredItem: null,\n      visible: false,\n      directionClass: '',\n      directionClassDate: '',\n      directionClassTime: '',\n      classFastCounter: '',\n      steps: ['y', 'm', 'd', 't'],\n      step: 0,\n      shortCodes: {\n        year: 'y',\n        month: 'm',\n        day: 'd',\n        time: 't'\n      },\n      time: {},\n      timeData: {\n        transitionSpeed: 300,\n        timeout: false,\n        lastUpdate: new Date().getTime()\n      },\n      minDate: false,\n      maxDate: false,\n      output: [],\n      updateNowInterval: null,\n      locales: ['fa'],\n      localeData: coreModule.locale,\n      windowWidth: window.innerWidth,\n      popoverPlace: 'bottom-right'\n    }\n  },\n  computed: {\n    vm() {\n      return this\n    },\n    id() {\n      return (\n        '_' +\n        Math.random()\n          .toString(36)\n          .substr(2, 9)\n      )\n    },\n    currentStep() {\n      return this.steps[this.step]\n    },\n    selectedDate() {\n      const dates = this.selectedDates\n      return dates.length ? dates[dates.length - 1] : this.date\n    },\n    formattedDate() {\n      let format = ''\n\n      if (this.hasStep('y')) format = 'jYYYY'\n      if (this.hasStep('m')) format += ' jMMMM '\n      if (this.hasStep('d')) {\n        format = this.isDataArray ? 'jD jMMMM jYYYY' : 'ddd jD jMMMM'\n      }\n      if (this.hasStep('t')) format += ' HH:mm '\n\n      if (!format) return ''\n\n      const separator = this.multiple ? ' | ' : ' ~ '\n      return this.selectedDates.map(d => d.xFormat(format)).join(separator)\n    },\n    month() {\n      if (!this.hasStep('d')) return []\n      const min = this.minDate ? this.minDate.clone().startOf('day') : -Infinity\n      const max = this.maxDate ? this.maxDate.clone().endOf('day') : Infinity\n      return this.core.getWeekArray(this.date.clone()).map(weekItem => {\n        return weekItem.map(day => {\n          const data = {\n            date: day,\n            formatted: '',\n            selected: false,\n            disabled: false,\n            attributes: {}\n          }\n          if (!day) return data\n          const dayMoment = this.core.moment(day)\n          data.formatted = dayMoment.xDate()\n          data.selected = this.selectedDates.find(item => isSameDay(item, day))\n          data.disabled =\n            (this.minDate && dayMoment.clone().startOf('day') < min) ||\n            (this.maxDate && dayMoment.clone().endOf('day') > max) \n            || this.checkDisable('d', dayMoment)\n          if (this.range && !data.disabled) {\n            const [start, end] = this.selectedDates\n            data.isFirst = data.selected && start && isSameDay(start, day)\n            data.isLast = data.selected && end && isSameDay(end, day)\n            data.isBetween =\n              !data.selected && start && end && day > start && day < end\n          }\n          data.attributes = this.getHighlights('d', dayMoment)\n          return data\n        })\n      })\n    },\n    monthDays() {\n      if (!this.range || this.selectedDates.length !== 1 || !this.hoveredItem) { return this.month }\n      const dates = [this.hoveredItem, this.selectedDates[0]]\n      dates.sort((a, b) => a - b)\n      const [start, end] = dates\n      return this.month.map(weekItem => {\n        return weekItem.map(data => {\n          if (!data.date) return data\n          if (this.range && !data.disabled) {\n            const day = data.date\n            data.isHover = !data.selected && day > start && day < end\n          }\n          return data\n        })\n      })\n    },\n    years() {\n      if (!this.hasStep('y') || this.currentStep !== 'y') return []\n      const moment = this.core.moment\n      const min = this.minDate ? this.minDate : moment('1300', 'jYYYY')\n      const max = this.maxDate ? this.maxDate : min.clone().add(150, 'year')\n      const cy = this.date.xYear()\n      return this.core\n        .getYearsList(min.xYear(), max.xYear())\n        .reverse()\n        .map(item => {\n          const year = moment().xYear(item)\n          year.selected = cy === item\n          year.disabled = this.checkDisable('y', item)\n          year.attributes = this.getHighlights('y', item)\n          return year\n        })\n    },\n    months() {\n      if (this.hasStep('m')) {\n        const date = this.date.clone().xStartOf('month')\n        const months = this.core.getMonthsList(this.minDate, this.maxDate, date)\n        months.forEach(m => {\n          m.selected = this.date.xMonth() === m.xMonth()\n          m.disabled = m.disabled || this.checkDisable('m', m)\n          m.attributes = this.getHighlights('m', m)\n        })\n        return months\n      }\n      return []\n    },\n    prevMonthDisabled() {\n      return (\n        this.hasStep('d') &&\n        this.minDate &&\n        this.minDate.clone().xStartOf('month') >=\n          this.date.clone().xStartOf('month')\n      )\n    },\n    nextMonthDisabled() {\n      return (\n        this.hasStep('d') &&\n        this.maxDate &&\n        this.maxDate.clone().xStartOf('month') <=\n          this.date.clone().xStartOf('month')\n      )\n    },\n    canGoToday() {\n      if (!this.minDate && !this.maxDate) return true\n      const now = this.now\n      let min = this.minDate && this.minDate <= now\n      let max = this.maxDate && now <= this.maxDate\n\n      if (this.type === 'time') {\n        if (this.minDate) {\n          min = now\n            .clone()\n            .hour(this.minDate.hour())\n            .minute(this.minDate.minute())\n          min = min <= now\n        }\n        if (this.maxDate) {\n          max = this.now\n            .clone()\n            .hour(this.maxDate.hour())\n            .minute(this.maxDate.minute())\n          max = now <= max\n        }\n      }\n\n      if (this.minDate && this.maxDate) return min && max\n      if (this.minDate) return min\n      if (this.maxDate) return max\n      return false\n    },\n    altFormatted() {\n      let format = this.altFormat\n      if (format === '' || format === undefined) {\n        switch (this.type) {\n          case 'time':\n            format = 'HH:mm:ss [GMT]ZZ'\n            break\n          case 'datetime':\n            format = 'YYYY-MM-DD HH:mm:ss [GMT]ZZ'\n            break\n          case 'date':\n            format = 'YYYY-MM-DD'\n            break\n          case 'year':\n            format = 'YYYY'\n            break\n          case 'month':\n            format = 'MM'\n            break\n          case 'year-month':\n            format = 'YYYY-MM'\n            break\n        }\n      }\n      return this.output.map(d => d.format(format)).join(' ~ ')\n    },\n    selfFormat() {\n      let format = this.format\n      if (['', undefined, 'date'].indexOf(format) !== -1) {\n        switch (this.type) {\n          case 'time':\n            format = 'HH:mm'\n            break\n          case 'datetime':\n            format = 'jYYYY/jMM/jDD HH:mm'\n            break\n          case 'date':\n            format = 'jYYYY/jMM/jDD'\n            break\n          case 'year':\n            format = 'jYYYY'\n            break\n          case 'month':\n            format = 'jMM'\n            break\n          case 'year-month':\n            format = 'jYYYY/jMM'\n            break\n        }\n      }\n      return format\n    },\n    selfInputFormat() {\n      return this.inputFormat === '' || this.inputFormat === undefined\n        ? this.selfFormat\n        : this.inputFormat\n    },\n    outputValue() {\n      const output = cloneDates(this.output)\n      const format = this.selfFormat\n      const isDate = this.value instanceof Date || this.format === 'date'\n      return output.map(item => {\n        /j\\w/.test(format) && item.locale('fa')\n        this.setTimezone(item, 'out')\n        return isDate ? item.toDate() : item.format(format)\n      })\n    },\n    selfDisplayFormat() {\n      let format = this.displayFormat || this.selfFormat\n      const localeFormat = this.localeData.config.displayFormat\n      if (localeFormat) {\n        return typeof localeFormat === 'function'\n          ? localeFormat(this)\n          : localeFormat\n      }\n      if (this.localeData.name !== 'fa') {\n        format = format.replace(/j/g, '')\n      }\n      return format\n    },\n    displayValue() {\n      const format = this.selfDisplayFormat\n      return this.output\n        .map(item => {\n          const output = item.clone()\n          ;/j\\w/.test(format) && output.locale('fa')\n          return this.convertToLocaleNumber(output.format(format))\n        })\n        .join(' ~ ')\n    },\n    isDisableTime() {\n      return this.hasStep('t') && this.checkDisable('t', this.time)\n    },\n    timeAttributes() {\n      return this.hasStep('t') ? this.getHighlights('t', this.time) : {}\n    },\n    canSubmit() {\n      if (!this.disable) return true\n      let can = true\n      if (this.hasStep('t')) can = !this.isDisableTime\n      if (can && this.type !== 'time') can = !this.checkDisable('d', this.date)\n      return can\n    },\n    weekDays() {\n      const names = JSON.parse(\n        JSON.stringify(\n          this.core\n            .moment()\n            .localeData()\n            .weekdaysMin()\n        )\n      )\n      let dow = this.core.locale.config.dow\n      while (dow > 0) {\n        names.push(names.shift())\n        dow--\n      }\n      return names\n    },\n    lang() {\n      return this.localeData.config.lang\n    },\n    isPopover() {\n      return (this.popover === '' || this.popover) && this.windowWidth > 480\n    },\n    isDataArray() {\n      return this.range || this.multiple\n    }\n  },\n  watch: {\n    type: { handler: 'setType', immediate: true },\n    view: { handler: 'setView', immediate: true },\n    value: { handler: 'updateDates', immediate: true },\n    min: { handler: 'setMinMax', immediate: true },\n    max: { handler: 'setMinMax', immediate: true },\n    timezone: { handler: 'updateDates' },\n    inline: {\n      handler(val) {\n        if (!this.disabled) this.visible = !!val\n      },\n      immediate: true\n    },\n    disabled: {\n      handler(val) {\n        if (val) this.visible = false\n        else if (this.inline) this.visible = true\n      },\n      immediate: true\n    },\n    selectedDate(val, old) {\n      this.setDirection('directionClass', val, old)\n    },\n    date(val, old) {\n      this.setDirection('directionClassDate', val, old)\n      if (this.isLower(this.date)) this.date = this.minDate.clone()\n      if (this.isMore(this.date)) this.date = this.maxDate.clone()\n    },\n    time: {\n      handler(val, old) {\n        if (this.hasStep('t') && this.roundMinute) {\n          const time = this.time.clone()\n          const jm = this.jumpMinute\n          const m = (jm - (time.minute() % jm)) % jm\n          time.add({ m })\n          if (time.valueOf() !== this.time.valueOf()) {\n            this.time = time\n            // @todo: this line should apply time to current date selection,\n            // not all of them\n            this.selectedDates.forEach(d => d.set({ m: time.minute() }))\n          }\n        }\n        if (old) this.setDirection('directionClassTime', val, old)\n      },\n      immediate: true\n    },\n    visible(val) {\n      if (val) {\n        if (this.disabled) return (this.visible = false)\n        if (this.type === 'datetime' && this.view === 'day') this.goStep('d')\n        if (this.view !== 'day') this.goStep(this.shortCodes[this.view] || 'd')\n        this.$nextTick(() => {\n          if (this.appendTo) {\n            try {\n              const container = document.querySelector(this.appendTo)\n              container.appendChild(this.$refs.picker)\n            } catch (er) {\n              // eslint-disable-next-line\n              console.warn(`Cannot append picker to \"${this.appendTo}\"!`)\n            }\n          }\n        })\n        this.checkScroll()\n        this.setPlacement()\n        this.$emit('open', this)\n      } else {\n        if (this.inline && !this.disabled) return (this.visible = true)\n        this.$emit('close', this)\n      }\n    },\n    show(val) {\n      this.visible = val\n    },\n    locale: {\n      immediate: true,\n      handler(val) {\n        const locales = val.toString().split(',')\n        this.locales = locales.length ? locales : ['fa']\n        if (this.core.locale.name !== this.locales[0]) { this.setLocale(this.locales[0]) }\n      }\n    },\n    localeConfig: {\n      deep: true,\n      immediate: true,\n      handler(config) {\n        this.core.setLocalesConfig(config)\n        this.setLocale(this.localeData.name)\n      }\n    },\n    'localeData.name'() {\n      this.$emit('localeChange', this.localeData)\n      this.setMinMax()\n    }\n  },\n  created() {\n    this.updateNowInterval = setInterval(() => {\n      this.now = this.core.moment()\n    }, 1000)\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const addEvent = (el, type, handler) => {\n        if (el.attachEvent) el.attachEvent('on' + type, handler)\n        else el.addEventListener(type, handler)\n      }\n      const live = (selector, event, callback, context) => {\n        addEvent(context || document, event, function(e) {\n          let found\n          let el = e.target || e.srcElement\n          while (el && !(found = el.id === selector)) el = el.parentElement\n          if (found) callback.call(el, e)\n        })\n      }\n      if (this.element && !this.editable) {\n        live(this.element, 'click', this.focus)\n      }\n    })\n    document.body.addEventListener('keydown', e => {\n      e = e || event\n      const code = e.keyCode\n      if ((code === 9 || code === 27) && this.visible) this.visible = false\n    })\n    window.addEventListener('resize', this.onWindowResize, true)\n    window.addEventListener('mousedown', this.onWindowClick, true)\n  },\n  onBeforeUnmount() {\n    console.log('onBeforeUnmount')\n    window.clearInterval(this.updateNowInterval)\n    window.removeEventListener('resize', this.onWindowResize, true)\n    window.removeEventListener('mousedown', this.onWindowClick, true)\n    const picker = this.$refs.picker\n    if (this.appendTo && picker && picker.$el && picker.$el.parentNode) {\n      picker.$el.parentNode.removeChild(picker.$el)\n    }\n  },\n  methods: {\n    nextStep() {\n      let step = this.step + 1\n      if (this.compactTime && this.type === 'datetime') step += 1\n      if (this.steps.length <= step) {\n        const passSelected = this.selectedDates.length >= (this.range ? 2 : 1)\n        if ((this.autoSubmit || this.inline) && passSelected) {\n          this.submit(!this.multiple)\n        }\n      } else {\n        this.step++\n        this.goStep(this.step)\n      }\n    },\n    goStep(i) {\n      this.step = typeof i === 'number' ? i : this.steps.indexOf(i)\n      this.checkScroll()\n    },\n    checkScroll() {\n      const step = this.currentStep\n      if (step === 'y' || (step === 'm' && this.visible)) {\n        setTimeout(() => {\n          const container = this.$refs[{ y: 'year', m: 'month' }[step]]\n          if (container) {\n            const selected = container.querySelector('.vpd-selected')\n            if (selected && 'scrollIntoView' in selected) {\n              try {\n                selected.scrollIntoView({ block: 'center' })\n              } catch (er) {\n                selected.scrollIntoView()\n              }\n            }\n          }\n        }, 100)\n      }\n    },\n    fastUpdateCounter(e) {\n      if (!e) this.timeData.transitionSpeed = 300\n      this.classFastCounter = e ? 'fast-updating' : ''\n    },\n    nextMonth() {\n      this.date = this.date.clone().xAdd(1, 'month')\n    },\n    prevMonth() {\n      this.date = this.date.clone().xAdd(-1, 'month')\n    },\n    selectDay(day) {\n      if (!day.date || day.disabled) return\n      const date = this.core.moment(day.date)\n      date.set({\n        hour: this.time.hour(),\n        minute: this.time.minute(),\n        second: 0\n      })\n      this.date = date.clone()\n      this.time = date.clone()\n      if (this.range) {\n        const length = this.selectedDates.length\n        if (!length || length > 1) {\n          this.selectedDates = [date.clone()]\n        } else {\n          this.selectedDates.push(date.clone())\n          this.selectedDates.sort((a, b) => a - b)\n        }\n      } else if (this.multiple) {\n        const exists = this.selectedDates.findIndex(\n          d => d.valueOf() === date.valueOf()\n        )\n        if (exists > -1) {\n          this.selectedDates.splice(exists, 1)\n        } else {\n          this.selectedDates.push(date.clone())\n        }\n      } else {\n        this.selectedDates = [date.clone()]\n      }\n      this.nextStep()\n    },\n    selectYear(year) {\n      if (year.disabled) return\n      this.date = this.date.clone().xYear(year.xYear())\n      this.nextStep()\n    },\n    selectMonth(month) {\n      if (month.disabled) return\n      this.date = this.date.clone().xMonth(month.xMonth())\n      this.nextStep()\n    },\n    setTime(v, k) {\n      let time = this.time.clone()\n\n      time.add({ [k]: v })\n\n      if (this.type !== 'time') {\n        const date = this.date.clone()\n        time.set({ year: date.year(), month: date.month(), date: date.date() })\n        date.set({ hour: time.hour(), minute: time.minute() })\n        this.date = date\n      }\n\n      if (this.isLower(time)) time = this.minDate.clone()\n      if (this.isMore(time)) time = this.maxDate.clone()\n\n      this.time = time\n\n      const now = new Date().getTime()\n      const def = now - this.timeData.lastUpdate\n      if (def > 20 && def < 300) this.timeData.transitionSpeed = def\n      this.timeData.lastUpdate = now\n\n      window.clearTimeout(this.timeData.timeout)\n      this.timeData.timeout = window.setTimeout(() => {\n        this.timeData.transitionSpeed = 300\n      }, 300)\n    },\n    wheelSetTime(k, e) {\n      const delta = k === 'm' ? this.jumpMinute : 1\n      this.setTime(e.wheelDeltaY > 0 ? delta : -delta, k)\n    },\n    submit(close = true) {\n      let steps = this.steps.length - 1\n      const selected = this.selectedDates\n      if (this.compactTime && this.type === 'datetime') steps -= 1\n      if (this.step < steps) return this.nextStep()\n\n      if (this.hasStep('t')) {\n        const t = { hour: this.time.hour(), minute: this.time.minute() }\n        this.date = this.date.set(t).clone()\n        this.selectedDates = selected.map(d => d.set(t).clone())\n      }\n\n      if (['year', 'month', 'year-month'].indexOf(this.type) !== -1) { this.selectedDates = selected.map(() => this.date.clone()) }\n\n      if (this.range && selected.length > 1) {\n        selected[0].xStartOf('day')\n        selected[1].xEndOf('day')\n      }\n\n      this.output = cloneDates(selected)\n      if (close) this.visible = false\n\n      if (this.isDataArray) {\n        this.$emit('input', this.outputValue)\n        this.$emit('change', cloneDates(selected))\n      } else {\n        this.$emit('input', this.outputValue[0])\n        this.$emit('change', selected[0].clone())\n      }\n    },\n    updateDates(payload) {\n      if (this.isDataArray && !payload) payload = []\n\n      const payloadIsArray = payload instanceof Array\n      const getDate = (input, index = 0) => {\n        let date\n        const startValue =\n          this.value instanceof Array ? this.value[index] : this.value\n        try {\n          const isObject = typeof input === 'object'\n          if (input instanceof Date) {\n            date = this.getMoment(input)\n          } else if (input && isObject && 'clone' in input) {\n            date = input.clone()\n          } else if (input === null || !isObject) {\n            date = this.getMoment(input || startValue || this.initialValue)\n          }\n          date = date.isValid() ? date : this.core.moment()\n        } catch (e) {\n          date = this.core.moment()\n        }\n        this.setTimezone(date, 'in')\n        return date\n      }\n\n      if (payloadIsArray) {\n        this.date = getDate(payload[0])\n        this.selectedDates = payload.map(getDate)\n      } else {\n        this.date = getDate(payload)\n      }\n\n      if (!this.hasStep('t')) this.date.set({ hour: 0, minute: 0, second: 0 })\n\n      if (this.isLower(this.date)) {\n        this.date = this.minDate.clone()\n      } else if (this.isMore(this.date)) {\n        this.date = this.maxDate.clone()\n      }\n\n      if (!payloadIsArray) this.selectedDates = [this.date.clone()]\n      this.time = this.date.clone()\n\n      if (this.value !== '' && this.value !== null && this.value.length) {\n        this.output = cloneDates(this.selectedDates)\n      } else {\n        this.output = []\n        // this.$forceUpdate()\n      }\n    },\n    goToday() {\n      const now = this.core.moment()\n      if (!this.hasStep('t')) now.set({ hour: 0, minute: 0, second: 0 })\n      this.date = now.clone()\n      this.time = now.clone()\n      this.selectedDates = [now.clone()]\n    },\n    setType() {\n      switch (this.type) {\n        case 'date':\n          this.steps = ['y', 'm', 'd']\n          this.goStep('d')\n          break\n        case 'datetime':\n          this.steps = ['y', 'm', 'd', 't']\n          this.goStep('d')\n          break\n        case 'year':\n          this.steps = ['y']\n          this.goStep('y')\n          break\n        case 'month':\n          this.steps = ['m']\n          this.goStep('m')\n          break\n        case 'time':\n          this.steps = ['t']\n          this.goStep('t')\n          break\n        case 'year-month':\n          this.steps = ['y', 'm']\n          this.goStep('y')\n          break\n      }\n    },\n    setView() {\n      const s = this.shortCodes[this.view]\n      if (this.hasStep(s)) this.goStep(s)\n    },\n    setDirection(prop, val, old) {\n      this[prop] = val > old ? 'direction-next' : 'direction-prev'\n    },\n    setMinMax() {\n      const min = this.getMoment(this.min)\n      const max = this.getMoment(this.max)\n      this.minDate = this.min && min.isValid() ? min : false\n      this.maxDate = this.max && max.isValid() ? max : false\n    },\n    getMoment(date) {\n      let d\n      const moment = this.core.moment\n\n      if (date instanceof Date) return moment(date)\n\n      if (this.selfInputFormat === 'x' || this.selfInputFormat === 'unix') {\n        d = moment(date.toString().length === 10 ? date * 1000 : date * 1)\n      } else {\n        try {\n          if (date) {\n            let a = moment(date, this.selfInputFormat)\n            let b = moment(date, this.selfFormat)\n            const now = moment()\n            const year = now.xYear()\n            if (this.type === 'month') {\n              a.xYear(year)\n              b.xYear(year)\n            } else if (this.type === 'time') {\n              a = now.clone().set({\n                h: a.hour(),\n                m: a.minute(),\n                s: 0\n              })\n              b = a.clone()\n            }\n            if (a.year() !== b.year() && a.year() < 1900) {\n              d = b.clone()\n            } else {\n              d = a.clone()\n            }\n          } else {\n            d = moment()\n          }\n        } catch (er) {\n          d = moment()\n        }\n      }\n      return d\n    },\n    focus(e) {\n      if (this.editable) {\n        if (this.$refs.input) this.$refs.input.focus()\n      } else {\n        if (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          e.target.blur()\n          this.visible = !this.visible\n        } else {\n          this.visible = true\n        }\n        return false\n      }\n    },\n    hasStep(step) {\n      return this.steps.indexOf(step) !== -1\n    },\n    setOutput(e) {\n      if (!this.editable) return\n      const value = e.target.value.split('~')\n\n      const output = value.map(item => {\n        item = `${item}`.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n        if (item === '') return null\n        try {\n          const date = this.core.moment(item, this.selfDisplayFormat)\n          return date.isValid() ? date : null\n        } catch (er) {\n          return null\n        }\n      })\n\n      this.output = output.filter(d => d)\n      this.output.sort((a, b) => a - b)\n\n      if (this.output.length) {\n        this.updateDates(cloneDates(this.output))\n        this.submit()\n      } else {\n        // this.$forceUpdate()\n        this.$emit('input', this.isDataArray ? [] : null)\n        this.$emit('change', this.isDataArray ? [] : null)\n      }\n    },\n    wrapperClick() {\n      this.visible = false\n      if (this.wrapperSubmit && this.canSubmit) {\n        this.submit()\n      }\n    },\n    applyDevFn(fn, k) {\n      let result = false\n      const args = Array.prototype.splice.call(arguments, 2)\n      try {\n        args.push({ y: 'year', m: 'month', d: 'day', t: 'time' }[k])\n        result = fn.apply(null, args)\n      } catch (er) {\n        // eslint-disable-next-line\n        console.error(er)\n      }\n      return result\n    },\n    checkDisable(item, value) {\n      const thisDisable = this.disable\n      if (!thisDisable) return false\n      const type = typeof thisDisable\n\n      const checkString = (filter, str, date) => {\n        if (filter instanceof RegExp) return filter.test(str)\n        if (filter === str) return true\n        if (item === 'd') {\n          const length = filter.length\n          return (\n            str.substr(0, length) === filter ||\n            date\n              .clone()\n              .locale('en')\n              .format('dddd') === filter\n          )\n        }\n        return false\n      }\n\n      const check = (date, dateFormatted) => {\n        let matches = false\n        if (type === 'function') {\n          return this.applyDevFn(thisDisable, item, dateFormatted, date.clone())\n        } else if (\n          Object.prototype.toString.call(thisDisable) === '[object Array]'\n        ) {\n          const ii = thisDisable.length\n          for (let i = 0; i < ii; i++) {\n            matches = checkString(thisDisable[i], dateFormatted, date)\n            if (matches) break\n          }\n          return matches\n        } else if (type === 'string' || thisDisable instanceof RegExp) {\n          return checkString(thisDisable, dateFormatted, date)\n        }\n        return false\n      }\n\n      let format = this.selfFormat\n      if (item === 'y') {\n        value = this.core.moment(value, 'jYYYY')\n      } else if (item === 'd') {\n        // remove time from format\n        format = format.replace(/(H(H?))|(h(h?))?(:?)m(m?)(:?)(s(s?))?/g, '')\n      }\n      return check(value, value.format(format))\n    },\n    getHighlights(item, value) {\n      const highlight = this.highlight\n      if (!highlight || typeof highlight !== 'function') return {}\n      if (item === 'y') value = this.core.moment(value, 'jYYYY')\n      return (\n        this.applyDevFn(\n          highlight,\n          item,\n          value.format(this.selfFormat),\n          value.clone()\n        ) || {}\n      )\n    },\n    isLower(date) {\n      return this.minDate && date < this.minDate\n    },\n    isMore(date) {\n      return this.maxDate && date > this.maxDate\n    },\n    clearValue() {\n      if (this.disabled) return\n      this.output = []\n      this.$emit('input', this.isDataArray ? [] : '')\n      this.$emit('change', this.isDataArray ? [] : null)\n    },\n    setLocale(locale) {\n      this.core.changeLocale(locale, this.localeConfig)\n      this.date = this.date.clone()\n      this.selectedDates = this.selectedDates.map(d => d.clone())\n      // this.$forceUpdate()\n    },\n    setTimezone(date, mode) {\n      const tz = this.timezone\n      if (tz) {\n        const r = mode === 'in' ? 1 : -1\n        const moment = this.core.moment\n        if (typeof tz === 'string') {\n          const t =\n            moment()\n              .utc()\n              .format('YYYY-MM-DDTHH:mm:ss') + tz\n          date.add(moment.parseZone(t).utcOffset() * r, 'minutes')\n        } else if (typeof tz === 'boolean' && tz) {\n          date.subtract(new Date(date).getTimezoneOffset() * r, 'minutes')\n        } else if (typeof tz === 'function') {\n          date = tz(date, mode, this)\n        }\n      }\n      return date.clone()\n    },\n    convertToLocaleNumber(value) {\n      if (this.convertNumbers && this.locale === 'fa') {\n        return `${value}`.replace(/\\d+/g, function(digit) {\n          let ret = ''\n          for (let i = 0, len = digit.length; i < len; i++) {\n            ret += String.fromCharCode(digit.charCodeAt(i) + 1728)\n          }\n          return ret\n        })\n      }\n      return value\n    },\n    onWindowResize() {\n      this.windowWidth = window.innerWidth\n    },\n    onWindowClick(event) {\n      if (this.isPopover && this.$refs.picker && this.$refs.inputGroup) {\n        const isOnPicker = this.$refs.picker.contains(event.target)\n        const isOnInput = this.$refs.inputGroup.contains(event.target)\n        if (isOnPicker) event.preventDefault()\n        if (!isOnPicker && !isOnInput) {\n          // setTimeout because:\n          // first read the input value\n          // then process the output\n          // then close the picker\n          setTimeout(() => (this.visible = false), this.editable ? 500 : 0)\n        }\n      }\n    },\n    setPlacement() {\n      if (!this.isPopover) return\n      const allowed = [\n        'top-left',\n        'top-right',\n        'bottom-right',\n        'bottom-left',\n        'left-top',\n        'left-bottom',\n        'right-top',\n        'right-bottom'\n      ]\n      if (allowed.indexOf(this.popover) !== -1) { return (this.popoverPlace = this.popover) }\n\n      this.popoverPlace = 'bottom-right'\n      this.$nextTick(() => {\n        const placement = ['bottom', 'right']\n        const container = this.$refs.container\n        const rect = container.getBoundingClientRect()\n        const left = rect.left\n        const bottom = window.innerHeight - rect.bottom\n        if (bottom <= 0) placement[0] = 'top'\n        if (left <= 0) placement[1] = 'left'\n        this.popoverPlace = placement.join('-')\n      })\n    }\n  },\n  install(Vue, options) {\n    const component = this\n    options = Vue.util.extend(\n      {\n        name: 'data-picker',\n        props: {}\n      },\n      options\n    )\n\n    for (const k in options.props) {\n      if (Object.prototype.hasOwnProperty.call(component.props, k)) {\n        component.props[k].default = options.props[k]\n      }\n    }\n    Vue.component(options.name, component)\n  }\n}\n</script>\n"],"sourceRoot":""}]}